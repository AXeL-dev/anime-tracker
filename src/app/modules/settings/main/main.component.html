<div #viewport class="snippet-page">
  <div class="content">
    <header mdcTopAppBar [viewport]="viewport" [fixedAdjust]="content">
      <div mdcTopAppBarRow>
        <section mdcTopAppBarSection alignStart>
          <button mdcTopAppBarNavIcon class="material-icons" [routerLink]="['/']">arrow_back</button>
          <span mdcTopAppBarTitle>Settings</span>
        </section>
        <section mdcTopAppBarSection alignEnd>
          <button mdcButton (click)="saveSettings()">Save</button>
        </section>
      </div>
    </header>

    <main #content>

      <div mdcListGroup>

        <h3 mdcListGroupSubHeader>General</h3>

        <ul mdcList [nonInteractive]="true">
          <li mdcListItem>
            <i mdcListItemGraphic class="material-icons">share</i>
            <span mdcListItemText>
              Proxy
              <span mdcListItemSecondaryText>Used to bypass CORS limitations on browsers</span>
            </span>
            <div mdcListItemMeta mdcSelect>
              <select mdcSelectControl [(ngModel)]="settings.proxy">
                <option *ngFor="let proxy of getProxies()" [value]="proxy.url">{{ proxy.name }}</option>
              </select>
              <label mdcFloatingLabel></label> <!-- gives an error when removed, so better let it empty for now -->
            </div>
          </li>
          <li *ngIf="browser.isWebExtension" mdcListItem>
            <i mdcListItemGraphic class="material-icons">open_in_new</i>
            <span mdcListItemText>
              Open in a new tab
              <span mdcListItemSecondaryText>Instead of a popup</span>
            </span>
            <div mdcListItemMeta mdcSwitch>
              <input mdcSwitchInput type="checkbox" [(ngModel)]="settings.openInNewTab"/>
            </div>
          </li>
          <li *ngIf="browser.isWebExtension" mdcListItem>
            <i mdcListItemGraphic class="material-icons">link</i>
            <span mdcListItemText>
              Open links in inactive tabs
              <span mdcListItemSecondaryText>Avoid losing focus of the current tab</span>
            </span>
            <div mdcListItemMeta mdcSwitch>
              <input mdcSwitchInput type="checkbox" [(ngModel)]="settings.openLinksInInactiveTabs"/>
            </div>
          </li>
          <li mdcListItem>
            <i mdcListItemGraphic class="material-icons">casino</i>
            <span mdcListItemText>
              Maximum number of episodes to retrieve from each website
              <span mdcListItemSecondaryText>Excluding some episodes may reduce loading time</span>
            </span>
            <div mdcListItemMeta>
              <input type="number" class="number-input" min="5" max="100" [(ngModel)]="settings.maxEpisodesToRetrieve"/>
            </div>
          </li>
          <li mdcListDivider [inset]="true"></li>
        </ul>

        <h3 mdcListGroupSubHeader>Display</h3>

        <ul mdcList [nonInteractive]="true">
          <li mdcListItem>
            <i mdcListItemGraphic class="material-icons">visibility</i>
            <span mdcListItemText>
              Default view
              <span mdcListItemSecondaryText>Set default view</span>
            </span>
            <div mdcListItemMeta mdcSelect>
              <select mdcSelectControl [(ngModel)]="settings.defaultView">
                <option *ngFor="let view of getViews()" [value]="view.value">{{ view.label }}</option>
              </select>
              <label mdcFloatingLabel></label> <!-- gives an error when removed, so better let it empty for now -->
            </div>
          </li>
          <li mdcListItem>
            <i mdcListItemGraphic class="material-icons">view_day</i>
            <span mdcListItemText>
              Display episodes day by day
              <span mdcListItemSecondaryText>Changes the display layout to day by day</span>
            </span>
            <div mdcListItemMeta mdcSwitch>
              <input mdcSwitchInput type="checkbox" [(ngModel)]="settings.displayEpisodesDayByDay"/>
            </div>
          </li>
          <li mdcListDivider [inset]="true"></li>
        </ul>

        <h3 mdcListGroupSubHeader>
          <div mdcFormField alignEnd="true">
            <div mdcCheckbox>
              <input mdcCheckboxInput type="checkbox" (change)="onSelectAllCrawlersChange($event.target.checked) "/>
            </div>
            <label mdcFormFieldLabel>Crawlers</label>
          </div>
        </h3>

        <ul mdcList [nonInteractive]="true">
          <li mdcListItem *ngFor="let crawler of allCrawlers">
            <span mdcListItemGraphic>
              <div mdcCheckbox>
                <input mdcCheckboxInput type="checkbox" [(ngModel)]="crawler.isActive" (change)="onCrawlerChange(crawler)" />
              </div>
            </span>
            <span mdcListItemText>
              {{ crawler.name }}
              <span mdcListItemSecondaryText>
                <a [href]="crawler.baseUrl" target="_blank">
                  {{ crawler.baseUrl }}
                </a>
              </span>
            </span>
          </li>
        </ul>

      </div>

    </main>
  </div>
</div>
