!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var i,o,a=[],r=!0,s=!1;try{for(t=t.call(e);!(r=(i=t.next()).done)&&(a.push(i.value),!n||a.length!==n);r=!0);}catch(c){s=!0,o=c}finally{try{r||null==t.return||t.return()}finally{if(s)throw o}}return a}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function o(e,n,t){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var i=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=l(e)););return e}(e,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(t):o.value}})(e,n,t||e)}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function s(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var t,i=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return c(this,t)}}function c(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,n,t){return n&&u(e.prototype,n),t&&u(e,t),e}(self.webpackChunkanime_tracker=self.webpackChunkanime_tracker||[]).push([[932],{6932:function(i,r,c){"use strict";c.r(r),c.d(r,{PopupModule:function(){return gn}});var u=c(8583),p=c(5263),f=c(5427),h=c(3470),m=c(7709),v=c(5491),b=c(6782),k=c(4056),C=c(639),w=c(961),y=c(8604),x=c(1942),Z=c(452),O=c(4071),_=c(3631),A=c(9744),T=c(2593),M=c(3342),P=c(7393),L=c(1456),q=function(){function e(n,t){d(this,e),this.dueTime=n,this.scheduler=t}return g(e,[{key:"call",value:function(e,n){return n.subscribe(new D(e,this.dueTime,this.scheduler))}}]),e}(),D=function(e){a(t,e);var n=s(t);function t(e,i,o){var a;return d(this,t),(a=n.call(this,e)).dueTime=i,a.scheduler=o,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return g(t,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(S,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),t}(P.L);function S(e){e.debouncedNext()}var I=function(){function e(n,t){d(this,e),this.compare=n,this.keySelector=t}return g(e,[{key:"call",value:function(e,n){return n.subscribe(new J(e,this.compare,this.keySelector))}}]),e}(),J=function(e){a(t,e);var n=s(t);function t(e,i,o){var a;return d(this,t),(a=n.call(this,e)).keySelector=o,a.hasKey=!1,"function"==typeof i&&(a.compare=i),a}return g(t,[{key:"compare",value:function(e,n){return e===n}},{key:"_next",value:function(e){var n;try{var t=this.keySelector;n=t?t(e):e}catch(o){return this.destination.error(o)}var i=!1;if(this.hasKey)try{i=(0,this.compare)(this.key,n)}catch(o){return this.destination.error(o)}else this.hasKey=!0;i||(this.key=n,this.destination.next(e))}}]),t}(P.L),E=c(3679);function N(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"i",4),C.NdJ("mousedown",function(e){return e.preventDefault()})("click",function(){return C.CHM(t),C.oxw().clear()}),C._uU(1,"close"),C.qZA()}}var F=function(){var e=function(){function e(){d(this,e),this.placeholder="Search...",this.value=null,this.valueChange=new C.vpe,this.inputChange=new m.xQ,this.tap=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.inputChange.pipe((0,M.b)(function(){return e.tap.emit()}),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.P;return function(t){return t.lift(new q(e,n))}}(700),function(e){return e.lift(new I(void 0,void 0))}).subscribe(function(n){e.valueChange.emit(n)})}},{key:"ngOnDestroy",value:function(){this.inputChange.complete()}},{key:"onInput",value:function(){this.inputChange.next(this.value)}},{key:"clear",value:function(){this.value=null,this.inputChange.next(this.value)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange",tap:"tap"},decls:5,vars:3,consts:[["mdcTextField","","box","true",1,"search-input"],["mdcTextFieldIcon","",1,"material-icons"],["mdcTextFieldInput","","type","text",3,"placeholder","ngModel","ngModelChange","input"],["mdcTextFieldIcon","","class","material-icons close",3,"mousedown","click",4,"ngIf"],["mdcTextFieldIcon","",1,"material-icons","close",3,"mousedown","click"]],template:function(e,n){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"i",1),C._uU(2,"search"),C.qZA(),C.TgZ(3,"input",2),C.NdJ("ngModelChange",function(e){return n.value=e})("input",function(){return n.onInput()}),C.qZA(),C.YNc(4,N,2,0,"i",3),C.qZA()),2&e&&(C.xp6(3),C.Q6J("placeholder",n.placeholder)("ngModel",n.value),C.xp6(1),C.Q6J("ngIf",null==n.value?null:n.value.length))},directives:[T.aY,T.aF,T.wC,E.Fj,E.JJ,E.On,u.O5],styles:[".search-input[_ngcontent-%COMP%]{position:relative;margin:0 0 0 16px;height:auto;border-radius:4px;background-color:hsla(0,0%,100%,.15)}.search-input[_ngcontent-%COMP%]:before{display:none}.search-input[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{color:#fff;bottom:6px}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]{right:12px;left:auto;font-size:1.1em;padding:3px;text-align:center;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms;border-radius:50%;cursor:pointer;pointer-events:all}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.08)}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;caret-color:#fff;width:200px;padding:8px 40px 8px 48px;transition:width .3s cubic-bezier(.4,0,.2,1) 0ms;border:0;height:1.1875em;margin:0;display:block;min-width:0;background:none;box-sizing:content-box}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:260px;outline:0}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:.42;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]     .mdc-line-ripple{display:none}"]}),e}();function R(e,n){if(1&e&&(C.TgZ(0,"span",3),C._uU(1),C.qZA()),2&e){var t=C.oxw();C.xp6(1),C.hij(" ",t.badge," ")}}var U=["*"],Q=function(){var e=function(){function e(){d(this,e),this.class="",this.label="",this.title="",this.badge=null,this.click=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(e){this.click.emit(e)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-badge-button"]],inputs:{class:"class",label:"label",title:"title",badge:"badge"},outputs:{click:"click"},ngContentSelectors:U,decls:4,vars:5,consts:[[1,"badge-button-container",3,"click"],["mdcTopAppBarAction","",3,"label","title","click"],["class","badge",4,"ngIf"],[1,"badge"]],template:function(e,n){1&e&&(C.F$t(),C.TgZ(0,"span",0),C.NdJ("click",function(e){return e.stopPropagation()}),C.TgZ(1,"button",1),C.NdJ("click",function(e){return n.onClick(e)}),C.Hsn(2),C.qZA(),C.YNc(3,R,2,1,"span",2),C.qZA()),2&e&&(C.xp6(1),C.Tol(n.class),C.Q6J("label",n.label)("title",n.title),C.xp6(2),C.Q6J("ngIf",n.badge))},directives:[T.Y4,u.O5],styles:[".badge-button-container[_ngcontent-%COMP%]{display:flex;position:relative}.badge[_ngcontent-%COMP%]{min-width:20px;height:20px;display:flex;padding:0 6px;z-index:1;position:absolute;top:0;right:0;flex-wrap:wrap;font-size:.75rem;box-sizing:border-box;transition:transform 225ms cubic-bezier(.4,0,.2,1) 0ms;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1;align-content:center;border-radius:10px;flex-direction:row;justify-content:center;color:#fff;background-color:#e25555}"]}),e}(),B=c(5360),V=function(){var e=function(e){a(t,e);var n=s(t);function t(){return d(this,t),n.call(this,"en")}return g(t,[{key:"transform",value:function(e,n,i,a){return o(l(t.prototype),"transform",this).call(this,e,n||"dd MMMM yyyy HH:mm",i,a)}}]),t}(u.uU);return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=C.Yjl({name:"datetime",type:e,pure:!0}),e}(),Y=function(e){return{$implicit:e}};function z(e,n){if(1&e&&(C.TgZ(0,"nav",5),C.TgZ(1,"a",6),C.GkF(2,7),C.TgZ(3,"span",8),C._uU(4),C.TgZ(5,"span",9),C._uU(6),C.ALo(7,"datetime"),C.qZA(),C.qZA(),C.qZA(),C._UZ(8,"hr",10),C.qZA()),2&e){var t=n.$implicit,i=C.oxw(2),o=C.MAs(2);C.xp6(1),C.ekj("unread",t.status===i.notificationStatus.Unread),C.xp6(1),C.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",C.VKq(9,Y,t)),C.xp6(1),C.uIk("title",t.message),C.xp6(1),C.hij(" ",t.message," "),C.xp6(2),C.Oqu(C.lcZ(7,7,t.date))}}function j(e,n){if(1&e&&(C.ynx(0),C.TgZ(1,"div",3),C.YNc(2,z,9,11,"nav",4),C.qZA(),C.BQk()),2&e){var t=C.oxw();C.xp6(2),C.Q6J("ngForOf",t.notifications.get())}}function H(e,n){1&e&&(C.TgZ(0,"i",16),C._uU(1,"check_circle"),C.qZA())}function G(e,n){1&e&&(C.TgZ(0,"i",17),C._uU(1,"info"),C.qZA())}function K(e,n){1&e&&(C.TgZ(0,"i",18),C._uU(1,"error"),C.qZA())}function $(e,n){1&e&&(C.TgZ(0,"i",17),C._uU(1,"info"),C.qZA())}function W(e,n){if(1&e&&(C.ynx(0,11),C.YNc(1,H,2,0,"i",12),C.YNc(2,G,2,0,"i",13),C.YNc(3,K,2,0,"i",14),C.YNc(4,$,2,0,"i",15),C.BQk()),2&e){var t=n.$implicit,i=C.oxw();C.Q6J("ngSwitch",t.type),C.xp6(1),C.Q6J("ngSwitchCase",i.notificationTypes.Success),C.xp6(1),C.Q6J("ngSwitchCase",i.notificationTypes.Info),C.xp6(1),C.Q6J("ngSwitchCase",i.notificationTypes.Error)}}function X(e,n){1&e&&(C.TgZ(0,"div",19),C.TgZ(1,"i",20),C._uU(2,"notifications_off"),C.qZA(),C.qZA())}var ee=function(){var e=function(){function e(n){d(this,e),this.notifications=n,this.notificationTypes=B.k,this.notificationStatus=B.E}return g(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(A.T))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-notifications"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["notificationIconTpl",""],["noNotificationsTpl",""],["mdcListGroup",""],["mdcList","",4,"ngFor","ngForOf"],["mdcList",""],["mdcListItem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mdcListItemText",""],["mdcListItemSecondaryText",""],["mdcListDivider",""],[3,"ngSwitch"],["mdcListItemGraphic","","class","material-icons success","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons error","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchDefault"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","success"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","info"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","error"],[1,"no-notifications-container"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"]],template:function(e,n){if(1&e&&(C.YNc(0,j,3,1,"ng-container",0),C.YNc(1,W,5,4,"ng-template",null,1,C.W1O),C.YNc(3,X,3,0,"ng-template",null,2,C.W1O)),2&e){var t=C.MAs(4);C.Q6J("ngIf",n.notifications.get().length>0)("ngIfElse",t)}},directives:[u.O5,T.mB,u.sg,T.l0,T.DF,u.tP,T.p9,T.wP,T.P,u.RF,u.n9,u.ED,T.NZ],pipes:[V],styles:[".error[_ngcontent-%COMP%]{color:#e25555}.info[_ngcontent-%COMP%]{color:#0275d8}.success[_ngcontent-%COMP%]{color:#28a745}.unread[_ngcontent-%COMP%]{background-color:#ecf8fe}.no-notifications-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.no-notifications-container[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{font-size:34px;margin:0;cursor:default}"]}),e}(),ne=function(){return["/"]},te=function(e){return{view:e}};function ie(e,n){if(1&e&&(C.TgZ(0,"a",29),C._uU(1),C.qZA()),2&e){var t=C.oxw();C.Q6J("routerLink",C.DdM(4,ne))("queryParams",C.VKq(5,te,t.view===t.views.Favorites?t.views.Latest:t.views.Favorites))("title",t.view===t.views.Favorites?"Show all":"Show favorites"),C.xp6(1),C.hij(" ",t.view===t.views.Favorites?"favorite":"favorite_border"," ")}}var oe=function(){return["/viewed"]},ae=function(){return["/settings"]},re=["*"],se=function(){var e=function(){function e(n,t,i,o){d(this,e),this.router=n,this.debug=t,this.settings=i,this.notifications=o,this.openMenu=!1,this.openNotifications=!1,this.wasNotificationsOpened=!1,this.view=null,this.isLoading=!1,this.isLoadingChange=new C.vpe,this.searchValue=null,this.searchValueChange=new C.vpe,this.views=v.G,this.debug.log("Router url:",this.router.url)}return g(e,[{key:"ngOnInit",value:function(){}},{key:"toggleMenu",value:function(){this.openMenu=!this.openMenu}},{key:"closeMenu",value:function(){this.openMenu=!1}},{key:"toggleNotifications",value:function(){this.openNotifications=!this.openNotifications,this.wasNotificationsOpened=this.openNotifications}},{key:"onOpenNotificationsChange",value:function(e){!e&&this.wasNotificationsOpened&&this.notifications.markAllAsRead()}},{key:"onSearchTap",value:function(){this.isLoading=!0,this.isLoadingChange.emit(this.isLoading)}},{key:"onSearchValueChange",value:function(e){this.searchValueChange.emit(e)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(p.F0),C.Y36(_.r),C.Y36(Z.g),C.Y36(A.T))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-layout"]],inputs:{view:"view",isLoading:"isLoading",searchValue:"searchValue"},outputs:{isLoadingChange:"isLoadingChange",searchValueChange:"searchValueChange"},ngContentSelectors:re,decls:47,vars:28,consts:[[1,"page"],["viewport",""],["mdcDrawerContainer","temporary",3,"open","openChange"],["mdcDrawer",""],["mdcDrawerToolbarSpacer",""],["mdcDrawerContent","","mdcListGroup",""],["mdcList",""],["mdcListItem","",3,"routerLink","queryParams","selected","click"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"],["mdcListDivider",""],["mdcListItem","",3,"routerLink","selected","click"],[1,"content"],["mdcTopAppBar","",3,"viewport","fixedAdjust"],["mdcTopAppBarRow",""],["mdcTopAppBarSection","","alignStart",""],["mdcTopAppBarNavIcon","",1,"material-icons",3,"click"],["mdcTopAppBarTitle","","title","Anime Tracker",3,"routerLink"],["alt","logo","src","assets/icons/128.png"],[3,"value","valueChange","tap"],["mdcTopAppBarSection","","alignEnd",""],["mdcTopAppBarAction","","class","material-icons","label","Show favorites",3,"routerLink","queryParams","title",4,"ngIf"],["label","Notifications","title","Notifications",1,"material-icons",3,"badge","click"],["mdcTopAppBarAction","","label","Settings","title","Settings",1,"material-icons",3,"routerLink"],["mdcLinearProgress","",3,"indeterminate","closed"],["content",""],["mdcDrawerContainer","temporary",1,"right",3,"open","openChange"],["mdcDrawerHeader",""],["mdcDrawerHeaderContent",""],["mdcDrawerContent",""],["mdcTopAppBarAction","","label","Show favorites",1,"material-icons",3,"routerLink","queryParams","title"]],template:function(e,n){if(1&e&&(C.F$t(),C.TgZ(0,"div",0,1),C.TgZ(2,"aside",2),C.NdJ("openChange",function(e){return n.openMenu=e}),C.TgZ(3,"nav",3),C._UZ(4,"div",4),C.TgZ(5,"div",5),C.TgZ(6,"nav",6),C.TgZ(7,"a",7),C.NdJ("click",function(){return n.closeMenu()}),C.TgZ(8,"i",8),C._uU(9,"star"),C.qZA(),C._uU(10,"Latest "),C.qZA(),C.TgZ(11,"a",7),C.NdJ("click",function(){return n.closeMenu()}),C.TgZ(12,"i",8),C._uU(13,"favorite"),C.qZA(),C._uU(14,"Favorites "),C.qZA(),C.qZA(),C._UZ(15,"hr",9),C.TgZ(16,"nav",6),C.TgZ(17,"a",10),C.NdJ("click",function(){return n.closeMenu()}),C.TgZ(18,"i",8),C._uU(19,"visibility"),C.qZA(),C._uU(20,"Viewed "),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(21,"div",11),C.TgZ(22,"header",12),C.TgZ(23,"div",13),C.TgZ(24,"section",14),C.TgZ(25,"button",15),C.NdJ("click",function(){return n.toggleMenu()}),C._uU(26," menu "),C.qZA(),C.TgZ(27,"a",16),C._UZ(28,"img",17),C.qZA(),C.TgZ(29,"app-search-input",18),C.NdJ("valueChange",function(e){return n.searchValue=e})("tap",function(){return n.onSearchTap()})("valueChange",function(e){return n.onSearchValueChange(e)}),C.qZA(),C.qZA(),C.TgZ(30,"section",19),C.YNc(31,ie,2,7,"a",20),C.TgZ(32,"app-badge-button",21),C.NdJ("click",function(){return n.toggleNotifications()}),C._uU(33," notifications "),C.qZA(),C.TgZ(34,"a",22),C._uU(35," settings "),C.qZA(),C.qZA(),C.qZA(),C._UZ(36,"div",23),C.qZA(),C.TgZ(37,"main",null,24),C.Hsn(39),C.qZA(),C.qZA(),C.TgZ(40,"aside",25),C.NdJ("openChange",function(e){return n.openNotifications=e})("openChange",function(e){return n.onOpenNotificationsChange(e)}),C.TgZ(41,"nav",3),C._UZ(42,"div",4),C.TgZ(43,"div",26),C.TgZ(44,"div",27),C._uU(45,"Notifications"),C.qZA(),C.qZA(),C._UZ(46,"app-notifications",28),C.qZA(),C.qZA(),C.qZA()),2&e){var t=C.MAs(1),i=C.MAs(38);C.xp6(2),C.Q6J("open",n.openMenu),C.xp6(5),C.Q6J("routerLink",C.DdM(19,ne))("queryParams",C.VKq(20,te,n.views.Latest))("selected",n.view===n.views.Latest),C.xp6(4),C.Q6J("routerLink",C.DdM(22,ne))("queryParams",C.VKq(23,te,n.views.Favorites))("selected",n.view===n.views.Favorites),C.xp6(6),C.Q6J("routerLink",C.DdM(25,oe))("selected",n.router.url.startsWith("/viewed")),C.xp6(5),C.Q6J("viewport",t)("fixedAdjust",i),C.xp6(5),C.Q6J("routerLink",C.DdM(26,ne)),C.xp6(2),C.Q6J("value",n.searchValue),C.xp6(2),C.Q6J("ngIf",n.settings.openInNewTab),C.xp6(1),C.Q6J("badge",n.notifications.unreadCount),C.xp6(2),C.Q6J("routerLink",C.DdM(27,ae)),C.xp6(2),C.Q6J("indeterminate",!0)("closed",!n.isLoading),C.xp6(4),C.Q6J("open",n.openNotifications)}},directives:[T.Cq,T.Es,T.Ar,T.n3,T.mB,T.l0,p.yS,T.DF,T.NZ,T.P,T.eD,T.JF,T.B_,T.cH,T.K,F,u.O5,Q,T.Y4,T.bR,T.pA,T.v1,ee],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}[mdcTopAppBar][_ngcontent-%COMP%]{position:fixed!important}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]{height:60px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]{display:flex;padding:0 10px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}[mdcDrawerHeader][_ngcontent-%COMP%], [mdcDrawerToolbarSpacer][_ngcontent-%COMP%]{background-color:#6200ee;background-color:var(--mdc-theme-primary,#6200ee);color:#fff;color:var(--mdc-theme-on-primary,#fff);height:60px}[mdcDrawerContainer].right[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{left:auto;right:0;transform:translateX(calc(100% + 20px))}[mdcDrawerContainer].right.mdc-drawer--open[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{transform:none}.content[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;flex-grow:1;height:100%;box-sizing:border-box}[mdcLinearProgress].mdc-linear-progress--closed[_ngcontent-%COMP%]{display:none}[mdcLinearProgress][_ngcontent-%COMP%]   .mdc-linear-progress__bar-inner[_ngcontent-%COMP%]{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}"]}),e}();function ce(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"li",4),C.TgZ(1,"span",5),C._uU(2),C.qZA(),C.TgZ(3,"a",6),C.NdJ("click",function(e){var n=C.CHM(t).$implicit;return C.oxw(2).onClick(e,n.url)}),C._uU(4),C.qZA(),C.qZA()}if(2&e){var i=n.$implicit,o=C.oxw(2);C.xp6(1),C.Q6J("ngClass",o.langColors[i.lang.toLowerCase()]||""),C.xp6(1),C.Oqu(i.lang),C.xp6(1),C.Q6J("href",i.url,C.LSH),C.xp6(1),C.Oqu(i.url)}}function le(e,n){if(1&e&&(C.TgZ(0,"ul",2),C.YNc(1,ce,5,4,"li",3),C.qZA()),2&e){var t=C.oxw();C.xp6(1),C.Q6J("ngForOf",t.links)}}function de(e,n){1&e&&(C.TgZ(0,"div",7),C._uU(1,"No available links."),C.qZA())}var ue=function(){var e=function(){function e(n,t){d(this,e),this.settings=n,this.browser=t,this.links=[],this.linkClick=new C.vpe,this.langColors={vostfr:"blue",vostar:"yellow",vosten:"dark",vf:"green"}}return g(e,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(e,n){this.linkClick.emit(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(n,!this.settings.openLinksInInactiveTabs))}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(Z.g),C.Y36(O.q))},e.\u0275cmp=C.Xpm({type:e,selectors:[["episode-link-list"]],inputs:{links:"links"},outputs:{linkClick:"linkClick"},decls:3,vars:2,consts:[["mdcList","",4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcList",""],["mdcListItem","",4,"ngFor","ngForOf"],["mdcListItem",""],[1,"badge",3,"ngClass"],["target","_blank",1,"link",3,"href","click"],[1,"empty-text"]],template:function(e,n){if(1&e&&(C.YNc(0,le,2,1,"ul",0),C.YNc(1,de,2,0,"ng-template",null,1,C.W1O)),2&e){var t=C.MAs(2);C.Q6J("ngIf",null==n.links?null:n.links.length)("ngIfElse",t)}},directives:[u.O5,T.l0,u.sg,T.DF,u.mk],styles:["[mdcList][_ngcontent-%COMP%]{padding:12px 0}.badge[_ngcontent-%COMP%]{padding:2px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase;background:#6c757d;margin-right:10px;border-radius:2px;min-width:90px;text-align:center}.badge.blue[_ngcontent-%COMP%]{background:#0061aa}.badge.dark[_ngcontent-%COMP%]{background:#34393f}.badge.pink[_ngcontent-%COMP%]{background:#b83280}.badge.green[_ngcontent-%COMP%]{background:#38a169}.badge.red[_ngcontent-%COMP%]{background:#c53030}.badge.purple[_ngcontent-%COMP%]{background:#6b46c1}.badge.orange[_ngcontent-%COMP%]{background:#c05621}.badge.yellow[_ngcontent-%COMP%]{background:#fec107;color:#1b0e00}.link[_ngcontent-%COMP%]{font-size:15px;font-weight:500;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}"]}),e}(),ge=["dialog"],pe=function(){var e=function(){function e(){d(this,e),this.title="Choose a link",this.links=[],this.linkClick=new C.vpe,this.close=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){this.dialog.open()}},{key:"onClose",value:function(){this.close.emit()}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C.Xpm({type:e,selectors:[["episode-choose-link-dialog"]],viewQuery:function(e,n){var t;(1&e&&C.Gf(ge,5),2&e)&&(C.iGM(t=C.CRH())&&(n.dialog=t.first))},inputs:{title:"title",links:"links"},outputs:{linkClick:"linkClick",close:"close"},decls:12,vars:3,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[3,"links","linkClick"],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""]],template:function(e,n){1&e&&(C.TgZ(0,"aside",0,1),C.NdJ("cancel",function(){return n.onClose()}),C.TgZ(2,"div",2),C.TgZ(3,"header",3),C.TgZ(4,"h2",4),C._uU(5),C.qZA(),C.qZA(),C.TgZ(6,"section",5),C.TgZ(7,"episode-link-list",6),C.NdJ("linkClick",function(){return n.linkClick.emit()}),C.qZA(),C.qZA(),C.TgZ(8,"footer",7),C.TgZ(9,"button",8),C._uU(10,"Close"),C.qZA(),C.qZA(),C.qZA(),C._UZ(11,"div",9),C.qZA()),2&e&&(C.xp6(5),C.AsE(" ",n.title," ",(null==n.links?null:n.links.length)>1?"("+n.links.length+")":""," "),C.xp6(2),C.Q6J("links",n.links))},directives:[T.zv,T.SU,T.e6,T.d8,T.fw,T.OJ,ue,T.zL,T.S8,T.LC,T.SG],styles:[""]}),e}(),fe=["dialog"];function he(e,n){1&e&&(C.TgZ(0,"span",23),C._uU(1,"visibility"),C.qZA())}function me(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"a",21),C.NdJ("activate",function(){var e=C.CHM(t).index;return C.oxw(2).activeIndex=e}),C._uU(1),C.YNc(2,he,2,0,"span",22),C.qZA()}if(2&e){var i=n.$implicit,o=n.index,a=C.oxw(2);C.ekj("mdc-ripple-upgraded--background-focused",a.activeIndex===o),C.Q6J("active",a.activeIndex===o),C.xp6(1),C.hij(" ",i.number," "),C.xp6(1),C.Q6J("ngIf",i.isViewed)}}function ve(e,n){if(1&e){var t=C.EpF();C.ynx(0),C.TgZ(1,"div",11),C.TgZ(2,"div",12),C.TgZ(3,"a",13),C._uU(4," navigate_before "),C.qZA(),C.qZA(),C.TgZ(5,"div",14),C.TgZ(6,"nav",15),C.YNc(7,me,3,5,"a",16),C.qZA(),C.qZA(),C.TgZ(8,"div",17),C.TgZ(9,"a",18),C._uU(10," navigate_next "),C.qZA(),C.qZA(),C.qZA(),C.TgZ(11,"div",19),C.TgZ(12,"episode-link-list",20),C.NdJ("linkClick",function(){C.CHM(t);var e=C.oxw();return e.linkClick.emit(e.episodes[e.activeIndex])}),C.qZA(),C.qZA(),C.BQk()}if(2&e){var i=C.oxw();C.xp6(7),C.Q6J("ngForOf",i.episodes),C.xp6(5),C.Q6J("links",i.episodes[i.activeIndex][i.linksKey])}}function be(e,n){1&e&&(C.TgZ(0,"div",24),C._uU(1,"No available links."),C.qZA())}var ke=function(){var e=function(){function e(){d(this,e),this.title="Choose a link",this.episodes=[],this.linksKey="streamLinks",this.linkClick=new C.vpe,this.close=new C.vpe,this.activeIndex=0}return g(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){this.dialog.open()}},{key:"onClose",value:function(){this.activeIndex=0,this.close.emit()}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C.Xpm({type:e,selectors:[["episode-range-choose-link-dialog"]],viewQuery:function(e,n){var t;(1&e&&C.Gf(fe,5),2&e)&&(C.iGM(t=C.CRH())&&(n.dialog=t.first))},inputs:{title:"title",episodes:"episodes",linksKey:"linksKey"},outputs:{linkClick:"linkClick",close:"close"},decls:14,vars:4,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"active","mdc-ripple-upgraded--background-focused","activate",4,"ngFor","ngForOf"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],[1,"tab-content"],[3,"links","linkClick"],["mdcTab","","tabindex","0",3,"active","activate"],["class","material-icons-outlined viewed-icon","title","Viewed",4,"ngIf"],["title","Viewed",1,"material-icons-outlined","viewed-icon"],[1,"empty-text"]],template:function(e,n){if(1&e&&(C.TgZ(0,"aside",0,1),C.NdJ("cancel",function(){return n.onClose()}),C.TgZ(2,"div",2),C.TgZ(3,"header",3),C.TgZ(4,"h2",4),C._uU(5),C.qZA(),C.qZA(),C.TgZ(6,"section",5),C.YNc(7,ve,13,2,"ng-container",6),C.YNc(8,be,2,0,"ng-template",null,7,C.W1O),C.qZA(),C.TgZ(10,"footer",8),C.TgZ(11,"button",9),C._uU(12,"Close"),C.qZA(),C.qZA(),C.qZA(),C._UZ(13,"div",10),C.qZA()),2&e){var t=C.MAs(9);C.xp6(5),C.AsE(" ",n.title," ",null!=n.episodes&&n.episodes.length&&(null==n.episodes[n.activeIndex][n.linksKey]?null:n.episodes[n.activeIndex][n.linksKey].length)>1?"("+n.episodes[n.activeIndex][n.linksKey].length+")":""," "),C.xp6(2),C.Q6J("ngIf",null==n.episodes?null:n.episodes.length)("ngIfElse",t)}},directives:[T.zv,T.SU,T.e6,T.d8,T.fw,T.OJ,u.O5,T.zL,T.S8,T.LC,T.SG,T.Cm,T.Qx,T.Cn,T.on,T.Io,u.sg,T.ru,ue,T.f3],styles:["[mdcDialogBody][_ngcontent-%COMP%]{position:relative}[mdcTabBarScroller][_ngcontent-%COMP%]{position:sticky;top:0;left:0;background-color:#fff;z-index:1}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}.viewed-icon[_ngcontent-%COMP%]{color:#0275d8;vertical-align:middle;font-size:1.6em;margin-left:8px}"]}),e}(),Ce=function(){var e=function(){function e(n){d(this,e),this.element=n,this.on=!1,this.titleOn="",this.titleOff="",this.classOn="",this.classOff="",this.onChange=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){this.update()}},{key:"ngOnChanges",value:function(e){e.on.isFirstChange()||this.update()}},{key:"update",value:function(){var e,n,t,i;this.on?(this.element.nativeElement.innerHTML=this.iconOn,this.element.nativeElement.title=this.titleOn,(null===(e=this.classOff)||void 0===e?void 0:e.length)&&this.removeClass(this.classOff),(null===(n=this.classOn)||void 0===n?void 0:n.length)&&this.addClass(this.classOn)):(this.element.nativeElement.innerHTML=this.iconOff,this.element.nativeElement.title=this.titleOff,(null===(t=this.classOn)||void 0===t?void 0:t.length)&&this.removeClass(this.classOn),(null===(i=this.classOff)||void 0===i?void 0:i.length)&&this.addClass(this.classOff))}},{key:"addClass",value:function(e){this.element.nativeElement.classList.add(e.split(" "))}},{key:"removeClass",value:function(e){this.element.nativeElement.classList.remove(e.split(" "))}},{key:"onClick",value:function(e){this.on=!this.on,this.onChange.emit(this.on)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(C.SBq))},e.\u0275dir=C.lG2({type:e,selectors:[["","iconToggle",""]],hostBindings:function(e,n){1&e&&C.NdJ("click",function(e){return n.onClick(e)})},inputs:{iconOn:"iconOn",iconOff:"iconOff",on:"on",titleOn:"titleOn",titleOff:"titleOff",classOn:"classOn",classOff:"classOff"},outputs:{onChange:"onChange"},features:[C.TTD]}),e}(),we=c(9075),ye=function(){var e=function(){function e(n){d(this,e),this.sanitizer=n}return g(e,[{key:"transform",value:function(e,n){switch(n){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("SafePipe unable to bypass security for invalid type: ".concat(n))}}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(we.H7,16))},e.\u0275pipe=C.Yjl({name:"safe",type:e,pure:!0}),e}(),xe=function(){var e=function(){function e(){d(this,e)}return g(e,[{key:"transform",value:function(e,n){switch(n){case"format":return'url("'.concat(e,'")');case"encode":return encodeURI(e);case"decode":return decodeURI(e);case"encodeAndFormat":return this.transform(this.transform(e,"encode"),"format");case"decodeAndFormat":return this.transform(this.transform(e,"decode"),"format");default:throw new Error("UrlPipe unable to transform url for invalid action: ".concat(n))}}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=C.Yjl({name:"url",type:e,pure:!0}),e}();function Ze(e,n){1&e&&(C.ynx(0),C.TgZ(1,"i",16),C._uU(2,"movie"),C.qZA(),C.BQk())}function Oe(e,n){1&e&&(C.TgZ(0,"div",17),C.TgZ(1,"span"),C._uU(2,"New"),C.qZA(),C.qZA())}function _e(e,n){1&e&&(C.TgZ(0,"div",18),C.TgZ(1,"span"),C._uU(2,"End"),C.qZA(),C.qZA())}function Ae(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"div",19,20),C.TgZ(2,"button",21),C.NdJ("click",function(){return C.CHM(t),C.MAs(5).open=!0}),C._uU(3," visibility "),C.qZA(),C.TgZ(4,"div",22,23),C.NdJ("openChange",function(e){return C.CHM(t),C.MAs(5).open=e}),C.TgZ(6,"ul",24),C.TgZ(7,"li",25),C.NdJ("click",function(){return C.CHM(t),C.oxw().markAsUnviewed()}),C._uU(8,"Mark as unviewed"),C.qZA(),C.qZA(),C.qZA(),C.qZA()}if(2&e){var i=C.MAs(1),o=C.MAs(5);C.oxw();var a=C.MAs(15);C.Udp("display","flex"),C.xp6(2),C.Udp("margin",0),C.xp6(2),C.Q6J("open",o.open)("menuAnchor",i)("viewport",a)}}function Te(e,n){if(1&e&&(C.TgZ(0,"a",27),C.ALo(1,"safe"),C._uU(2," check_circle_outline "),C.qZA()),2&e){var t=C.oxw(2);C.Q6J("href",C.xi3(1,1,t.viewedEpisodes.getEpisodeUrl(t.episode),"resourceUrl"),C.LSH)}}function Me(e,n){if(1&e&&C.YNc(0,Te,3,4,"a",26),2&e){var t=C.oxw();C.Q6J("ngIf",t.episode.isRegular)}}var Pe=function(){var e=function(){function e(n,t,i,o){d(this,e),this.settings=n,this.browser=t,this.favoriteAnimes=i,this.viewedEpisodes=o,this.streamLinksClick=new C.vpe,this.downloadLinksClick=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){this.episode.isViewed=this.viewedEpisodes.isViewed(this.episode),this.episode.isRegular=this.viewedEpisodes.isRegular(this.episode)}},{key:"onClick",value:function(e){if(this.episode.streamLinks.length>1)return e.preventDefault(),this.showStreamLinks(),!1;this.markAsViewed(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(this.episode.streamLinks[0].url,!this.settings.openLinksInInactiveTabs))}},{key:"showStreamLinks",value:function(){this.streamLinksClick.emit(this.episode)}},{key:"showDownloadLinks",value:function(){this.downloadLinksClick.emit(this.episode)}},{key:"toggleFavorite",value:function(e){e?this.favoriteAnimes.add(this.episode.anime.title):this.favoriteAnimes.remove(this.episode.anime.title)}},{key:"isFavorite",value:function(){return this.favoriteAnimes.isFavorite(this.episode.anime.title)}},{key:"markAsViewed",value:function(){this.episode.isViewed=!0,this.viewedEpisodes.add(this.episode)}},{key:"markAsUnviewed",value:function(){this.episode.isViewed=!1,this.viewedEpisodes.remove(this.episode)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(Z.g),C.Y36(O.q),C.Y36(y.S),C.Y36(x.z))},e.\u0275cmp=C.Xpm({type:e,selectors:[["episode-card"]],inputs:{episode:"episode"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:24,vars:19,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","target","_blank",3,"href","click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],["class","card-badge new",4,"ngIf"],["class","card-badge end",4,"ngIf"],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["mdcMenuAnchor","",3,"display",4,"ngIf","ngIfElse"],["isRegularTemplate",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],[1,"card-badge","end"],["mdcMenuAnchor",""],["anchor","mdcMenuAnchor"],["title","Viewed",1,"material-icons-outlined","mdc-icon-button","wider","blue-eye",3,"click"],["mdcMenu","",3,"open","menuAnchor","viewport","openChange"],["isViewedMenu",""],["mdcList",""],["mdcListItem","",3,"click"],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,n){if(1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"a",1),C.NdJ("click",function(e){return n.onClick(e)}),C.TgZ(2,"div",2),C.ALo(3,"safe"),C.ALo(4,"url"),C.TgZ(5,"div",3),C.TgZ(6,"h2",4),C.YNc(7,Ze,3,0,"ng-container",5),C._uU(8),C.qZA(),C.TgZ(9,"div",6),C.TgZ(10,"span"),C._uU(11),C.qZA(),C.qZA(),C.YNc(12,Oe,3,0,"div",7),C.YNc(13,_e,3,0,"div",8),C.qZA(),C.qZA(),C.qZA(),C.TgZ(14,"div",9,10),C.YNc(16,Ae,9,7,"div",11),C.YNc(17,Me,1,1,"ng-template",null,12,C.W1O),C.TgZ(19,"button",13),C.NdJ("onChange",function(e){return n.toggleFavorite(e)}),C.qZA(),C.TgZ(20,"button",14),C.NdJ("click",function(){return n.showStreamLinks()}),C._uU(21," play_circle_outline "),C.qZA(),C.TgZ(22,"button",15),C.NdJ("click",function(){return n.showDownloadLinks()}),C._uU(23," save_alt "),C.qZA(),C.qZA(),C.qZA()),2&e){var t=C.MAs(18);C.xp6(1),C.Q6J("href",n.episode.streamLinks[0].url,C.LSH),C.xp6(1),C.Udp("background-image",C.xi3(3,13,C.xi3(4,16,n.episode.anime.cover,"encodeAndFormat"),"style")),C.uIk("data-cover",n.episode.anime.cover),C.xp6(4),C.Q6J("title",n.episode.anime.title),C.xp6(1),C.Q6J("ngIf",n.episode.anime.isMovie),C.xp6(1),C.hij(" ",n.episode.anime.title," "),C.xp6(3),C.Oqu(n.episode.number),C.xp6(1),C.Q6J("ngIf",n.episode.anime.isNew),C.xp6(1),C.Q6J("ngIf",n.episode.anime.isFinished),C.xp6(3),C.Q6J("ngIf",n.episode.isViewed)("ngIfElse",t),C.xp6(3),C.Q6J("on",n.isFavorite())}},directives:[T.C0,T.m5,T.PK,T.cV,u.O5,Ce,T.tI,T.hS,T.l0,T.DF],pipes:[ye,xe],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.4213bbf693efb54bc5bf.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),e}();function Le(e,n){1&e&&(C.ynx(0),C.TgZ(1,"i",15),C._uU(2,"movie"),C.qZA(),C.BQk())}function qe(e,n){1&e&&(C.ynx(0),C.TgZ(1,"div",16),C.TgZ(2,"span"),C._uU(3,"New"),C.qZA(),C.qZA(),C.BQk())}function De(e,n){1&e&&(C.TgZ(0,"div",18),C.TgZ(1,"span"),C._uU(2,"End"),C.qZA(),C.qZA())}function Se(e,n){if(1&e&&C.YNc(0,De,3,0,"div",17),2&e){var t=C.oxw();C.Q6J("ngIf",t.episodeRange.last.anime.isFinished)}}function Ie(e,n){if(1&e&&(C.TgZ(0,"a",19),C.ALo(1,"safe"),C._uU(2," check_circle_outline "),C.qZA()),2&e){var t=C.oxw();C.Q6J("href",C.xi3(1,1,t.viewedEpisodes.getEpisodeUrl(t.episodeRange.first),"resourceUrl"),C.LSH)}}var Je=function(){var e=function(){function e(n,t){d(this,e),this.favoriteAnimes=n,this.viewedEpisodes=t,this.streamLinksClick=new C.vpe,this.downloadLinksClick=new C.vpe}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.episodeRange.range=this.episodeRange.range.map(function(n){return Object.assign(Object.assign({},n),{isViewed:e.viewedEpisodes.isViewed(n)})}),this.episodeRange.first.isRegular=this.viewedEpisodes.isRegular(this.episodeRange.first)}},{key:"onClick",value:function(e){return e.preventDefault(),this.showStreamLinks(),!1}},{key:"showStreamLinks",value:function(){this.streamLinksClick.emit(this.episodeRange)}},{key:"showDownloadLinks",value:function(){this.downloadLinksClick.emit(this.episodeRange)}},{key:"toggleFavorite",value:function(e){e?this.favoriteAnimes.add(this.episodeRange.first.anime.title):this.favoriteAnimes.remove(this.episodeRange.first.anime.title)}},{key:"isFavorite",value:function(){return this.favoriteAnimes.isFavorite(this.episodeRange.first.anime.title)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(y.S),C.Y36(x.z))},e.\u0275cmp=C.Xpm({type:e,selectors:[["episode-range-card"]],inputs:{episodeRange:"episodeRange"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:23,vars:18,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","href","javascript:void(0)",3,"click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],[4,"ngIf","ngIfElse"],["endBadge",""],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],["class","card-badge end",4,"ngIf"],[1,"card-badge","end"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,n){if(1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"a",1),C.NdJ("click",function(e){return n.onClick(e)}),C.TgZ(2,"div",2),C.ALo(3,"safe"),C.ALo(4,"url"),C.TgZ(5,"div",3),C.TgZ(6,"h2",4),C.YNc(7,Le,3,0,"ng-container",5),C._uU(8),C.qZA(),C.TgZ(9,"div",6),C.TgZ(10,"span"),C._uU(11),C.qZA(),C.qZA(),C.YNc(12,qe,4,0,"ng-container",7),C.YNc(13,Se,1,1,"ng-template",null,8,C.W1O),C.qZA(),C.qZA(),C.qZA(),C.TgZ(15,"div",9,10),C.YNc(17,Ie,3,4,"a",11),C.TgZ(18,"button",12),C.NdJ("onChange",function(e){return n.toggleFavorite(e)}),C.qZA(),C.TgZ(19,"button",13),C.NdJ("click",function(){return n.showStreamLinks()}),C._uU(20," play_circle_outline "),C.qZA(),C.TgZ(21,"button",14),C.NdJ("click",function(){return n.showDownloadLinks()}),C._uU(22," save_alt "),C.qZA(),C.qZA(),C.qZA()),2&e){var t=C.MAs(14);C.xp6(2),C.Udp("background-image",C.xi3(3,12,C.xi3(4,15,n.episodeRange.first.anime.cover,"encodeAndFormat"),"style")),C.uIk("data-cover",n.episodeRange.first.anime.cover),C.xp6(4),C.Q6J("title",n.episodeRange.first.anime.title),C.xp6(1),C.Q6J("ngIf",n.episodeRange.first.anime.isMovie),C.xp6(1),C.hij(" ",n.episodeRange.first.anime.title," "),C.xp6(3),C.AsE("",n.episodeRange.first.number," - ",n.episodeRange.last.number,""),C.xp6(1),C.Q6J("ngIf",n.episodeRange.first.anime.isNew)("ngIfElse",t),C.xp6(5),C.Q6J("ngIf",n.episodeRange.first.isRegular),C.xp6(1),C.Q6J("on",n.isFavorite())}},directives:[T.C0,T.m5,T.PK,T.cV,u.O5,Ce],pipes:[ye,xe],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.4213bbf693efb54bc5bf.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),e}(),Ee=function(){var e=function(e){a(t,e);var n=s(t);function t(){return d(this,t),n.call(this,"en")}return g(t,[{key:"transform",value:function(e,n,i,a){switch((0,h.hp)(new Date(e))){case(0,h.Lg)():return"Today";case(0,h.Cv)():return"Yesterday";default:return o(l(t.prototype),"transform",this).call(this,e,n||"EEEE, dd MMMM yyyy",i,a)}}}]),t}(u.uU);return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=C.Yjl({name:"shortdate",type:e,pure:!0}),e}(),Ne=["episodeStreamLinksDialog"],Fe=["episodeDownloadLinksDialog"],Re=["episodeRangeStreamLinksDialog"],Ue=["episodeRangeDownloadLinksDialog"],Qe=function(e){return{$implicit:e}};function Be(e,n){if(1&e&&C.GkF(0,19),2&e){var t=n.$implicit;C.oxw(4);var i=C.MAs(7),o=C.MAs(5);C.Q6J("ngTemplateOutlet",t.range?i:o)("ngTemplateOutletContext",C.VKq(2,Qe,t))}}function Ve(e,n){if(1&e&&(C.ynx(0),C.TgZ(1,"h3",15),C._uU(2),C.ALo(3,"shortdate"),C.qZA(),C._UZ(4,"div",16),C.TgZ(5,"section",17),C.YNc(6,Be,1,4,"ng-container",18),C.qZA(),C.BQk()),2&e){var t=C.oxw().$implicit,i=C.oxw(2);C.xp6(2),C.Oqu(C.lcZ(3,2,t)),C.xp6(4),C.Q6J("ngForOf",i.episodesByDays[t])}}function Ye(e,n){if(1&e&&(C.ynx(0),C.YNc(1,Ve,7,4,"ng-container",14),C.BQk()),2&e){var t=n.$implicit,i=C.oxw(2);C.xp6(1),C.Q6J("ngIf",null==i.episodesByDays[t]?null:i.episodesByDays[t].length)}}function ze(e,n){if(1&e&&(C.ynx(0),C.YNc(1,Ye,2,1,"ng-container",13),C.BQk()),2&e){var t=C.oxw();C.xp6(1),C.Q6J("ngForOf",t.days)}}function je(e,n){if(1&e&&C.GkF(0,19),2&e){var t=n.$implicit;C.oxw(2);var i=C.MAs(7),o=C.MAs(5);C.Q6J("ngTemplateOutlet",t.range?i:o)("ngTemplateOutletContext",C.VKq(2,Qe,t))}}function He(e,n){if(1&e&&(C.TgZ(0,"section",17),C.YNc(1,je,1,4,"ng-container",18),C.qZA()),2&e){var t=C.oxw();C.xp6(1),C.Q6J("ngForOf",t.episodes)}}function Ge(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"episode-card",20),C.NdJ("streamLinksClick",function(e){return C.CHM(t),C.oxw().openStreamLinksDialog(e)})("downloadLinksClick",function(e){return C.CHM(t),C.oxw().openDownloadLinksDialog(e)}),C.qZA()}2&e&&C.Q6J("episode",n.$implicit)}function Ke(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"episode-range-card",21),C.NdJ("streamLinksClick",function(e){return C.CHM(t),C.oxw().openStreamLinksDialog(e)})("downloadLinksClick",function(e){return C.CHM(t),C.oxw().openDownloadLinksDialog(e)}),C.qZA()}2&e&&C.Q6J("episodeRange",n.$implicit)}function $e(e,n){if(1&e){var t=C.EpF();C.TgZ(0,"button",22),C.NdJ("click",function(){return C.CHM(t),C.oxw().refresh()}),C.TgZ(1,"i",23),C._uU(2,"refresh"),C.qZA(),C.qZA()}}var We=function(){return[]},Xe=function(){var i=function(){function i(e,n,t,o,a,r,s){d(this,i),this.animeProvider=e,this.favoriteAnimes=n,this.viewedEpisodes=t,this.settings=o,this.browser=a,this.debug=r,this.route=s,this.isLoading=!0,this.searchValue=null,this.episodes=[],this.days=[],this.episodesByDays=[],this.allEpisodes=[],this.selectedEpisode=null,this.selectedEpisodeRange=null,this.componentDestroy=new m.xQ}return g(i,[{key:"ngOnInit",value:function(){var e=this;this.browser.isWebExtension&&this.browser.setBadgeText(""),this.route.queryParams.pipe((0,b.R)(this.componentDestroy)).subscribe(function(n){e.view=n.view||e.settings.defaultView,e.debug.log("Current view:",e.view),e.allEpisodes.length>0?e.filterEpisodes(e.allEpisodes,e.days):e.fetchEpisodes()})}},{key:"ngOnDestroy",value:function(){this.componentDestroy.next(),this.componentDestroy.complete()}},{key:"fetchEpisodes",value:function(e){var t=this;this.isLoading=!0,this.animeProvider.getLatestEpisodesByDays(e).pipe((0,b.R)(this.componentDestroy)).subscribe(function(e){var i=n(e,2),o=i[0],a=i[1];t.allEpisodes=o,t.filterEpisodes(o,a),t.days=a},function(e){console.error(e.message)},function(){t.isLoading=!1})}},{key:"filterEpisodes",value:function(e,n){var t,i=this;this.episodes=this.view===v.G.Favorites?e.filter(function(e){return i.favoriteAnimes.isFavorite(e.anime.title)}):e,(null===(t=this.searchValue)||void 0===t?void 0:t.length)&&(this.episodes=this.episodes.filter(function(e){return-1!==e.anime.title.toLowerCase().indexOf(i.searchValue.toLowerCase())})),this.settings.mergeCommonEpisodes&&(this.episodes=this.mergeCommonEpisodes(this.episodes)),this.settings.displayEpisodesDayByDay&&n.forEach(function(e){if(e){var n=(0,h.hp)(new Date(e));i.episodesByDays[e]=i.episodes.filter(function(e){if(!e.releaseDate)return!1;var t=(0,h.hp)(new Date(e.releaseDate));return n===t})}})}},{key:"mergeCommonEpisodes",value:function(n){var i,o,a=this,r=[],s={},c=n.slice(),l=function(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw r}}}}(n);try{var d=function(){var n=o.value;if(Object.keys(s).find(function(e){return(0,k.T0)(e,n.anime.title,a.settings.episodeSimilarityDegree,!0)&&-1!==s[e].indexOf(n.number)}))return"continue";var t=c.filter(function(e){return(0,k.T0)(e.anime.title,n.anime.title,a.settings.episodeSimilarityDegree,!0)&&(!a.settings.displayEpisodesDayByDay||(0,h.zu)(e.releaseDate,n.releaseDate))});if(s[n.anime.title]=[].concat(e(s[n.anime.title]||[]),e(t.map(function(e){return e.number}))),c=c.filter(function(e){return-1===t.findIndex(function(n){return n.anime.title===e.anime.title&&n.number===e.number})}),t.length>1){var l=new f.W(t.sort(function(e,n){return e.number-n.number}),n.releaseDate);r.push(l),(null===(i=a.selectedEpisodeRange)||void 0===i?void 0:i.first.anime.title)===l.first.anime.title&&(a.selectedEpisodeRange=l)}else r.push(n)};for(l.s();!(o=l.n()).done;)d()}catch(u){l.e(u)}finally{l.f()}return r}},{key:"openStreamLinksDialog",value:function(e){e instanceof f.W?(this.selectedEpisodeRange=e,this.episodeRangeStreamLinksDialog.open()):(this.selectedEpisode=e,this.episodeStreamLinksDialog.open())}},{key:"openDownloadLinksDialog",value:function(e){e instanceof f.W?(this.selectedEpisodeRange=e,this.episodeRangeDownloadLinksDialog.open()):(this.selectedEpisode=e,this.episodeDownloadLinksDialog.open())}},{key:"markEpisodeAsViewed",value:function(e){e.isViewed=!0,this.viewedEpisodes.add(e)}},{key:"search",value:function(e){this.debug.log("Searching for:",e),this.filterEpisodes(this.allEpisodes,this.days),this.isLoading=!1}},{key:"refresh",value:function(){this.episodes=[],this.episodesByDays=[],this.fetchEpisodes(!0)}}]),i}();return i.\u0275fac=function(e){return new(e||i)(C.Y36(w._),C.Y36(y.S),C.Y36(x.z),C.Y36(Z.g),C.Y36(O.q),C.Y36(_.r),C.Y36(p.gz))},i.\u0275cmp=C.Xpm({type:i,selectors:[["app-main"]],viewQuery:function(e,n){var t;(1&e&&(C.Gf(Ne,5),C.Gf(Fe,5),C.Gf(Re,5),C.Gf(Ue,5)),2&e)&&(C.iGM(t=C.CRH())&&(n.episodeStreamLinksDialog=t.first),C.iGM(t=C.CRH())&&(n.episodeDownloadLinksDialog=t.first),C.iGM(t=C.CRH())&&(n.episodeRangeStreamLinksDialog=t.first),C.iGM(t=C.CRH())&&(n.episodeRangeDownloadLinksDialog=t.first))},decls:17,vars:18,consts:[[3,"view","isLoading","searchValue","isLoadingChange","searchValueChange"],[4,"ngIf","ngIfElse"],["showAllTemplate",""],["episodeCard",""],["episodeRangeCard",""],[3,"title","links","linkClick","close"],["episodeStreamLinksDialog",""],["episodeDownloadLinksDialog",""],["linksKey","streamLinks",3,"title","episodes","linkClick","close"],["episodeRangeStreamLinksDialog",""],["linksKey","downloadLinks",3,"title","episodes","linkClick","close"],["episodeRangeDownloadLinksDialog",""],["mdcButton","","raised","","class","refresh-button","title","Refresh",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"day-title"],[1,"day-divider"],[1,"custom-card-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"episode","streamLinksClick","downloadLinksClick"],[3,"episodeRange","streamLinksClick","downloadLinksClick"],["mdcButton","","raised","","title","Refresh",1,"refresh-button",3,"click"],["mdcButtonIcon","",1,"material-icons"]],template:function(e,n){if(1&e&&(C.TgZ(0,"app-layout",0),C.NdJ("isLoadingChange",function(e){return n.isLoading=e})("searchValueChange",function(e){return n.searchValue=e})("searchValueChange",function(e){return n.search(e)}),C.YNc(1,ze,2,1,"ng-container",1),C.YNc(2,He,2,1,"ng-template",null,2,C.W1O),C.YNc(4,Ge,1,1,"ng-template",null,3,C.W1O),C.YNc(6,Ke,1,1,"ng-template",null,4,C.W1O),C.TgZ(8,"episode-choose-link-dialog",5,6),C.NdJ("linkClick",function(){return n.markEpisodeAsViewed(n.selectedEpisode)})("close",function(){return n.selectedEpisode=null}),C.qZA(),C.TgZ(10,"episode-choose-link-dialog",5,7),C.NdJ("linkClick",function(){return n.markEpisodeAsViewed(n.selectedEpisode)})("close",function(){return n.selectedEpisode=null}),C.qZA(),C.TgZ(12,"episode-range-choose-link-dialog",8,9),C.NdJ("linkClick",function(e){return n.markEpisodeAsViewed(e)})("close",function(){return n.selectedEpisodeRange=null}),C.qZA(),C.TgZ(14,"episode-range-choose-link-dialog",10,11),C.NdJ("linkClick",function(e){return n.markEpisodeAsViewed(e)})("close",function(){return n.selectedEpisodeRange=null}),C.qZA(),C.qZA(),C.YNc(16,$e,3,0,"button",12)),2&e){var t=C.MAs(3);C.Q6J("view",n.view)("isLoading",n.isLoading)("searchValue",n.searchValue),C.xp6(1),C.Q6J("ngIf",n.settings.displayEpisodesDayByDay)("ngIfElse",t),C.xp6(7),C.Q6J("title","Choose a stream link")("links",(null==n.selectedEpisode?null:n.selectedEpisode.streamLinks)||C.DdM(14,We)),C.xp6(2),C.Q6J("title","Choose a download link")("links",(null==n.selectedEpisode?null:n.selectedEpisode.downloadLinks)||C.DdM(15,We)),C.xp6(2),C.Q6J("title","Choose a stream link")("episodes",(null==n.selectedEpisodeRange?null:n.selectedEpisodeRange.range)||C.DdM(16,We)),C.xp6(2),C.Q6J("title","Choose a download link")("episodes",(null==n.selectedEpisodeRange?null:n.selectedEpisodeRange.range)||C.DdM(17,We)),C.xp6(2),C.Q6J("ngIf",!n.isLoading)}},directives:[se,u.O5,pe,ke,u.sg,u.tP,Pe,Je,T.S8],pipes:[Ee],styles:[".custom-card-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-flow:row wrap;padding-top:24px;padding-left:16px;padding-right:16px}.custom-card-container[_ngcontent-%COMP%]:empty{display:none}.day-title[_ngcontent-%COMP%]{margin:0 0 5px 28px;font-size:18px;font-weight:400}.day-title[_ngcontent-%COMP%]:first-of-type{margin-top:20px}.day-divider[_ngcontent-%COMP%]{margin:0 0 0 28px;width:calc(100% - 56px);border-bottom:1px solid rgba(0,0,0,.12);height:0}.refresh-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;padding:0;border-radius:50%;min-height:45px;min-width:45px;transition:all .3s ease-in-out}.refresh-button[_ngcontent-%COMP%]:hover{transform:rotate(270deg)}"]}),i}(),en=c(4762),nn=c(3604);function tn(e,n){if(1&e&&(C.TgZ(0,"option",24),C._uU(1),C.qZA()),2&e){var t=n.$implicit;C.Q6J("value",t.number),C.xp6(1),C.hij(" ",t.number," ")}}function on(e,n){if(1&e){var t=C.EpF();C.ynx(0),C.TgZ(1,"li",14),C.TgZ(2,"span",15),C.TgZ(3,"button",16),C.NdJ("onChange",function(e){var n=C.CHM(t).$implicit;return C.oxw().toggleFavorite(n,e)}),C.qZA(),C.qZA(),C.TgZ(4,"span",17),C._uU(5),C.qZA(),C.TgZ(6,"span",18),C.TgZ(7,"div",19),C.TgZ(8,"select",20),C.YNc(9,tn,2,2,"option",21),C.qZA(),C.TgZ(10,"label",22),C._uU(11,"Last viewed episodes"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C._UZ(12,"li",23),C.BQk()}if(2&e){var i=n.$implicit;C.xp6(3),C.Q6J("on",i.isFavorite),C.xp6(2),C.hij(" ",i.title," "),C.xp6(3),C.Q6J("ngModel",i.episodes[0].number),C.xp6(1),C.Q6J("ngForOf",i.episodes)}}var an,rn=function(){var e=function(){function e(n,t,i,o,a){d(this,e),this.viewedEpisodes=n,this.favoriteAnimes=t,this.settings=i,this.debug=o,this.route=a,this.isLoading=!1,this.searchValue=null,this.viewedAnimes=[],this.allViewedAnimes=[],this.tabs={All:"all",Favorites:"favorites"},this.activeTab=this.tabs.All,this.count={all:0,favorites:0},this.infiniteScroll={initial:50,max:50,step:50},this.componentDestroy=new m.xQ}return g(e,[{key:"ngOnInit",value:function(){return(0,en.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.viewedEpisodes.getAsync();case 2:e.sent.forEach(function(e){var t=n.allViewedAnimes.findIndex(function(t){return(0,k.T0)(t.title,e.animeTitle,n.settings.episodeSimilarityDegree)});t>-1?n.allViewedAnimes[t].episodes.find(function(n){return n.number===e.number})?n.debug.warn("Duplicate viewed episode found:",e):(n.allViewedAnimes[t].episodes.push(e),n.allViewedAnimes[t].episodes=n.allViewedAnimes[t].episodes.sort(function(e,n){return n.number-e.number})):n.allViewedAnimes.push({title:e.animeTitle,episodes:[e],isFavorite:n.favoriteAnimes.isFavorite(e.animeTitle)})}),this.viewedAnimes=this.allViewedAnimes,this.count={all:this.allViewedAnimes.length,favorites:this.allViewedAnimes.filter(function(e){return e.isFavorite}).length},this.route.params.pipe((0,b.R)(this.componentDestroy)).subscribe(function(e){n.searchValue=e.search||"",n.debug.log("Search value:",n.searchValue),n.searchValue.length&&n.search(n.searchValue)});case 6:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.componentDestroy.next(),this.componentDestroy.complete()}},{key:"search",value:function(e){this.debug.log("Searching for:",e),this.filterAnimes(),this.isLoading=!1}},{key:"filterAnimes",value:function(){var e,n=this,t=[],i=(t=(null===(e=this.searchValue)||void 0===e?void 0:e.length)?this.allViewedAnimes.filter(function(e){return(0,k.T0)(e.title,n.searchValue,n.settings.episodeSimilarityDegree)}):this.allViewedAnimes).filter(function(e){return e.isFavorite});switch(this.count={all:t.length,favorites:i.length},this.activeTab){case this.tabs.Favorites:t=i}this.viewedAnimes=t,this.infiniteScroll.max=this.infiniteScroll.initial}},{key:"switchTab",value:function(e){this.activeTab=e,this.filterAnimes()}},{key:"toggleFavorite",value:function(e,n){n?(this.favoriteAnimes.add(e.title),e.isFavorite=!0):(this.favoriteAnimes.remove(e.title),e.isFavorite=!1)}},{key:"onScroll",value:function(){this.infiniteScroll.max+=this.infiniteScroll.step}}]),e}();return e.\u0275fac=function(n){return new(n||e)(C.Y36(x.z),C.Y36(y.S),C.Y36(Z.g),C.Y36(_.r),C.Y36(p.gz))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-viewed"]],decls:19,vars:8,consts:[[3,"isLoading","searchValue","isLoadingChange","searchValueChange"],["mdcDialogBody",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"activate"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],["infiniteScroll","",1,"tab-content",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["mdcListGroup",""],["mdcList","",3,"nonInteractive"],[4,"ngFor","ngForOf"],["mdcListItem",""],["mdcListItemGraphic",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["mdcListItemText",""],["mdcListItemMeta",""],["mdcSelect","","outlined",""],["mdcSelectControl","",3,"ngModel"],["disabled","",3,"value",4,"ngFor","ngForOf"],["mdcFloatingLabel",""],["mdcListDivider",""],["disabled","",3,"value"]],template:function(e,n){1&e&&(C.TgZ(0,"app-layout",0),C.NdJ("isLoadingChange",function(e){return n.isLoading=e})("searchValueChange",function(e){return n.searchValue=e})("searchValueChange",function(e){return n.search(e)}),C.TgZ(1,"section",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"a",4),C._uU(5," navigate_before "),C.qZA(),C.qZA(),C.TgZ(6,"div",5),C.TgZ(7,"nav",6),C.TgZ(8,"a",7),C.NdJ("activate",function(){return n.switchTab(n.tabs.All)}),C._uU(9),C.qZA(),C.TgZ(10,"a",7),C.NdJ("activate",function(){return n.switchTab(n.tabs.Favorites)}),C._uU(11),C.qZA(),C.qZA(),C.qZA(),C.TgZ(12,"div",8),C.TgZ(13,"a",9),C._uU(14," navigate_next "),C.qZA(),C.qZA(),C.qZA(),C.TgZ(15,"div",10),C.NdJ("scrolled",function(){return n.onScroll()}),C.TgZ(16,"div",11),C.TgZ(17,"ul",12),C.YNc(18,on,13,4,"ng-container",13),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&e&&(C.Q6J("isLoading",n.isLoading)("searchValue",n.searchValue),C.xp6(9),C.hij("All (",n.count.all,")"),C.xp6(2),C.hij("Favorites (",n.count.favorites,")"),C.xp6(4),C.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50),C.xp6(2),C.Q6J("nonInteractive",!0),C.xp6(1),C.Q6J("ngForOf",n.viewedAnimes.slice(0,n.infiniteScroll.max)))},directives:[se,T.OJ,T.Cm,T.Qx,T.Cn,T.on,T.Io,T.f3,T.ru,nn.R,T.mB,T.l0,u.sg,T.DF,T.NZ,Ce,T.p9,T.gd,T.tM,T.FW,E.EJ,E.JJ,E.On,T.gp,T.P,E.YN,E.Kr],styles:["[mdcDialogBody][_ngcontent-%COMP%]{padding:0}[mdcListItem][_ngcontent-%COMP%]{margin:0 10px}.tab-content[_ngcontent-%COMP%]{margin-top:20px}.red-heart[_ngcontent-%COMP%]{color:#e25555}[mdcSelect][_ngcontent-%COMP%]{min-width:200px}[mdcSelect][_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}[mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline__idle[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transition:none}"]}),e}(),sn=[{path:"",component:Xe},{path:"viewed",children:e([":search",""].map(function(e){return{path:e,component:rn}}))}],cn=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[p.Bz.forChild(sn)],p.Bz]}),e}(),ln=c(2271),dn=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[u.ez,ln.m,p.Bz]]}),e}(),un=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[u.ez,ln.m,dn,p.Bz]]}),e}(),gn=((an=function e(){d(this,e)}).\u0275fac=function(e){return new(e||an)},an.\u0275mod=C.oAB({type:an}),an.\u0275inj=C.cJS({imports:[[u.ez,cn,ln.m,dn,un]]}),an)}}])}();