function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,c=function(){};return{s:c,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw o}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,c=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(s){c=!0,o=s}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(n):c.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var c=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Ed0d:function(e,t,n){"use strict";n.r(t),n.d(t,"PopupModule",(function(){return gt}));var i=n("ofXK"),c=n("tyNb"),o=function(){function e(t,n){_classCallCheck(this,e),this._range=[],(null==t?void 0:t.length)&&(this.range=t),n&&(this.releaseDate=n)}return _createClass(e,[{key:"range",get:function(){return this._range},set:function(e){this._range=e,this.first=this.getFirst(),this.last=this.getLast()}},{key:"getFirst",value:function(){return this.range[0]||null}},{key:"getLast",value:function(){var e=this.range.length-1;return e>0?this.range[e]:null}}]),e}(),a=n("73Pe"),r=n("XNiG"),s=n("E8n8"),l=n("1G5W"),d=n("fXoL"),u=n("RKI1"),p=n("vKPz"),f=n("XPoy"),g=n("6nr9"),h=n("tQGB"),m=n("cqYI"),b=n("KWWs"),v=n("nX5o"),C=n("vkgz"),k=n("7o/Q"),y=n("D0XW"),_=function(){function e(t,n){_classCallCheck(this,e),this.dueTime=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new w(e,this.dueTime,this.scheduler))}}]),e}(),w=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,c){var o;return _classCallCheck(this,n),(o=t.call(this,e)).dueTime=i,o.scheduler=c,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _createClass(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(O,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(k.a);function O(e){e.debouncedNext()}var M=function(){function e(t,n){_classCallCheck(this,e),this.compare=t,this.keySelector=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new x(e,this.compare,this.keySelector))}}]),e}(),x=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,c){var o;return _classCallCheck(this,n),(o=t.call(this,e)).keySelector=c,o.hasKey=!1,"function"==typeof i&&(o.compare=i),o}return _createClass(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(c){return this.destination.error(c)}var i=!1;if(this.hasKey)try{i=(0,this.compare)(this.key,t)}catch(c){return this.destination.error(c)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}]),n}(k.a),P=n("3Pt+");function L(e,t){if(1&e){var n=d.ec();d.dc(0,"i",4),d.lc("mousedown",(function(e){return d.yc(n),e.preventDefault()}))("click",(function(){return d.yc(n),d.nc().clear()})),d.Ec(1,"close"),d.cc()}}var E,I,D=((E=function(){function e(){_classCallCheck(this,e),this.placeholder="Search...",this.value=null,this.valueChange=new d.q,this.inputChange=new r.a,this.tap=new d.q}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.inputChange.pipe(Object(C.a)((function(){return e.tap.emit()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a;return function(n){return n.lift(new _(e,t))}}(700),(function(e){return e.lift(new M(void 0,void 0))})).subscribe((function(t){e.valueChange.emit(t)}))}},{key:"ngOnDestroy",value:function(){this.inputChange.complete()}},{key:"onInput",value:function(){this.inputChange.next(this.value)}},{key:"clear",value:function(){this.value=null,this.inputChange.next(this.value)}}]),e}()).\u0275fac=function(e){return new(e||E)},E.\u0275cmp=d.Rb({type:E,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange",tap:"tap"},decls:5,vars:3,consts:[["mdcTextField","","box","true",1,"search-input"],["mdcTextFieldIcon","",1,"material-icons"],["mdcTextFieldInput","","type","text",3,"placeholder","ngModel","ngModelChange","input"],["mdcTextFieldIcon","","class","material-icons close",3,"mousedown","click",4,"ngIf"],["mdcTextFieldIcon","",1,"material-icons","close",3,"mousedown","click"]],template:function(e,t){1&e&&(d.dc(0,"div",0),d.dc(1,"i",1),d.Ec(2,"search"),d.cc(),d.dc(3,"input",2),d.lc("ngModelChange",(function(e){return t.value=e}))("input",(function(){return t.onInput()})),d.cc(),d.Cc(4,L,2,0,"i",3),d.cc()),2&e&&(d.Mb(3),d.tc("placeholder",t.placeholder)("ngModel",t.value),d.Mb(1),d.tc("ngIf",null==t.value?null:t.value.length))},directives:[v.Y,v.Z,v.ab,P.b,P.f,P.g,i.k],styles:[".search-input[_ngcontent-%COMP%]{position:relative;margin:0 0 0 16px;height:auto;border-radius:4px;background-color:hsla(0,0%,100%,.15)}.search-input[_ngcontent-%COMP%]:before{display:none}.search-input[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{color:#fff;bottom:6px}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]{right:12px;left:auto;font-size:1.1em;padding:3px;text-align:center;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms;border-radius:50%;cursor:pointer;pointer-events:all}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.08)}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;caret-color:#fff;width:200px;padding:8px 40px 8px 48px;transition:width .3s cubic-bezier(.4,0,.2,1) 0ms;border:0;height:1.1875em;margin:0;display:block;min-width:0;background:none;box-sizing:content-box}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:260px;outline:0}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:.42;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]     .mdc-line-ripple{display:none}"]}),E),T=n("ioN6"),S=((I=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"en")}return _createClass(n,[{key:"transform",value:function(e,t,i,c){return _get(_getPrototypeOf(n.prototype),"transform",this).call(this,e,t||"dd MMMM yyyy HH:mm",i,c)}}]),n}(i.d)).\u0275fac=function(e){return new(e||I)},I.\u0275pipe=d.Wb({name:"datetime",type:I,pure:!0}),I),A=function(e){return{$implicit:e}};function R(e,t){if(1&e&&(d.dc(0,"nav",5),d.dc(1,"a",6),d.Zb(2,7),d.dc(3,"span",8),d.Ec(4),d.dc(5,"span",9),d.Ec(6),d.oc(7,"datetime"),d.cc(),d.cc(),d.cc(),d.Yb(8,"hr",10),d.cc()),2&e){var n=t.$implicit;d.nc(2);var i=d.xc(2);d.Mb(2),d.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",d.vc(7,A,n)),d.Mb(1),d.Nb("title",n.message),d.Mb(1),d.Gc(" ",n.message," "),d.Mb(2),d.Fc(d.pc(7,5,n.date))}}function F(e,t){if(1&e&&(d.bc(0),d.dc(1,"div",3),d.Cc(2,R,9,9,"nav",4),d.cc(),d.ac()),2&e){var n=d.nc();d.Mb(2),d.tc("ngForOf",n.notifications.get())}}function V(e,t){1&e&&(d.dc(0,"i",16),d.Ec(1,"check_circle"),d.cc())}function B(e,t){1&e&&(d.dc(0,"i",17),d.Ec(1,"info"),d.cc())}function j(e,t){1&e&&(d.dc(0,"i",18),d.Ec(1,"error"),d.cc())}function z(e,t){1&e&&(d.dc(0,"i",17),d.Ec(1,"info"),d.cc())}function X(e,t){if(1&e&&(d.bc(0,11),d.Cc(1,V,2,0,"i",12),d.Cc(2,B,2,0,"i",13),d.Cc(3,j,2,0,"i",14),d.Cc(4,z,2,0,"i",15),d.ac()),2&e){var n=t.$implicit,i=d.nc();d.tc("ngSwitch",n.type),d.Mb(1),d.tc("ngSwitchCase",i.notificationTypes.Success),d.Mb(1),d.tc("ngSwitchCase",i.notificationTypes.Info),d.Mb(1),d.tc("ngSwitchCase",i.notificationTypes.Error)}}function N(e,t){1&e&&(d.dc(0,"div",19),d.dc(1,"i",20),d.Ec(2,"notifications_off"),d.cc(),d.cc())}var q,G,H=((q=function(){function e(t){_classCallCheck(this,e),this.notifications=t,this.notificationTypes=T.b}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||q)(d.Xb(b.a))},q.\u0275cmp=d.Rb({type:q,selectors:[["app-notifications"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["notificationIconTpl",""],["noNotificationsTpl",""],["mdcListGroup",""],["mdcList","",4,"ngFor","ngForOf"],["mdcList",""],["mdcListItem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mdcListItemText",""],["mdcListItemSecondaryText",""],["mdcListDivider",""],[3,"ngSwitch"],["mdcListItemGraphic","","class","material-icons success","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons error","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchDefault"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","success"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","info"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","error"],[1,"no-notifications-container"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"]],template:function(e,t){if(1&e&&(d.Cc(0,F,3,1,"ng-container",0),d.Cc(1,X,5,4,"ng-template",null,1,d.Dc),d.Cc(3,N,3,0,"ng-template",null,2,d.Dc)),2&e){var n=d.xc(4);d.tc("ngIf",t.notifications.get().length>0)("ngIfElse",n)}},directives:[i.k,v.D,i.j,v.B,v.F,i.o,v.J,v.I,v.C,i.l,i.m,i.n,v.G],pipes:[S],styles:[".error[_ngcontent-%COMP%]{color:#e25555}.info[_ngcontent-%COMP%]{color:#0275d8}.success[_ngcontent-%COMP%]{color:#28a745}.no-notifications-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.no-notifications-container[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{font-size:34px;margin:0;cursor:default}"]}),q),U=function(){return["/"]},K=function(e){return{view:e}},W=function(){return["/viewed"]},$=function(){return["/settings"]},Y=["*"],Q=((G=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.debug=n,this.notifications=i,this.openMenu=!1,this.openNotifications=!1,this.view=null,this.isLoading=!1,this.isLoadingChange=new d.q,this.searchValue=null,this.searchValueChange=new d.q,this.views=s.b,this.debug.log("Router url:",this.router.url)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"toggleMenu",value:function(){this.openMenu=!this.openMenu}},{key:"closeMenu",value:function(){this.openMenu=!1}},{key:"toggleNotifications",value:function(){this.openNotifications=!this.openNotifications,this.openNotifications&&this.notifications.markAllAsRead()}},{key:"closeNotifications",value:function(){this.openNotifications=!1}},{key:"onSearchTap",value:function(){this.isLoading=!0,this.isLoadingChange.emit(this.isLoading)}},{key:"onSearchValueChange",value:function(e){this.searchValueChange.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||G)(d.Xb(c.c),d.Xb(m.a),d.Xb(b.a))},G.\u0275cmp=d.Rb({type:G,selectors:[["app-layout"]],inputs:{view:"view",isLoading:"isLoading",searchValue:"searchValue"},outputs:{isLoadingChange:"isLoadingChange",searchValueChange:"searchValueChange"},ngContentSelectors:Y,decls:46,vars:29,consts:[[1,"page"],["viewport",""],["mdcDrawerContainer","temporary",3,"open","openChange"],["mdcDrawer",""],["mdcDrawerToolbarSpacer",""],["mdcDrawerContent","","mdcListGroup",""],["mdcList",""],["mdcListItem","",3,"routerLink","queryParams","selected","click"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"],["mdcListDivider",""],["mdcListItem","",3,"routerLink","selected","click"],[1,"content"],["mdcTopAppBar","",3,"viewport","fixedAdjust"],["mdcTopAppBarRow",""],["mdcTopAppBarSection","","alignStart",""],["mdcTopAppBarNavIcon","",1,"material-icons",3,"click"],["mdcTopAppBarTitle","","title","Anime Tracker",3,"routerLink"],["alt","logo","src","assets/icons/128.png"],[3,"value","valueChange","tap"],["mdcTopAppBarSection","","alignEnd",""],["mdcTopAppBarAction","","label","Notifications",1,"material-icons",3,"click"],["mdcTopAppBarAction","","label","Settings",1,"material-icons",3,"routerLink"],["mdcLinearProgress","",3,"indeterminate","closed"],["content",""],["mdcDrawerContainer","temporary",1,"right",3,"open","openChange"],["mdcDrawerHeader",""],["mdcDrawerHeaderContent",""],["mdcDrawerContent",""]],template:function(e,t){if(1&e&&(d.sc(),d.dc(0,"div",0,1),d.dc(2,"aside",2),d.lc("openChange",(function(e){return t.openMenu=e})),d.dc(3,"nav",3),d.Yb(4,"div",4),d.dc(5,"div",5),d.dc(6,"nav",6),d.dc(7,"a",7),d.lc("click",(function(){return t.closeMenu()})),d.dc(8,"i",8),d.Ec(9,"star"),d.cc(),d.Ec(10,"Latest "),d.cc(),d.dc(11,"a",7),d.lc("click",(function(){return t.closeMenu()})),d.dc(12,"i",8),d.Ec(13,"favorite"),d.cc(),d.Ec(14,"Favorites "),d.cc(),d.cc(),d.Yb(15,"hr",9),d.dc(16,"nav",6),d.dc(17,"a",10),d.lc("click",(function(){return t.closeMenu()})),d.dc(18,"i",8),d.Ec(19,"visibility"),d.cc(),d.Ec(20,"Viewed "),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.dc(21,"div",11),d.dc(22,"header",12),d.dc(23,"div",13),d.dc(24,"section",14),d.dc(25,"button",15),d.lc("click",(function(){return t.toggleMenu()})),d.Ec(26,"menu"),d.cc(),d.dc(27,"a",16),d.Yb(28,"img",17),d.cc(),d.dc(29,"app-search-input",18),d.lc("valueChange",(function(e){return t.searchValue=e}))("tap",(function(){return t.onSearchTap()}))("valueChange",(function(e){return t.onSearchValueChange(e)})),d.cc(),d.cc(),d.dc(30,"section",19),d.dc(31,"button",20),d.lc("click",(function(){return t.toggleNotifications()})),d.Ec(32),d.cc(),d.dc(33,"a",21),d.Ec(34,"settings"),d.cc(),d.cc(),d.cc(),d.Yb(35,"div",22),d.cc(),d.dc(36,"main",null,23),d.rc(38),d.cc(),d.cc(),d.dc(39,"aside",24),d.lc("openChange",(function(e){return t.openNotifications=e})),d.dc(40,"nav",3),d.Yb(41,"div",4),d.dc(42,"div",25),d.dc(43,"div",26),d.Ec(44,"Notifications"),d.cc(),d.cc(),d.Yb(45,"app-notifications",27),d.cc(),d.cc(),d.cc()),2&e){var n=d.xc(1),i=d.xc(37);d.Mb(2),d.tc("open",t.openMenu),d.Mb(5),d.tc("routerLink",d.uc(20,U))("queryParams",d.vc(21,K,t.views.Latest))("selected",t.view===t.views.Latest),d.Mb(4),d.tc("routerLink",d.uc(23,U))("queryParams",d.vc(24,K,t.views.Favorites))("selected",t.view===t.views.Favorites),d.Mb(6),d.tc("routerLink",d.uc(26,W))("selected",t.router.url.startsWith("/viewed")),d.Mb(5),d.tc("viewport",n)("fixedAdjust",i),d.Mb(5),d.tc("routerLink",d.uc(27,U)),d.Mb(2),d.tc("value",t.searchValue),d.Mb(2),d.Ob("red-color",t.notifications.hasUnread()),d.Mb(1),d.Fc(t.notifications.hasUnread()?"notifications_active":"notifications"),d.Mb(1),d.tc("routerLink",d.uc(28,$)),d.Mb(2),d.tc("indeterminate",!0)("closed",!t.isLoading),d.Mb(4),d.tc("open",t.openNotifications)}},directives:[v.q,v.s,v.v,v.r,v.D,v.B,c.e,v.F,v.G,v.C,v.cb,v.eb,v.fb,v.db,v.gb,D,v.bb,v.A,v.u,v.t,H],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}[mdcTopAppBar][_ngcontent-%COMP%]{position:fixed!important}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]{height:60px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]{display:flex;padding:0 10px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}[mdcDrawerHeader][_ngcontent-%COMP%], [mdcDrawerToolbarSpacer][_ngcontent-%COMP%]{background-color:#6200ee;background-color:var(--mdc-theme-primary,#6200ee);color:#fff;color:var(--mdc-theme-on-primary,#fff);height:60px}[mdcDrawerContainer].right[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{left:auto;right:0;transform:translateX(calc(100% + 20px))}[mdcDrawerContainer].right.mdc-drawer--open[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{transform:none}.content[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;flex-grow:1;height:100%;box-sizing:border-box}[mdcLinearProgress].mdc-linear-progress--closed[_ngcontent-%COMP%]{display:none}[mdcLinearProgress][_ngcontent-%COMP%]   .mdc-linear-progress__bar-inner[_ngcontent-%COMP%]{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.red-color[_ngcontent-%COMP%]{color:#e25555}"]}),G);function J(e,t){if(1&e){var n=d.ec();d.dc(0,"li",4),d.dc(1,"span",5),d.Ec(2),d.cc(),d.dc(3,"a",6),d.lc("click",(function(e){d.yc(n);var i=t.$implicit;return d.nc(2).onClick(e,i.url)})),d.Ec(4),d.cc(),d.cc()}if(2&e){var i=t.$implicit,c=d.nc(2);d.Mb(1),d.tc("ngClass",c.langColors[i.lang.toLowerCase()]||""),d.Mb(1),d.Fc(i.lang),d.Mb(1),d.tc("href",i.url,d.zc),d.Mb(1),d.Fc(i.url)}}function Z(e,t){if(1&e&&(d.dc(0,"ul",2),d.Cc(1,J,5,4,"li",3),d.cc()),2&e){var n=d.nc();d.Mb(1),d.tc("ngForOf",n.links)}}function ee(e,t){1&e&&(d.dc(0,"div",7),d.Ec(1,"No available links."),d.cc())}var te,ne,ie=((te=function(){function e(t,n){_classCallCheck(this,e),this.settings=t,this.browser=n,this.links=[],this.linkClick=new d.q,this.langColors={vostfr:"blue",vostar:"yellow",vosten:"dark",vf:"green"}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(e,t){this.linkClick.emit(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(t,!this.settings.openLinksInInactiveTabs))}}]),e}()).\u0275fac=function(e){return new(e||te)(d.Xb(g.a),d.Xb(h.a))},te.\u0275cmp=d.Rb({type:te,selectors:[["episode-link-list"]],inputs:{links:"links"},outputs:{linkClick:"linkClick"},decls:3,vars:2,consts:[["mdcList","",4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcList",""],["mdcListItem","",4,"ngFor","ngForOf"],["mdcListItem",""],[1,"badge",3,"ngClass"],["target","_blank",1,"link",3,"href","click"],[1,"empty-text"]],template:function(e,t){if(1&e&&(d.Cc(0,Z,2,1,"ul",0),d.Cc(1,ee,2,0,"ng-template",null,1,d.Dc)),2&e){var n=d.xc(2);d.tc("ngIf",null==t.links?null:t.links.length)("ngIfElse",n)}},directives:[i.k,v.B,i.j,v.F,i.i],styles:["[mdcList][_ngcontent-%COMP%]{padding:12px 0}.badge[_ngcontent-%COMP%]{padding:2px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase;background:#6c757d;margin-right:10px;border-radius:2px;min-width:90px;text-align:center}.badge.blue[_ngcontent-%COMP%]{background:#0061aa}.badge.dark[_ngcontent-%COMP%]{background:#34393f}.badge.pink[_ngcontent-%COMP%]{background:#b83280}.badge.green[_ngcontent-%COMP%]{background:#38a169}.badge.red[_ngcontent-%COMP%]{background:#c53030}.badge.purple[_ngcontent-%COMP%]{background:#6b46c1}.badge.orange[_ngcontent-%COMP%]{background:#c05621}.badge.yellow[_ngcontent-%COMP%]{background:#fec107;color:#1b0e00}.link[_ngcontent-%COMP%]{font-size:15px;font-weight:500;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}"]}),te),ce=["dialog"],oe=((ne=function(){function e(){_classCallCheck(this,e),this.title="Choose a link",this.links=[],this.linkClick=new d.q,this.close=new d.q}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){this.dialog.open()}},{key:"onClose",value:function(){this.close.emit()}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=d.Rb({type:ne,selectors:[["episode-choose-link-dialog"]],viewQuery:function(e,t){var n;1&e&&d.Ic(ce,!0),2&e&&d.wc(n=d.mc())&&(t.dialog=n.first)},inputs:{title:"title",links:"links"},outputs:{linkClick:"linkClick",close:"close"},decls:12,vars:3,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[3,"links","linkClick"],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""]],template:function(e,t){1&e&&(d.dc(0,"aside",0,1),d.lc("cancel",(function(){return t.onClose()})),d.dc(2,"div",2),d.dc(3,"header",3),d.dc(4,"h2",4),d.Ec(5),d.cc(),d.cc(),d.dc(6,"section",5),d.dc(7,"episode-link-list",6),d.lc("linkClick",(function(){return t.linkClick.emit()})),d.cc(),d.cc(),d.dc(8,"footer",7),d.dc(9,"button",8),d.Ec(10,"Close"),d.cc(),d.cc(),d.cc(),d.Yb(11,"div",9),d.cc()),2&e&&(d.Mb(5),d.Hc("",t.title," ",(null==t.links?null:t.links.length)>1?"("+t.links.length+")":"",""),d.Mb(2),d.tc("links",t.links))},directives:[v.l,v.x,v.p,v.n,v.o,v.j,ie,v.m,v.b,v.k,v.i],styles:[""]}),ne),ae=["dialog"];function re(e,t){1&e&&(d.dc(0,"span",23),d.Ec(1,"visibility"),d.cc())}function se(e,t){if(1&e){var n=d.ec();d.dc(0,"a",21),d.lc("activate",(function(){d.yc(n);var e=t.index;return d.nc(2).activeIndex=e})),d.Ec(1),d.Cc(2,re,2,0,"span",22),d.cc()}if(2&e){var i=t.$implicit,c=t.index,o=d.nc(2);d.Ob("mdc-ripple-upgraded--background-focused",o.activeIndex===c),d.tc("active",o.activeIndex===c),d.Mb(1),d.Gc(" ",i.number," "),d.Mb(1),d.tc("ngIf",i.isViewed)}}function le(e,t){if(1&e){var n=d.ec();d.bc(0),d.dc(1,"div",11),d.dc(2,"div",12),d.dc(3,"a",13),d.Ec(4," navigate_before "),d.cc(),d.cc(),d.dc(5,"div",14),d.dc(6,"nav",15),d.Cc(7,se,3,5,"a",16),d.cc(),d.cc(),d.dc(8,"div",17),d.dc(9,"a",18),d.Ec(10," navigate_next "),d.cc(),d.cc(),d.cc(),d.dc(11,"div",19),d.dc(12,"episode-link-list",20),d.lc("linkClick",(function(){d.yc(n);var e=d.nc();return e.linkClick.emit(e.episodes[e.activeIndex])})),d.cc(),d.cc(),d.ac()}if(2&e){var i=d.nc();d.Mb(7),d.tc("ngForOf",i.episodes),d.Mb(5),d.tc("links",i.episodes[i.activeIndex][i.linksKey])}}function de(e,t){1&e&&(d.dc(0,"div",24),d.Ec(1,"No available links."),d.cc())}var ue,pe,fe,ge=function(){var e=function(){function e(){_classCallCheck(this,e),this.title="Choose a link",this.episodes=[],this.linksKey="streamLinks",this.linkClick=new d.q,this.close=new d.q,this.activeIndex=0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){this.dialog.open()}},{key:"onClose",value:function(){this.activeIndex=0,this.close.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Rb({type:e,selectors:[["episode-range-choose-link-dialog"]],viewQuery:function(e,t){var n;1&e&&d.Ic(ae,!0),2&e&&d.wc(n=d.mc())&&(t.dialog=n.first)},inputs:{title:"title",episodes:"episodes",linksKey:"linksKey"},outputs:{linkClick:"linkClick",close:"close"},decls:14,vars:4,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"active","mdc-ripple-upgraded--background-focused","activate",4,"ngFor","ngForOf"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],[1,"tab-content"],[3,"links","linkClick"],["mdcTab","","tabindex","0",3,"active","activate"],["class","material-icons-outlined viewed-icon","title","Viewed",4,"ngIf"],["title","Viewed",1,"material-icons-outlined","viewed-icon"],[1,"empty-text"]],template:function(e,t){if(1&e&&(d.dc(0,"aside",0,1),d.lc("cancel",(function(){return t.onClose()})),d.dc(2,"div",2),d.dc(3,"header",3),d.dc(4,"h2",4),d.Ec(5),d.cc(),d.cc(),d.dc(6,"section",5),d.Cc(7,le,13,2,"ng-container",6),d.Cc(8,de,2,0,"ng-template",null,7,d.Dc),d.cc(),d.dc(10,"footer",8),d.dc(11,"button",9),d.Ec(12,"Close"),d.cc(),d.cc(),d.cc(),d.Yb(13,"div",10),d.cc()),2&e){var n=d.xc(9);d.Mb(5),d.Hc(" ",t.title," ",null!=t.episodes&&t.episodes.length&&(null==t.episodes[t.activeIndex][t.linksKey]?null:t.episodes[t.activeIndex][t.linksKey].length)>1?"("+t.episodes[t.activeIndex][t.linksKey].length+")":""," "),d.Mb(2),d.tc("ngIf",null==t.episodes?null:t.episodes.length)("ngIfElse",n)}},directives:[v.l,v.x,v.p,v.n,v.o,v.j,i.k,v.m,v.b,v.k,v.i,v.T,v.S,v.W,v.V,v.R,i.j,v.U,ie,v.X],styles:["[mdcDialogBody][_ngcontent-%COMP%]{position:relative}[mdcTabBarScroller][_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;left:0;background-color:#fff;z-index:1}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}.viewed-icon[_ngcontent-%COMP%]{color:#0275d8;vertical-align:middle;font-size:1.6em;margin-left:8px}"]}),e}(),he=((ue=function(){function e(t){_classCallCheck(this,e),this.element=t,this.on=!1,this.titleOn="",this.titleOff="",this.classOn="",this.classOff="",this.onChange=new d.q}return _createClass(e,[{key:"ngOnInit",value:function(){this.update()}},{key:"ngOnChanges",value:function(e){e.on.isFirstChange()||this.update()}},{key:"update",value:function(){var e,t,n,i;this.on?(this.element.nativeElement.innerHTML=this.iconOn,this.element.nativeElement.title=this.titleOn,(null===(e=this.classOff)||void 0===e?void 0:e.length)&&this.removeClass(this.classOff),(null===(t=this.classOn)||void 0===t?void 0:t.length)&&this.addClass(this.classOn)):(this.element.nativeElement.innerHTML=this.iconOff,this.element.nativeElement.title=this.titleOff,(null===(n=this.classOn)||void 0===n?void 0:n.length)&&this.removeClass(this.classOn),(null===(i=this.classOff)||void 0===i?void 0:i.length)&&this.addClass(this.classOff))}},{key:"addClass",value:function(e){this.element.nativeElement.classList.add(e.split(" "))}},{key:"removeClass",value:function(e){this.element.nativeElement.classList.remove(e.split(" "))}},{key:"onClick",value:function(e){this.on=!this.on,this.onChange.emit(this.on)}}]),e}()).\u0275fac=function(e){return new(e||ue)(d.Xb(d.o))},ue.\u0275dir=d.Sb({type:ue,selectors:[["","iconToggle",""]],hostBindings:function(e,t){1&e&&d.lc("click",(function(e){return t.onClick(e)}))},inputs:{iconOn:"iconOn",iconOff:"iconOff",on:"on",titleOn:"titleOn",titleOff:"titleOff",classOn:"classOn",classOff:"classOff"},outputs:{onChange:"onChange"},features:[d.Kb]}),ue),me=n("jhN1"),be=((fe=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t}return _createClass(e,[{key:"transform",value:function(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("SafePipe unable to bypass security for invalid type: "+t)}}}]),e}()).\u0275fac=function(e){return new(e||fe)(d.Xb(me.b))},fe.\u0275pipe=d.Wb({name:"safe",type:fe,pure:!0}),fe),ve=((pe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){switch(t){case"format":return'url("'.concat(e,'")');case"encode":return encodeURI(e);case"decode":return decodeURI(e);case"encodeAndFormat":return this.transform(this.transform(e,"encode"),"format");case"decodeAndFormat":return this.transform(this.transform(e,"decode"),"format");default:throw new Error("UrlPipe unable to transform url for invalid action: "+t)}}}]),e}()).\u0275fac=function(e){return new(e||pe)},pe.\u0275pipe=d.Wb({name:"url",type:pe,pure:!0}),pe);function Ce(e,t){1&e&&(d.bc(0),d.dc(1,"i",16),d.Ec(2,"movie"),d.cc(),d.ac())}function ke(e,t){1&e&&(d.dc(0,"div",17),d.dc(1,"span"),d.Ec(2,"New"),d.cc(),d.cc())}function ye(e,t){1&e&&(d.dc(0,"div",18),d.dc(1,"span"),d.Ec(2,"End"),d.cc(),d.cc())}function _e(e,t){if(1&e){var n=d.ec();d.dc(0,"div",19,20),d.dc(2,"button",21),d.lc("click",(function(){return d.yc(n),d.xc(5).open=!0})),d.Ec(3,"visibility"),d.cc(),d.dc(4,"div",22,23),d.lc("openChange",(function(e){return d.yc(n),d.xc(5).open=e})),d.dc(6,"ul",24),d.dc(7,"li",25),d.lc("click",(function(){return d.yc(n),d.nc().markAsUnviewed()})),d.Ec(8,"Mark as unviewed"),d.cc(),d.cc(),d.cc(),d.cc()}if(2&e){var i=d.xc(1),c=d.xc(5);d.nc();var o=d.xc(15);d.Bc("display","flex"),d.Mb(2),d.Bc("margin",0),d.Mb(2),d.tc("open",c.open)("menuAnchor",i)("viewport",o)}}function we(e,t){if(1&e&&(d.dc(0,"a",27),d.oc(1,"safe"),d.Ec(2," check_circle_outline "),d.cc()),2&e){var n=d.nc(2);d.tc("href",d.qc(1,1,n.viewedEpisodes.getEpisodeUrl(n.episode),"resourceUrl"),d.zc)}}function Oe(e,t){if(1&e&&d.Cc(0,we,3,4,"a",26),2&e){var n=d.nc();d.tc("ngIf",n.episode.isRegular)}}var Me,xe=((Me=function(){function e(t,n,i,c){_classCallCheck(this,e),this.settings=t,this.browser=n,this.favoriteAnimes=i,this.viewedEpisodes=c,this.streamLinksClick=new d.q,this.downloadLinksClick=new d.q}return _createClass(e,[{key:"ngOnInit",value:function(){this.episode.isViewed=this.viewedEpisodes.isViewed(this.episode),this.episode.isRegular=this.viewedEpisodes.isRegular(this.episode)}},{key:"onClick",value:function(e){if(this.episode.streamLinks.length>1)return e.preventDefault(),this.showStreamLinks(),!1;this.markAsViewed(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(this.episode.streamLinks[0].url,!this.settings.openLinksInInactiveTabs))}},{key:"showStreamLinks",value:function(){this.streamLinksClick.emit(this.episode)}},{key:"showDownloadLinks",value:function(){this.downloadLinksClick.emit(this.episode)}},{key:"toggleFavorite",value:function(e){e?this.favoriteAnimes.add(this.episode.anime.title):this.favoriteAnimes.remove(this.episode.anime.title)}},{key:"isFavorite",value:function(){return this.favoriteAnimes.isFavorite(this.episode.anime.title)}},{key:"markAsViewed",value:function(){this.episode.isViewed=!0,this.viewedEpisodes.add(this.episode)}},{key:"markAsUnviewed",value:function(){this.episode.isViewed=!1,this.viewedEpisodes.remove(this.episode)}}]),e}()).\u0275fac=function(e){return new(e||Me)(d.Xb(g.a),d.Xb(h.a),d.Xb(p.a),d.Xb(f.a))},Me.\u0275cmp=d.Rb({type:Me,selectors:[["episode-card"]],inputs:{episode:"episode"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:24,vars:19,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","target","_blank",3,"href","click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],["class","card-badge new",4,"ngIf"],["class","card-badge end",4,"ngIf"],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["mdcMenuAnchor","",3,"display",4,"ngIf","ngIfElse"],["isRegularTemplate",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],[1,"card-badge","end"],["mdcMenuAnchor",""],["anchor","mdcMenuAnchor"],["title","Viewed",1,"material-icons-outlined","mdc-icon-button","wider","blue-eye",3,"click"],["mdcMenu","",3,"open","menuAnchor","viewport","openChange"],["isViewedMenu",""],["mdcList",""],["mdcListItem","",3,"click"],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,t){if(1&e&&(d.dc(0,"div",0),d.dc(1,"a",1),d.lc("click",(function(e){return t.onClick(e)})),d.dc(2,"div",2),d.oc(3,"safe"),d.oc(4,"url"),d.dc(5,"div",3),d.dc(6,"h2",4),d.Cc(7,Ce,3,0,"ng-container",5),d.Ec(8),d.cc(),d.dc(9,"div",6),d.dc(10,"span"),d.Ec(11),d.cc(),d.cc(),d.Cc(12,ke,3,0,"div",7),d.Cc(13,ye,3,0,"div",8),d.cc(),d.cc(),d.cc(),d.dc(14,"div",9,10),d.Cc(16,_e,9,7,"div",11),d.Cc(17,Oe,1,1,"ng-template",null,12,d.Dc),d.dc(19,"button",13),d.lc("onChange",(function(e){return t.toggleFavorite(e)})),d.cc(),d.dc(20,"button",14),d.lc("click",(function(){return t.showStreamLinks()})),d.Ec(21,"play_circle_outline"),d.cc(),d.dc(22,"button",15),d.lc("click",(function(){return t.showDownloadLinks()})),d.Ec(23,"save_alt"),d.cc(),d.cc(),d.cc()),2&e){var n=d.xc(18);d.Mb(1),d.tc("href",t.episode.streamLinks[0].url,d.zc),d.Mb(1),d.Bc("background-image",d.qc(3,13,d.qc(4,16,t.episode.anime.cover,"encodeAndFormat"),"style"),d.Qb),d.Nb("data-cover",t.episode.anime.cover),d.Mb(4),d.tc("title",t.episode.anime.title),d.Mb(1),d.tc("ngIf",t.episode.anime.isMovie),d.Mb(1),d.Gc(" ",t.episode.anime.title," "),d.Mb(3),d.Fc(t.episode.number),d.Mb(1),d.tc("ngIf",t.episode.anime.isNew),d.Mb(1),d.tc("ngIf",t.episode.anime.isFinished),d.Mb(3),d.tc("ngIf",t.episode.isViewed)("ngIfElse",n),d.Mb(3),d.tc("on",t.isFavorite())}},directives:[v.c,v.f,v.e,v.d,i.k,he,v.K,v.L,v.B,v.F],pipes:[be,ve],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(/assets/icons/loading.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),Me);function Pe(e,t){1&e&&(d.bc(0),d.dc(1,"i",15),d.Ec(2,"movie"),d.cc(),d.ac())}function Le(e,t){1&e&&(d.bc(0),d.dc(1,"div",16),d.dc(2,"span"),d.Ec(3,"New"),d.cc(),d.cc(),d.ac())}function Ee(e,t){1&e&&(d.dc(0,"div",18),d.dc(1,"span"),d.Ec(2,"End"),d.cc(),d.cc())}function Ie(e,t){if(1&e&&d.Cc(0,Ee,3,0,"div",17),2&e){var n=d.nc();d.tc("ngIf",n.episodeRange.last.anime.isFinished)}}function De(e,t){if(1&e&&(d.dc(0,"a",19),d.oc(1,"safe"),d.Ec(2," check_circle_outline "),d.cc()),2&e){var n=d.nc();d.tc("href",d.qc(1,1,n.viewedEpisodes.getEpisodeUrl(n.episodeRange.first),"resourceUrl"),d.zc)}}var Te,Se=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.favoriteAnimes=t,this.viewedEpisodes=n,this.streamLinksClick=new d.q,this.downloadLinksClick=new d.q}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.episodeRange.range=this.episodeRange.range.map((function(t){return Object.assign(Object.assign({},t),{isViewed:e.viewedEpisodes.isViewed(t)})})),this.episodeRange.first.isRegular=this.viewedEpisodes.isRegular(this.episodeRange.first)}},{key:"onClick",value:function(e){return e.preventDefault(),this.showStreamLinks(),!1}},{key:"showStreamLinks",value:function(){this.streamLinksClick.emit(this.episodeRange)}},{key:"showDownloadLinks",value:function(){this.downloadLinksClick.emit(this.episodeRange)}},{key:"toggleFavorite",value:function(e){e?this.favoriteAnimes.add(this.episodeRange.first.anime.title):this.favoriteAnimes.remove(this.episodeRange.first.anime.title)}},{key:"isFavorite",value:function(){return this.favoriteAnimes.isFavorite(this.episodeRange.first.anime.title)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Xb(p.a),d.Xb(f.a))},e.\u0275cmp=d.Rb({type:e,selectors:[["episode-range-card"]],inputs:{episodeRange:"episodeRange"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:23,vars:18,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","href","javascript:void(0)",3,"click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],[4,"ngIf","ngIfElse"],["endBadge",""],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],["class","card-badge end",4,"ngIf"],[1,"card-badge","end"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,t){if(1&e&&(d.dc(0,"div",0),d.dc(1,"a",1),d.lc("click",(function(e){return t.onClick(e)})),d.dc(2,"div",2),d.oc(3,"safe"),d.oc(4,"url"),d.dc(5,"div",3),d.dc(6,"h2",4),d.Cc(7,Pe,3,0,"ng-container",5),d.Ec(8),d.cc(),d.dc(9,"div",6),d.dc(10,"span"),d.Ec(11),d.cc(),d.cc(),d.Cc(12,Le,4,0,"ng-container",7),d.Cc(13,Ie,1,1,"ng-template",null,8,d.Dc),d.cc(),d.cc(),d.cc(),d.dc(15,"div",9,10),d.Cc(17,De,3,4,"a",11),d.dc(18,"button",12),d.lc("onChange",(function(e){return t.toggleFavorite(e)})),d.cc(),d.dc(19,"button",13),d.lc("click",(function(){return t.showStreamLinks()})),d.Ec(20,"play_circle_outline"),d.cc(),d.dc(21,"button",14),d.lc("click",(function(){return t.showDownloadLinks()})),d.Ec(22,"save_alt"),d.cc(),d.cc(),d.cc()),2&e){var n=d.xc(14);d.Mb(2),d.Bc("background-image",d.qc(3,12,d.qc(4,15,t.episodeRange.first.anime.cover,"encodeAndFormat"),"style"),d.Qb),d.Nb("data-cover",t.episodeRange.first.anime.cover),d.Mb(4),d.tc("title",t.episodeRange.first.anime.title),d.Mb(1),d.tc("ngIf",t.episodeRange.first.anime.isMovie),d.Mb(1),d.Gc(" ",t.episodeRange.first.anime.title," "),d.Mb(3),d.Hc("",t.episodeRange.first.number," - ",t.episodeRange.last.number,""),d.Mb(1),d.tc("ngIf",t.episodeRange.first.anime.isNew)("ngIfElse",n),d.Mb(5),d.tc("ngIf",t.episodeRange.first.isRegular),d.Mb(1),d.tc("on",t.isFavorite())}},directives:[v.c,v.f,v.e,v.d,i.k,he],pipes:[be,ve],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(/assets/icons/loading.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),e}(),Ae=((Te=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"en")}return _createClass(n,[{key:"transform",value:function(e,t,i,c){switch(Object(a.b)(new Date(e))){case Object(a.h)():return"Today";case Object(a.i)():return"Yesterday";default:return _get(_getPrototypeOf(n.prototype),"transform",this).call(this,e,t||"EEEE, dd MMMM yyyy",i,c)}}}]),n}(i.d)).\u0275fac=function(e){return new(e||Te)},Te.\u0275pipe=d.Wb({name:"shortdate",type:Te,pure:!0}),Te),Re=["episodeStreamLinksDialog"],Fe=["episodeDownloadLinksDialog"],Ve=["episodeRangeStreamLinksDialog"],Be=["episodeRangeDownloadLinksDialog"],je=function(e){return{$implicit:e}};function ze(e,t){if(1&e&&d.Zb(0,19),2&e){var n=t.$implicit;d.nc(4);var i=d.xc(7),c=d.xc(5);d.tc("ngTemplateOutlet",n.range?i:c)("ngTemplateOutletContext",d.vc(2,je,n))}}function Xe(e,t){if(1&e&&(d.bc(0),d.dc(1,"h3",15),d.Ec(2),d.oc(3,"shortdate"),d.cc(),d.Yb(4,"div",16),d.dc(5,"section",17),d.Cc(6,ze,1,4,"ng-container",18),d.cc(),d.ac()),2&e){var n=d.nc().$implicit,i=d.nc(2);d.Mb(2),d.Fc(d.pc(3,2,n)),d.Mb(4),d.tc("ngForOf",i.episodesByDays[n])}}function Ne(e,t){if(1&e&&(d.bc(0),d.Cc(1,Xe,7,4,"ng-container",14),d.ac()),2&e){var n=t.$implicit,i=d.nc(2);d.Mb(1),d.tc("ngIf",null==i.episodesByDays[n]?null:i.episodesByDays[n].length)}}function qe(e,t){if(1&e&&(d.bc(0),d.Cc(1,Ne,2,1,"ng-container",13),d.ac()),2&e){var n=d.nc();d.Mb(1),d.tc("ngForOf",n.days)}}function Ge(e,t){if(1&e&&d.Zb(0,19),2&e){var n=t.$implicit;d.nc(2);var i=d.xc(7),c=d.xc(5);d.tc("ngTemplateOutlet",n.range?i:c)("ngTemplateOutletContext",d.vc(2,je,n))}}function He(e,t){if(1&e&&(d.dc(0,"section",17),d.Cc(1,Ge,1,4,"ng-container",18),d.cc()),2&e){var n=d.nc();d.Mb(1),d.tc("ngForOf",n.episodes)}}function Ue(e,t){if(1&e){var n=d.ec();d.dc(0,"episode-card",20),d.lc("streamLinksClick",(function(e){return d.yc(n),d.nc().openStreamLinksDialog(e)}))("downloadLinksClick",(function(e){return d.yc(n),d.nc().openDownloadLinksDialog(e)})),d.cc()}2&e&&d.tc("episode",t.$implicit)}function Ke(e,t){if(1&e){var n=d.ec();d.dc(0,"episode-range-card",21),d.lc("streamLinksClick",(function(e){return d.yc(n),d.nc().openStreamLinksDialog(e)}))("downloadLinksClick",(function(e){return d.yc(n),d.nc().openDownloadLinksDialog(e)})),d.cc()}2&e&&d.tc("episodeRange",t.$implicit)}function We(e,t){if(1&e){var n=d.ec();d.dc(0,"button",22),d.lc("click",(function(){return d.yc(n),d.nc().refresh()})),d.dc(1,"i",23),d.Ec(2,"refresh"),d.cc(),d.cc()}}var $e,Ye=function(){return[]},Qe=(($e=function(){function e(t,n,i,c,o,a,s){_classCallCheck(this,e),this.animeProvider=t,this.favoriteAnimes=n,this.viewedEpisodes=i,this.settings=c,this.browser=o,this.debug=a,this.route=s,this.isLoading=!0,this.searchValue=null,this.episodes=[],this.days=[],this.episodesByDays=[],this.allEpisodes=[],this.selectedEpisode=null,this.selectedEpisodeRange=null,this.componentDestroy=new r.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.browser.isWebExtension&&this.browser.setBadgeText(""),this.route.queryParams.pipe(Object(l.a)(this.componentDestroy)).subscribe((function(t){e.view=t.view||e.settings.defaultView,e.debug.log("Current view:",e.view),e.allEpisodes.length>0?e.filterEpisodes(e.allEpisodes,e.days):e.fetchEpisodes()}))}},{key:"ngOnDestroy",value:function(){this.componentDestroy.next(),this.componentDestroy.complete()}},{key:"fetchEpisodes",value:function(e){var t=this;this.isLoading=!0,this.animeProvider.getLatestEpisodesByDays(e).pipe(Object(l.a)(this.componentDestroy)).subscribe((function(e){var n=_slicedToArray(e,2),i=n[0],c=n[1];t.allEpisodes=i,t.filterEpisodes(i,c),t.days=c}),(function(e){console.error(e.message)}),(function(){t.isLoading=!1}))}},{key:"filterEpisodes",value:function(e,t){var n,i,c=this;if(this.episodes=this.view===s.b.Favorites?e.filter((function(e){return c.favoriteAnimes.isFavorite(e.anime.title)})):e,(null===(n=this.searchValue)||void 0===n?void 0:n.length)&&(this.episodes=this.episodes.filter((function(e){return-1!==e.anime.title.toLowerCase().indexOf(c.searchValue.toLowerCase())}))),this.settings.mergeCommonEpisodes){var r,l=[],d={},u=0,p=_createForOfIteratorHelper(this.episodes);try{var f=function(){var e=r.value;if(d[e.anime.title]&&-1!==d[e.anime.title].indexOf(e.number))return"continue";var t=c.episodes.slice(u).filter((function(t){return t.anime.title===e.anime.title&&(!c.settings.displayEpisodesDayByDay||Object(a.g)(t.releaseDate,e.releaseDate))})).sort((function(e,t){return e.number-t.number}));if(t.length>1){var n=new o(t,e.releaseDate);l.push(n),d[e.anime.title]=[].concat(_toConsumableArray(d[e.anime.title]||[]),_toConsumableArray(t.map((function(e){return e.number})))),(null===(i=c.selectedEpisodeRange)||void 0===i?void 0:i.first.anime.title)===n.first.anime.title&&(c.selectedEpisodeRange=n)}else l.push(e);u++};for(p.s();!(r=p.n()).done;)f()}catch(g){p.e(g)}finally{p.f()}this.episodes=l}this.settings.displayEpisodesDayByDay&&t.forEach((function(e){if(e){var t=Object(a.b)(new Date(e));c.episodesByDays[e]=c.episodes.filter((function(e){return!!e.releaseDate&&t===Object(a.b)(new Date(e.releaseDate))}))}}))}},{key:"openStreamLinksDialog",value:function(e){e instanceof o?(this.selectedEpisodeRange=e,this.episodeRangeStreamLinksDialog.open()):(this.selectedEpisode=e,this.episodeStreamLinksDialog.open())}},{key:"openDownloadLinksDialog",value:function(e){e instanceof o?(this.selectedEpisodeRange=e,this.episodeRangeDownloadLinksDialog.open()):(this.selectedEpisode=e,this.episodeDownloadLinksDialog.open())}},{key:"markEpisodeAsViewed",value:function(e){e.isViewed=!0,this.viewedEpisodes.add(e)}},{key:"search",value:function(e){this.debug.log("Searching for:",e),this.filterEpisodes(this.allEpisodes,this.days),this.isLoading=!1}},{key:"refresh",value:function(){this.episodes=[],this.episodesByDays=[],this.fetchEpisodes(!0)}}]),e}()).\u0275fac=function(e){return new(e||$e)(d.Xb(u.a),d.Xb(p.a),d.Xb(f.a),d.Xb(g.a),d.Xb(h.a),d.Xb(m.a),d.Xb(c.a))},$e.\u0275cmp=d.Rb({type:$e,selectors:[["app-main"]],viewQuery:function(e,t){var n;1&e&&(d.Ic(Re,!0),d.Ic(Fe,!0),d.Ic(Ve,!0),d.Ic(Be,!0)),2&e&&(d.wc(n=d.mc())&&(t.episodeStreamLinksDialog=n.first),d.wc(n=d.mc())&&(t.episodeDownloadLinksDialog=n.first),d.wc(n=d.mc())&&(t.episodeRangeStreamLinksDialog=n.first),d.wc(n=d.mc())&&(t.episodeRangeDownloadLinksDialog=n.first))},decls:17,vars:18,consts:[[3,"view","isLoading","searchValue","isLoadingChange","searchValueChange"],[4,"ngIf","ngIfElse"],["showAllTemplate",""],["episodeCard",""],["episodeRangeCard",""],[3,"title","links","linkClick","close"],["episodeStreamLinksDialog",""],["episodeDownloadLinksDialog",""],["linksKey","streamLinks",3,"title","episodes","linkClick","close"],["episodeRangeStreamLinksDialog",""],["linksKey","downloadLinks",3,"title","episodes","linkClick","close"],["episodeRangeDownloadLinksDialog",""],["mdcButton","","raised","","class","refresh-button","title","Refresh",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"day-title"],[1,"day-divider"],[1,"custom-card-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"episode","streamLinksClick","downloadLinksClick"],[3,"episodeRange","streamLinksClick","downloadLinksClick"],["mdcButton","","raised","","title","Refresh",1,"refresh-button",3,"click"],["mdcButtonIcon","",1,"material-icons"]],template:function(e,t){if(1&e&&(d.dc(0,"app-layout",0),d.lc("isLoadingChange",(function(e){return t.isLoading=e}))("searchValueChange",(function(e){return t.searchValue=e}))("searchValueChange",(function(e){return t.search(e)})),d.Cc(1,qe,2,1,"ng-container",1),d.Cc(2,He,2,1,"ng-template",null,2,d.Dc),d.Cc(4,Ue,1,1,"ng-template",null,3,d.Dc),d.Cc(6,Ke,1,1,"ng-template",null,4,d.Dc),d.dc(8,"episode-choose-link-dialog",5,6),d.lc("linkClick",(function(){return t.markEpisodeAsViewed(t.selectedEpisode)}))("close",(function(){return t.selectedEpisode=null})),d.cc(),d.dc(10,"episode-choose-link-dialog",5,7),d.lc("linkClick",(function(){return t.markEpisodeAsViewed(t.selectedEpisode)}))("close",(function(){return t.selectedEpisode=null})),d.cc(),d.dc(12,"episode-range-choose-link-dialog",8,9),d.lc("linkClick",(function(e){return t.markEpisodeAsViewed(e)}))("close",(function(){return t.selectedEpisodeRange=null})),d.cc(),d.dc(14,"episode-range-choose-link-dialog",10,11),d.lc("linkClick",(function(e){return t.markEpisodeAsViewed(e)}))("close",(function(){return t.selectedEpisodeRange=null})),d.cc(),d.cc(),d.Cc(16,We,3,0,"button",12)),2&e){var n=d.xc(3);d.tc("view",t.view)("isLoading",t.isLoading)("searchValue",t.searchValue),d.Mb(1),d.tc("ngIf",t.settings.displayEpisodesDayByDay)("ngIfElse",n),d.Mb(7),d.tc("title","Choose a stream link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.streamLinks)||d.uc(14,Ye)),d.Mb(2),d.tc("title","Choose a download link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.downloadLinks)||d.uc(15,Ye)),d.Mb(2),d.tc("title","Choose a stream link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||d.uc(16,Ye)),d.Mb(2),d.tc("title","Choose a download link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||d.uc(17,Ye)),d.Mb(2),d.tc("ngIf",!t.isLoading)}},directives:[Q,i.k,oe,ge,i.j,i.o,xe,Se,v.b],pipes:[Ae],styles:[".custom-card-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-flow:row wrap;padding-top:24px;padding-left:16px;padding-right:16px}.custom-card-container[_ngcontent-%COMP%]:empty{display:none}.day-title[_ngcontent-%COMP%]{margin:0 0 5px 28px;font-size:18px;font-weight:400}.day-title[_ngcontent-%COMP%]:first-of-type{margin-top:20px}.day-divider[_ngcontent-%COMP%]{margin:0 0 0 28px;width:calc(100% - 56px);border-bottom:1px solid rgba(0,0,0,.12);height:0}.refresh-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;padding:0;border-radius:50%;min-height:45px;min-width:45px;transition:all .3s ease-in-out}.refresh-button[_ngcontent-%COMP%]:hover{scale:1.1}"]}),$e),Je=n("mrSG"),Ze=n("Qw5O"),et=n("dlKe");function tt(e,t){if(1&e&&(d.dc(0,"option",24),d.Ec(1),d.cc()),2&e){var n=t.$implicit;d.tc("value",n.number),d.Mb(1),d.Gc(" ",n.number," ")}}function nt(e,t){if(1&e){var n=d.ec();d.bc(0),d.dc(1,"li",14),d.dc(2,"span",15),d.dc(3,"button",16),d.lc("onChange",(function(e){d.yc(n);var i=t.$implicit;return d.nc().toggleFavorite(i,e)})),d.cc(),d.cc(),d.dc(4,"span",17),d.Ec(5),d.cc(),d.dc(6,"span",18),d.dc(7,"div",19),d.dc(8,"select",20),d.Cc(9,tt,2,2,"option",21),d.cc(),d.dc(10,"label",22),d.Ec(11,"Last viewed episodes"),d.cc(),d.cc(),d.cc(),d.cc(),d.Yb(12,"li",23),d.ac()}if(2&e){var i=t.$implicit;d.Mb(3),d.tc("on",i.isFavorite),d.Mb(2),d.Gc(" ",i.title," "),d.Mb(3),d.tc("ngModel",i.episodes[0].number),d.Mb(1),d.tc("ngForOf",i.episodes)}}var it,ct,ot,at,rt,st=((it=function(){function e(t,n,i,c){_classCallCheck(this,e),this.viewedEpisodes=t,this.favoriteAnimes=n,this.debug=i,this.route=c,this.isLoading=!1,this.searchValue=null,this.viewedAnimes=[],this.allViewedAnimes=[],this.tabs={All:"all",Favorites:"favorites"},this.activeTab=this.tabs.All,this.count={all:0,favorites:0},this.infiniteScroll={initial:50,max:50,step:50},this.componentDestroy=new r.a}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(Je.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.viewedEpisodes.getAsync();case 2:e.sent.forEach((function(e){var n=t.allViewedAnimes.findIndex((function(t){return Object(Ze.a)(t.title,e.animeTitle,.7)}));n>-1?t.allViewedAnimes[n].episodes.find((function(t){return t.number===e.number}))?t.debug.warn("Duplicate viewed episode found:",e):(t.allViewedAnimes[n].episodes.push(e),t.allViewedAnimes[n].episodes=t.allViewedAnimes[n].episodes.sort((function(e,t){return t.number-e.number}))):t.allViewedAnimes.push({title:e.animeTitle,episodes:[e],isFavorite:t.favoriteAnimes.isFavorite(e.animeTitle)})})),this.viewedAnimes=this.allViewedAnimes,this.count={all:this.allViewedAnimes.length,favorites:this.allViewedAnimes.filter((function(e){return e.isFavorite})).length},this.route.params.pipe(Object(l.a)(this.componentDestroy)).subscribe((function(e){t.searchValue=e.search||"",t.debug.log("Search value:",t.searchValue),t.searchValue.length&&t.search(t.searchValue)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.componentDestroy.next(),this.componentDestroy.complete()}},{key:"search",value:function(e){this.debug.log("Searching for:",e),this.filterAnimes(),this.isLoading=!1}},{key:"filterAnimes",value:function(){var e,t=this,n=[],i=(n=(null===(e=this.searchValue)||void 0===e?void 0:e.length)?this.allViewedAnimes.filter((function(e){return Object(Ze.a)(e.title,t.searchValue,.7)})):this.allViewedAnimes).filter((function(e){return e.isFavorite}));switch(this.count={all:n.length,favorites:i.length},this.activeTab){case this.tabs.Favorites:n=i}this.viewedAnimes=n,this.infiniteScroll.max=this.infiniteScroll.initial}},{key:"switchTab",value:function(e){this.activeTab=e,this.filterAnimes()}},{key:"toggleFavorite",value:function(e,t){t?(this.favoriteAnimes.add(e.title),e.isFavorite=!0):(this.favoriteAnimes.remove(e.title),e.isFavorite=!1)}},{key:"onScroll",value:function(){this.infiniteScroll.max+=this.infiniteScroll.step}}]),e}()).\u0275fac=function(e){return new(e||it)(d.Xb(f.a),d.Xb(p.a),d.Xb(m.a),d.Xb(c.a))},it.\u0275cmp=d.Rb({type:it,selectors:[["app-viewed"]],decls:19,vars:8,consts:[[3,"isLoading","searchValue","isLoadingChange","searchValueChange"],["mdcDialogBody",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"activate"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],["infiniteScroll","",1,"tab-content",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["mdcListGroup",""],["mdcList","",3,"nonInteractive"],[4,"ngFor","ngForOf"],["mdcListItem",""],["mdcListItemGraphic",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["mdcListItemText",""],["mdcListItemMeta",""],["mdcSelect","","outlined",""],["mdcSelectControl","",3,"ngModel"],["disabled","",3,"value",4,"ngFor","ngForOf"],["mdcFloatingLabel",""],["mdcListDivider",""],["disabled","",3,"value"]],template:function(e,t){1&e&&(d.dc(0,"app-layout",0),d.lc("isLoadingChange",(function(e){return t.isLoading=e}))("searchValueChange",(function(e){return t.searchValue=e}))("searchValueChange",(function(e){return t.search(e)})),d.dc(1,"section",1),d.dc(2,"div",2),d.dc(3,"div",3),d.dc(4,"a",4),d.Ec(5," navigate_before "),d.cc(),d.cc(),d.dc(6,"div",5),d.dc(7,"nav",6),d.dc(8,"a",7),d.lc("activate",(function(){return t.switchTab(t.tabs.All)})),d.Ec(9),d.cc(),d.dc(10,"a",7),d.lc("activate",(function(){return t.switchTab(t.tabs.Favorites)})),d.Ec(11),d.cc(),d.cc(),d.cc(),d.dc(12,"div",8),d.dc(13,"a",9),d.Ec(14," navigate_next "),d.cc(),d.cc(),d.cc(),d.dc(15,"div",10),d.lc("scrolled",(function(){return t.onScroll()})),d.dc(16,"div",11),d.dc(17,"ul",12),d.Cc(18,nt,13,4,"ng-container",13),d.cc(),d.cc(),d.cc(),d.cc(),d.cc()),2&e&&(d.tc("isLoading",t.isLoading)("searchValue",t.searchValue),d.Mb(9),d.Gc("All (",t.count.all,")"),d.Mb(2),d.Gc("Favorites (",t.count.favorites,")"),d.Mb(4),d.tc("infiniteScrollDistance",2)("infiniteScrollThrottle",50),d.Mb(2),d.tc("nonInteractive",!0),d.Mb(1),d.tc("ngForOf",t.viewedAnimes.slice(0,t.infiniteScroll.max)))},directives:[Q,v.j,v.T,v.S,v.W,v.V,v.R,v.X,v.U,et.a,v.D,v.B,i.j,v.F,v.G,he,v.J,v.H,v.N,v.M,P.j,P.f,P.g,v.w,v.C,P.h,P.k],styles:["[mdcDialogBody][_ngcontent-%COMP%]{padding:0}[mdcListItem][_ngcontent-%COMP%]{margin:0 10px}.tab-content[_ngcontent-%COMP%]{margin-top:20px}.red-heart[_ngcontent-%COMP%]{color:#e25555}[mdcSelect][_ngcontent-%COMP%]{min-width:200px}[mdcSelect][_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}[mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline__idle[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transition:none}"]}),it),lt=[{path:"",component:Qe},{path:"viewed",children:_toConsumableArray([":search",""].map((function(e){return{path:e,component:st}})))}],dt=((ct=function e(){_classCallCheck(this,e)}).\u0275mod=d.Vb({type:ct}),ct.\u0275inj=d.Ub({factory:function(e){return new(e||ct)},imports:[[c.f.forChild(lt)],c.f]}),ct),ut=n("FpXt"),pt=((rt=function e(){_classCallCheck(this,e)}).\u0275mod=d.Vb({type:rt}),rt.\u0275inj=d.Ub({factory:function(e){return new(e||rt)},imports:[[i.b,ut.a,c.f]]}),rt),ft=((at=function e(){_classCallCheck(this,e)}).\u0275mod=d.Vb({type:at}),at.\u0275inj=d.Ub({factory:function(e){return new(e||at)},imports:[[i.b,ut.a,pt,c.f]]}),at),gt=((ot=function e(){_classCallCheck(this,e)}).\u0275mod=d.Vb({type:ot}),ot.\u0275inj=d.Ub({factory:function(e){return new(e||ot)},imports:[[i.b,dt,ut.a,pt,ft]]}),ot)}}]);