"use strict";(self.webpackChunkanime_tracker=self.webpackChunkanime_tracker||[]).push([[491],{3491:(Tn,J,c)=>{c.r(J),c.d(J,{PopupModule:()=>wn});var d=c(9808),m=c(5056),y=c(5427),h=c(3470),L=c(7579),P=c(5491),A=c(2722),b=c(4056),e=c(1223),H=c(657),T=c(8604),M=c(1942),C=c(452),Z=c(4071),D=c(3631);var E=c(9744),r=c(6048),G=c(8505),K=c(1566),F=c(4482),N=c(5403),W=c(4671);function ee(i,s){return i===s}var u=c(3075);function ne(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"i",4),e.NdJ("mousedown",function(o){return o.preventDefault()})("click",function(){return e.CHM(n),e.oxw().clear()}),e._uU(1,"close"),e.qZA()}}let te=(()=>{class i{constructor(){this.placeholder="Search...",this.value=null,this.valueChange=new e.vpe,this.inputChange=new L.x,this.tap=new e.vpe}ngOnInit(){this.inputChange.pipe((0,G.b)(()=>this.tap.emit()),function $(i,s=K.z){return(0,F.e)((n,t)=>{let o=null,a=null,l=null;const p=()=>{if(o){o.unsubscribe(),o=null;const _=a;a=null,t.next(_)}};function k(){const _=l+i,f=s.now();if(f<_)return o=this.schedule(void 0,_-f),void t.add(o);p()}n.subscribe((0,N.x)(t,_=>{a=_,l=s.now(),o||(o=s.schedule(k,i),t.add(o))},()=>{p(),t.complete()},void 0,()=>{a=o=null}))})}(700),function X(i,s=W.y){return i=null!=i?i:ee,(0,F.e)((n,t)=>{let o,a=!0;n.subscribe((0,N.x)(t,l=>{const p=s(l);(a||!i(o,p))&&(a=!1,o=p,t.next(l))}))})}()).subscribe(n=>{this.valueChange.emit(n)})}ngOnDestroy(){this.inputChange.complete()}onInput(){this.inputChange.next(this.value)}clear(){this.value=null,this.inputChange.next(this.value)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange",tap:"tap"},decls:5,vars:3,consts:[["mdcTextField","","box","true",1,"search-input"],["mdcTextFieldIcon","",1,"material-icons"],["mdcTextFieldInput","","type","text",3,"placeholder","ngModel","ngModelChange","input"],["mdcTextFieldIcon","","class","material-icons close",3,"mousedown","click",4,"ngIf"],["mdcTextFieldIcon","",1,"material-icons","close",3,"mousedown","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"i",1),e._uU(2,"search"),e.qZA(),e.TgZ(3,"input",2),e.NdJ("ngModelChange",function(a){return t.value=a})("input",function(){return t.onInput()}),e.qZA(),e.YNc(4,ne,2,0,"i",3),e.qZA()),2&n&&(e.xp6(3),e.Q6J("placeholder",t.placeholder)("ngModel",t.value),e.xp6(1),e.Q6J("ngIf",null==t.value?null:t.value.length))},directives:[r.aY,r.aF,r.wC,u.Fj,u.JJ,u.On,d.O5],styles:[".search-input[_ngcontent-%COMP%]{position:relative;margin:0 0 0 16px;height:auto;border-radius:4px;background-color:#ffffff26}.search-input[_ngcontent-%COMP%]:before{display:none}.search-input[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{color:#fff;bottom:6px}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]{right:12px;left:auto;font-size:1.1em;padding:3px;text-align:center;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms;border-radius:50%;cursor:pointer;pointer-events:all}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]:hover{background-color:#00000014}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;caret-color:#fff;width:200px;padding:8px 40px 8px 48px;transition:width .3s cubic-bezier(.4,0,.2,1) 0ms;border:0;height:1.1875em;margin:0;display:block;min-width:0;background:none;box-sizing:content-box}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:260px;outline:0}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:.42;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]     .mdc-line-ripple{display:none}"]}),i})();function ie(i,s){if(1&i&&(e.TgZ(0,"span",3),e._uU(1),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.hij(" ",n.badge," ")}}const oe=["*"];let se=(()=>{class i{constructor(){this.class="",this.label="",this.title="",this.badge=null,this.click=new e.vpe}ngOnInit(){}onClick(n){this.click.emit(n)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-badge-button"]],inputs:{class:"class",label:"label",title:"title",badge:"badge"},outputs:{click:"click"},ngContentSelectors:oe,decls:4,vars:5,consts:[[1,"badge-button-container",3,"click"],["mdcTopAppBarAction","",3,"label","title","click"],["class","badge",4,"ngIf"],[1,"badge"]],template:function(n,t){1&n&&(e.F$t(),e.TgZ(0,"span",0),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(1,"button",1),e.NdJ("click",function(a){return t.onClick(a)}),e.Hsn(2),e.qZA(),e.YNc(3,ie,2,1,"span",2),e.qZA()),2&n&&(e.xp6(1),e.Tol(t.class),e.Q6J("label",t.label)("title",t.title),e.xp6(2),e.Q6J("ngIf",t.badge))},directives:[r.Y4,d.O5],styles:[".badge-button-container[_ngcontent-%COMP%]{display:flex;position:relative}.badge[_ngcontent-%COMP%]{min-width:20px;height:20px;display:flex;padding:0 6px;z-index:1;position:absolute;top:0;right:0;flex-wrap:wrap;font-size:.75rem;box-sizing:border-box;transition:transform 225ms cubic-bezier(.4,0,.2,1) 0ms;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1;align-content:center;border-radius:10px;flex-direction:row;justify-content:center;color:#fff;background-color:#e25555}"]}),i})();var U=c(5360);let ae=(()=>{class i extends d.uU{constructor(){super("en")}transform(n,t,o,a){return super.transform(n,t||"dd MMMM yyyy HH:mm",o,a)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"datetime",type:i,pure:!0}),i})();const re=function(i){return{$implicit:i}};function ce(i,s){if(1&i&&(e.TgZ(0,"nav",5)(1,"a",6),e.GkF(2,7),e.TgZ(3,"span",8),e._uU(4),e.TgZ(5,"span",9),e._uU(6),e.ALo(7,"datetime"),e.qZA()()(),e._UZ(8,"hr",10),e.qZA()),2&i){const n=s.$implicit,t=e.oxw(2),o=e.MAs(2);e.xp6(1),e.ekj("unread",n.status===t.notificationStatus.Unread),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(9,re,n)),e.xp6(1),e.uIk("title",n.message),e.xp6(1),e.hij(" ",n.message," "),e.xp6(2),e.Oqu(e.lcZ(7,7,n.date))}}function le(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,ce,9,11,"nav",4),e.qZA(),e.BQk()),2&i){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.notifications.get())}}function de(i,s){1&i&&(e.TgZ(0,"i",16),e._uU(1,"check_circle"),e.qZA())}function pe(i,s){1&i&&(e.TgZ(0,"i",17),e._uU(1,"info"),e.qZA())}function ge(i,s){1&i&&(e.TgZ(0,"i",18),e._uU(1,"error"),e.qZA())}function me(i,s){1&i&&(e.TgZ(0,"i",17),e._uU(1,"info"),e.qZA())}function ue(i,s){if(1&i&&(e.ynx(0,11),e.YNc(1,de,2,0,"i",12),e.YNc(2,pe,2,0,"i",13),e.YNc(3,ge,2,0,"i",14),e.YNc(4,me,2,0,"i",15),e.BQk()),2&i){const n=s.$implicit,t=e.oxw();e.Q6J("ngSwitch",n.type),e.xp6(1),e.Q6J("ngSwitchCase",t.notificationTypes.Success),e.xp6(1),e.Q6J("ngSwitchCase",t.notificationTypes.Info),e.xp6(1),e.Q6J("ngSwitchCase",t.notificationTypes.Error)}}function _e(i,s){1&i&&(e.TgZ(0,"div",19)(1,"i",20),e._uU(2,"notifications_off"),e.qZA()())}let fe=(()=>{class i{constructor(n){this.notifications=n,this.notificationTypes=U.k,this.notificationStatus=U.E}ngOnInit(){}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(E.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notifications"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["notificationIconTpl",""],["noNotificationsTpl",""],["mdcListGroup",""],["mdcList","",4,"ngFor","ngForOf"],["mdcList",""],["mdcListItem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mdcListItemText",""],["mdcListItemSecondaryText",""],["mdcListDivider",""],[3,"ngSwitch"],["mdcListItemGraphic","","class","material-icons success","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons error","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchDefault"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","success"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","info"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","error"],[1,"no-notifications-container"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"]],template:function(n,t){if(1&n&&(e.YNc(0,le,3,1,"ng-container",0),e.YNc(1,ue,5,4,"ng-template",null,1,e.W1O),e.YNc(3,_e,3,0,"ng-template",null,2,e.W1O)),2&n){const o=e.MAs(4);e.Q6J("ngIf",t.notifications.get().length>0)("ngIfElse",o)}},directives:[d.O5,r.mB,d.sg,r.l0,r.DF,d.tP,r.p9,r.wP,r.P,d.RF,d.n9,r.NZ,d.ED],pipes:[ae],styles:[".error[_ngcontent-%COMP%]{color:#e25555}.info[_ngcontent-%COMP%]{color:#0275d8}.success[_ngcontent-%COMP%]{color:#28a745}.unread[_ngcontent-%COMP%]{background-color:#ecf8fe}.no-notifications-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.no-notifications-container[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{font-size:34px;margin:0;cursor:default}"]}),i})();const v=function(){return["/"]},w=function(i){return{view:i}};function he(i,s){if(1&i&&(e.TgZ(0,"a",30),e._uU(1," looks_one "),e.qZA()),2&i){const n=e.oxw();e.Tol(n.view===n.views.FirstEpisodes?"material-icons":"material-icons-outlined"),e.Q6J("routerLink",e.DdM(5,v))("queryParams",e.VKq(6,w,n.view===n.views.FirstEpisodes?n.views.Latest:n.views.FirstEpisodes))("title",n.view===n.views.FirstEpisodes?"Show all":"Show first episodes")}}function Ce(i,s){if(1&i&&(e.TgZ(0,"a",31),e._uU(1),e.qZA()),2&i){const n=e.oxw();e.Q6J("routerLink",e.DdM(4,v))("queryParams",e.VKq(5,w,n.view===n.views.Favorites?n.views.Latest:n.views.Favorites))("title",n.view===n.views.Favorites?"Show all":"Show favorites"),e.xp6(1),e.hij(" ",n.view===n.views.Favorites?"favorite":"favorite_border"," ")}}const ve=function(){return["/viewed"]},ke=function(){return["/settings"]},we=["*"];let V=(()=>{class i{constructor(n,t,o,a){this.router=n,this.debug=t,this.settings=o,this.notifications=a,this.openMenu=!1,this.openNotifications=!1,this.wasNotificationsOpened=!1,this.view=null,this.isLoading=!1,this.isLoadingChange=new e.vpe,this.searchValue=null,this.searchValueChange=new e.vpe,this.views=P.G,this.version="1.3.6",this.debug.log("Router url:",this.router.url)}ngOnInit(){}toggleMenu(){this.openMenu=!this.openMenu}closeMenu(){this.openMenu=!1}toggleNotifications(){this.openNotifications=!this.openNotifications,this.wasNotificationsOpened=this.openNotifications}onOpenNotificationsChange(n){!n&&this.wasNotificationsOpened&&this.notifications.markAllAsRead()}onSearchTap(){this.isLoading=!0,this.isLoadingChange.emit(this.isLoading)}onSearchValueChange(n){this.searchValueChange.emit(n)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(m.F0),e.Y36(D.r),e.Y36(C.g),e.Y36(E.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-layout"]],inputs:{view:"view",isLoading:"isLoading",searchValue:"searchValue"},outputs:{isLoadingChange:"isLoadingChange",searchValueChange:"searchValueChange"},ngContentSelectors:we,decls:52,vars:36,consts:[[1,"page"],["viewport",""],["mdcDrawerContainer","temporary",3,"open","openChange"],["mdcDrawer",""],["mdcDrawerToolbarSpacer",""],["mdcDrawerContent","","mdcListGroup",""],["mdcList",""],["mdcListItem","",3,"routerLink","queryParams","selected","click"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"],["mdcListDivider",""],["mdcListItem","",3,"routerLink","selected","click"],[1,"content"],["mdcTopAppBar","",3,"viewport","fixedAdjust"],["mdcTopAppBarRow",""],["mdcTopAppBarSection","","alignStart",""],["mdcTopAppBarNavIcon","",1,"material-icons",3,"click"],["mdcTopAppBarTitle","",3,"title","routerLink"],["alt","logo","src","assets/icons/128.png"],[3,"value","valueChange","tap"],["mdcTopAppBarSection","","alignEnd",""],["mdcTopAppBarAction","","label","Show first episodes",3,"routerLink","queryParams","title","class",4,"ngIf"],["mdcTopAppBarAction","","class","material-icons","label","Show favorites",3,"routerLink","queryParams","title",4,"ngIf"],["label","Notifications","title","Notifications",1,"material-icons",3,"badge","click"],["mdcTopAppBarAction","","label","Settings","title","Settings",1,"material-icons",3,"routerLink"],["mdcLinearProgress","",3,"indeterminate","closed"],["content",""],["mdcDrawerContainer","temporary",1,"right",3,"open","openChange"],["mdcDrawerHeader",""],["mdcDrawerHeaderContent",""],["mdcDrawerContent",""],["mdcTopAppBarAction","","label","Show first episodes",3,"routerLink","queryParams","title"],["mdcTopAppBarAction","","label","Show favorites",1,"material-icons",3,"routerLink","queryParams","title"]],template:function(n,t){if(1&n&&(e.F$t(),e.TgZ(0,"div",0,1)(2,"aside",2),e.NdJ("openChange",function(a){return t.openMenu=a}),e.TgZ(3,"nav",3),e._UZ(4,"div",4),e.TgZ(5,"div",5)(6,"nav",6)(7,"a",7),e.NdJ("click",function(){return t.closeMenu()}),e.TgZ(8,"i",8),e._uU(9,"star"),e.qZA(),e._uU(10,"Latest "),e.qZA(),e.TgZ(11,"a",7),e.NdJ("click",function(){return t.closeMenu()}),e.TgZ(12,"i",8),e._uU(13,"favorite"),e.qZA(),e._uU(14,"Favorites "),e.qZA(),e.TgZ(15,"a",7),e.NdJ("click",function(){return t.closeMenu()}),e.TgZ(16,"i",8),e._uU(17,"looks_one"),e.qZA(),e._uU(18,"First episodes "),e.qZA()(),e._UZ(19,"hr",9),e.TgZ(20,"nav",6)(21,"a",10),e.NdJ("click",function(){return t.closeMenu()}),e.TgZ(22,"i",8),e._uU(23,"visibility"),e.qZA(),e._uU(24,"Viewed "),e.qZA()()()()(),e.TgZ(25,"div",11)(26,"header",12)(27,"div",13)(28,"section",14)(29,"button",15),e.NdJ("click",function(){return t.toggleMenu()}),e._uU(30," menu "),e.qZA(),e.TgZ(31,"a",16),e._UZ(32,"img",17),e.qZA(),e.TgZ(33,"app-search-input",18),e.NdJ("valueChange",function(a){return t.searchValue=a})("tap",function(){return t.onSearchTap()})("valueChange",function(a){return t.onSearchValueChange(a)}),e.qZA()(),e.TgZ(34,"section",19),e.YNc(35,he,2,8,"a",20),e.YNc(36,Ce,2,7,"a",21),e.TgZ(37,"app-badge-button",22),e.NdJ("click",function(){return t.toggleNotifications()}),e._uU(38," notifications "),e.qZA(),e.TgZ(39,"a",23),e._uU(40," settings "),e.qZA()()(),e._UZ(41,"div",24),e.qZA(),e.TgZ(42,"main",null,25),e.Hsn(44),e.qZA()(),e.TgZ(45,"aside",26),e.NdJ("openChange",function(a){return t.openNotifications=a})("openChange",function(a){return t.onOpenNotificationsChange(a)}),e.TgZ(46,"nav",3),e._UZ(47,"div",4),e.TgZ(48,"div",27)(49,"div",28),e._uU(50,"Notifications"),e.qZA()(),e._UZ(51,"app-notifications",29),e.qZA()()()),2&n){const o=e.MAs(1),a=e.MAs(43);e.xp6(2),e.Q6J("open",t.openMenu),e.xp6(5),e.Q6J("routerLink",e.DdM(24,v))("queryParams",e.VKq(25,w,t.views.Latest))("selected",t.view===t.views.Latest),e.xp6(4),e.Q6J("routerLink",e.DdM(27,v))("queryParams",e.VKq(28,w,t.views.Favorites))("selected",t.view===t.views.Favorites),e.xp6(4),e.Q6J("routerLink",e.DdM(30,v))("queryParams",e.VKq(31,w,t.views.FirstEpisodes))("selected",t.view===t.views.FirstEpisodes),e.xp6(6),e.Q6J("routerLink",e.DdM(33,ve))("selected",t.router.url.startsWith("/viewed")),e.xp6(5),e.Q6J("viewport",o)("fixedAdjust",a),e.xp6(5),e.Q6J("title","Anime Tracker v"+t.version)("routerLink",e.DdM(34,v)),e.xp6(2),e.Q6J("value",t.searchValue),e.xp6(2),e.Q6J("ngIf",t.settings.openInNewTab),e.xp6(1),e.Q6J("ngIf",t.settings.openInNewTab),e.xp6(1),e.Q6J("badge",t.notifications.unreadCount),e.xp6(2),e.Q6J("routerLink",e.DdM(35,ke)),e.xp6(2),e.Q6J("indeterminate",!0)("closed",!t.isLoading),e.xp6(4),e.Q6J("open",t.openNotifications)}},directives:[r.Cq,r.Es,r.Ar,r.n3,r.mB,r.l0,m.yS,r.DF,r.NZ,r.P,r.eD,r.JF,r.B_,r.cH,r.K,te,d.O5,r.Y4,se,r.bR,r.pA,r.v1,fe],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}[mdcTopAppBar][_ngcontent-%COMP%]{position:fixed!important}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]{height:60px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]{display:flex;padding:0 10px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}[mdcDrawerHeader][_ngcontent-%COMP%], [mdcDrawerToolbarSpacer][_ngcontent-%COMP%]{background-color:#6200ee;background-color:var(--mdc-theme-primary, #6200ee);color:#fff;color:var(--mdc-theme-on-primary, #fff);height:60px}[mdcDrawerContainer].right[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{left:auto;left:initial;right:0;transform:translate(calc(100% + 20px))}[mdcDrawerContainer].right.mdc-drawer--open[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{transform:none}.content[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;flex-grow:1;height:100%;box-sizing:border-box}[mdcLinearProgress].mdc-linear-progress--closed[_ngcontent-%COMP%]{display:none}[mdcLinearProgress][_ngcontent-%COMP%]   .mdc-linear-progress__bar-inner[_ngcontent-%COMP%]{background-color:#018786;background-color:var(--mdc-theme-secondary, #018786)}"]}),i})(),I=(()=>{class i{constructor(n){this.element=n,this.on=!1,this.titleOn="",this.titleOff="",this.classOn="",this.classOff="",this.onChange=new e.vpe}ngOnInit(){this.update()}ngOnChanges(n){n.on.isFirstChange()||this.update()}update(){var n,t,o,a;this.on?(this.element.nativeElement.innerHTML=this.iconOn,this.element.nativeElement.title=this.titleOn,(null===(n=this.classOff)||void 0===n?void 0:n.length)&&this.removeClass(this.classOff),(null===(t=this.classOn)||void 0===t?void 0:t.length)&&this.addClass(this.classOn)):(this.element.nativeElement.innerHTML=this.iconOff,this.element.nativeElement.title=this.titleOff,(null===(o=this.classOn)||void 0===o?void 0:o.length)&&this.removeClass(this.classOn),(null===(a=this.classOff)||void 0===a?void 0:a.length)&&this.addClass(this.classOff))}addClass(n){this.element.nativeElement.classList.add(n.split(" "))}removeClass(n){this.element.nativeElement.classList.remove(n.split(" "))}onClick(n){this.on=!this.on,this.onChange.emit(this.on)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","iconToggle",""]],hostBindings:function(n,t){1&n&&e.NdJ("click",function(a){return t.onClick(a)})},inputs:{iconOn:"iconOn",iconOff:"iconOff",on:"on",titleOn:"titleOn",titleOff:"titleOff",classOn:"classOn",classOff:"classOff"},outputs:{onChange:"onChange"},features:[e.TTD]}),i})();var be=c(2313);let B=(()=>{class i{constructor(n){this.sanitizer=n}transform(n,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(n);case"style":return this.sanitizer.bypassSecurityTrustStyle(n);case"script":return this.sanitizer.bypassSecurityTrustScript(n);case"url":return this.sanitizer.bypassSecurityTrustUrl(n);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(n);default:throw new Error(`SafePipe unable to bypass security for invalid type: ${t}`)}}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(be.H7,16))},i.\u0275pipe=e.Yjl({name:"safe",type:i,pure:!0}),i})(),q=(()=>{class i{constructor(){}transform(n,t){switch(t){case"format":return`url("${n}")`;case"encode":return encodeURI(n);case"decode":return decodeURI(n);case"encodeAndFormat":return this.transform(this.transform(n,"encode"),"format");case"decodeAndFormat":return this.transform(this.transform(n,"decode"),"format");default:throw new Error(`UrlPipe unable to transform url for invalid action: ${t}`)}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"url",type:i,pure:!0}),i})();var Q=c(655),Te=c(8798);let Me=(()=>{class i{constructor(n,t){this.settings=n,this.scraper=t,this.getImageOrFallback=(o,a)=>new Promise(l=>{const p=new Image;p.src=o,p.onload=()=>l(o),p.onerror=()=>l(a)})}transform(n,t,o){return(0,Q.mG)(this,void 0,void 0,function*(){if("resolveUrl"===t){if("image"===o){if(!this.settings.proxy.shouldFetchImages||!n)return n;const a=this.scraper.resolveUrl(n);return yield this.getImageOrFallback(n,a)}return this.scraper.resolveUrl(n)}throw new Error(`ProxyPipe unable to transform value for invalid action: ${t}`)})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(C.g,16),e.Y36(Te.V,16))},i.\u0275pipe=e.Yjl({name:"proxy",type:i,pure:!0}),i})();function Oe(i,s){1&i&&(e.ynx(0),e.TgZ(1,"i",17),e._uU(2,"movie"),e.qZA(),e.BQk())}function xe(i,s){1&i&&(e.TgZ(0,"div",18)(1,"span"),e._uU(2,"New"),e.qZA()())}function ye(i,s){1&i&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2,"End"),e.qZA()())}function Le(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw().searchOnMAL()}),e._uU(1," search "),e.qZA()}}function Pe(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",21,22)(2,"button",23),e.NdJ("click",function(){return e.CHM(n),e.MAs(5).open=!0}),e._uU(3," visibility "),e.qZA(),e.TgZ(4,"div",24,25),e.NdJ("openChange",function(o){return e.CHM(n),e.MAs(5).open=o}),e.TgZ(6,"ul",26)(7,"li",27),e.NdJ("click",function(){return e.CHM(n),e.oxw().markAsUnviewed()}),e._uU(8,"Mark as unviewed"),e.qZA()()()()}if(2&i){const n=e.MAs(1),t=e.MAs(5);e.oxw();const o=e.MAs(17);e.Udp("display","flex"),e.xp6(2),e.Udp("margin",0),e.xp6(2),e.Q6J("open",t.open)("menuAnchor",n)("viewport",o)}}function Ae(i,s){if(1&i&&(e.TgZ(0,"a",29),e.ALo(1,"safe"),e._uU(2," check_circle_outline "),e.qZA()),2&i){const n=e.oxw(2);e.Q6J("href",e.xi3(1,1,n.viewedEpisodes.getEpisodeUrl(n.episode),"resourceUrl"),e.LSH)}}function Ze(i,s){if(1&i&&e.YNc(0,Ae,3,4,"a",28),2&i){const n=e.oxw();e.Q6J("ngIf",n.episode.isRegular)}}let De=(()=>{class i{constructor(n,t,o,a){this.settings=n,this.browser=t,this.favoriteAnimes=o,this.viewedEpisodes=a,this.streamLinksClick=new e.vpe,this.downloadLinksClick=new e.vpe}ngOnInit(){this.episode.isViewed=this.viewedEpisodes.isViewed(this.episode),this.episode.isRegular=this.viewedEpisodes.isRegular(this.episode)}onClick(n){if(this.episode.streamLinks.length>1)return n.preventDefault(),this.showStreamLinks(),!1;this.markAsViewed(),this.browser.isWebExtension&&(n.preventDefault(),this.browser.createTab(this.episode.streamLinks[0].url,!this.settings.openLinksInInactiveTabs))}showStreamLinks(){this.streamLinksClick.emit(this.episode)}showDownloadLinks(){this.downloadLinksClick.emit(this.episode)}toggleFavorite(n){n?this.favoriteAnimes.add(this.episode.anime.title):this.favoriteAnimes.remove(this.episode.anime.title)}isFavorite(){return this.favoriteAnimes.isFavorite(this.episode.anime.title)}markAsViewed(){this.episode.isViewed=!0,this.viewedEpisodes.add(this.episode)}markAsUnviewed(){this.episode.isViewed=!1,this.viewedEpisodes.remove(this.episode)}searchOnMAL(){const n=encodeURI(`https://myanimelist.net/anime.php?q=${this.episode.anime.title}&cat=anime`);window.open(n,"_blank","noopener,noreferrer")}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(C.g),e.Y36(Z.q),e.Y36(T.S),e.Y36(M.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["episode-card"]],inputs:{episode:"episode"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:27,vars:26,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","target","_blank",3,"href","click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],["class","card-badge new",4,"ngIf"],["class","card-badge end",4,"ngIf"],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["class","material-icons mdc-icon-button","title","Search on MAL",3,"click",4,"ngIf"],["mdcMenuAnchor","",3,"display",4,"ngIf","ngIfElse"],["isRegularTemplate",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],[1,"card-badge","end"],["title","Search on MAL",1,"material-icons","mdc-icon-button",3,"click"],["mdcMenuAnchor",""],["anchor","mdcMenuAnchor"],["title","Viewed",1,"material-icons-outlined","mdc-icon-button","wider","blue-eye",3,"click"],["mdcMenu","",3,"open","menuAnchor","viewport","openChange"],["isViewedMenu",""],["mdcList",""],["mdcListItem","",3,"click"],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"a",1),e.NdJ("click",function(a){return t.onClick(a)}),e.TgZ(2,"div",2),e.ALo(3,"safe"),e.ALo(4,"url"),e.ALo(5,"async"),e.ALo(6,"proxy"),e.TgZ(7,"div",3)(8,"h2",4),e.YNc(9,Oe,3,0,"ng-container",5),e._uU(10),e.qZA(),e.TgZ(11,"div",6)(12,"span"),e._uU(13),e.qZA()(),e.YNc(14,xe,3,0,"div",7),e.YNc(15,ye,3,0,"div",8),e.qZA()()(),e.TgZ(16,"div",9,10),e.YNc(18,Le,2,0,"button",11),e.YNc(19,Pe,9,7,"div",12),e.YNc(20,Ze,1,1,"ng-template",null,13,e.W1O),e.TgZ(22,"button",14),e.NdJ("onChange",function(a){return t.toggleFavorite(a)}),e.qZA(),e.TgZ(23,"button",15),e.NdJ("click",function(){return t.showStreamLinks()}),e._uU(24," play_circle_outline "),e.qZA(),e.TgZ(25,"button",16),e.NdJ("click",function(){return t.showDownloadLinks()}),e._uU(26," save_alt "),e.qZA()()()),2&n){const o=e.MAs(21);e.xp6(1),e.Q6J("href",t.episode.streamLinks[0].url,e.LSH),e.xp6(1),e.Udp("background-image",e.xi3(3,14,e.xi3(4,17,e.lcZ(5,20,e.Dn7(6,22,t.episode.anime.cover,"resolveUrl","image")),"encodeAndFormat"),"style")),e.uIk("data-cover",t.episode.anime.cover),e.xp6(6),e.Q6J("title",t.episode.anime.title),e.xp6(1),e.Q6J("ngIf",t.episode.anime.isMovie),e.xp6(1),e.hij(" ",t.episode.anime.title," "),e.xp6(3),e.Oqu(t.episode.number),e.xp6(1),e.Q6J("ngIf",t.episode.anime.isNew),e.xp6(1),e.Q6J("ngIf",t.episode.anime.isFinished),e.xp6(3),e.Q6J("ngIf",1===t.episode.number),e.xp6(1),e.Q6J("ngIf",t.episode.isViewed)("ngIfElse",o),e.xp6(3),e.Q6J("on",t.isFavorite())}},directives:[r.C0,r.m5,r.PK,r.cV,d.O5,r.tI,r.hS,r.l0,r.DF,I],pipes:[B,q,d.Ov,Me],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:160px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.eda936310ffb3b4f.gif) center no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,.9) 100%);color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}.cursor-default[_ngcontent-%COMP%]{cursor:default}']}),i})();function Ie(i,s){1&i&&(e.ynx(0),e.TgZ(1,"i",16),e._uU(2,"movie"),e.qZA(),e.BQk())}function Se(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",17)(2,"span"),e._uU(3,"New"),e.qZA()(),e.BQk())}function Je(i,s){1&i&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2,"End"),e.qZA()())}function Ee(i,s){if(1&i&&e.YNc(0,Je,3,0,"div",18),2&i){const n=e.oxw();e.Q6J("ngIf",n.episodeRange.last.anime.isFinished)}}function Fe(i,s){1&i&&(e.TgZ(0,"button",20),e._uU(1," visibility "),e.qZA())}function Ne(i,s){if(1&i&&(e.TgZ(0,"a",21),e.ALo(1,"safe"),e._uU(2," check_circle_outline "),e.qZA()),2&i){const n=e.oxw();e.Q6J("href",e.xi3(1,1,n.viewedEpisodes.getEpisodeUrl(n.episodeRange.first),"resourceUrl"),e.LSH)}}let Ue=(()=>{class i{constructor(n,t){this.favoriteAnimes=n,this.viewedEpisodes=t,this.streamLinksClick=new e.vpe,this.downloadLinksClick=new e.vpe}ngOnInit(){this.episodeRange.range=this.episodeRange.range.map(n=>Object.assign(Object.assign({},n),{isViewed:this.viewedEpisodes.isViewed(n)})),this.episodeRange.allViewed=this.episodeRange.range.every(n=>this.viewedEpisodes.isViewed(n)),this.episodeRange.first.isRegular=this.viewedEpisodes.isRegular(this.episodeRange.first)}onClick(n){return n.preventDefault(),this.showStreamLinks(),!1}showStreamLinks(){this.streamLinksClick.emit(this.episodeRange)}showDownloadLinks(){this.downloadLinksClick.emit(this.episodeRange)}toggleFavorite(n){n?this.favoriteAnimes.add(this.episodeRange.first.anime.title):this.favoriteAnimes.remove(this.episodeRange.first.anime.title)}isFavorite(){return this.favoriteAnimes.isFavorite(this.episodeRange.first.anime.title)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(T.S),e.Y36(M.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["episode-range-card"]],inputs:{episodeRange:"episodeRange"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:24,vars:19,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","href","javascript:void(0)",3,"click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],[4,"ngIf","ngIfElse"],["endBadge",""],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["class","material-icons-outlined mdc-icon-button wider blue-eye cursor-default","title","Viewed",4,"ngIf"],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],["class","card-badge end",4,"ngIf"],[1,"card-badge","end"],["title","Viewed",1,"material-icons-outlined","mdc-icon-button","wider","blue-eye","cursor-default"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"a",1),e.NdJ("click",function(a){return t.onClick(a)}),e.TgZ(2,"div",2),e.ALo(3,"safe"),e.ALo(4,"url"),e.TgZ(5,"div",3)(6,"h2",4),e.YNc(7,Ie,3,0,"ng-container",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6)(10,"span"),e._uU(11),e.qZA()(),e.YNc(12,Se,4,0,"ng-container",7),e.YNc(13,Ee,1,1,"ng-template",null,8,e.W1O),e.qZA()()(),e.TgZ(15,"div",9,10),e.YNc(17,Fe,2,0,"button",11),e.YNc(18,Ne,3,4,"a",12),e.TgZ(19,"button",13),e.NdJ("onChange",function(a){return t.toggleFavorite(a)}),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return t.showStreamLinks()}),e._uU(21," play_circle_outline "),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return t.showDownloadLinks()}),e._uU(23," save_alt "),e.qZA()()()),2&n){const o=e.MAs(14);e.xp6(2),e.Udp("background-image",e.xi3(3,13,e.xi3(4,16,t.episodeRange.first.anime.cover,"encodeAndFormat"),"style")),e.uIk("data-cover",t.episodeRange.first.anime.cover),e.xp6(4),e.Q6J("title",t.episodeRange.first.anime.title),e.xp6(1),e.Q6J("ngIf",t.episodeRange.first.anime.isMovie),e.xp6(1),e.hij(" ",t.episodeRange.first.anime.title," "),e.xp6(3),e.AsE("",t.episodeRange.first.number," - ",t.episodeRange.last.number,""),e.xp6(1),e.Q6J("ngIf",t.episodeRange.first.anime.isNew)("ngIfElse",o),e.xp6(5),e.Q6J("ngIf",t.episodeRange.allViewed),e.xp6(1),e.Q6J("ngIf",t.episodeRange.first.isRegular),e.xp6(1),e.Q6J("on",t.isFavorite())}},directives:[r.C0,r.m5,r.PK,r.cV,d.O5,I],pipes:[B,q],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:160px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.eda936310ffb3b4f.gif) center no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,.9) 100%);color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}.cursor-default[_ngcontent-%COMP%]{cursor:default}']}),i})();var Ve=c(1743);function Be(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"li",4)(1,"span",5),e._uU(2),e.qZA(),e.TgZ(3,"a",6),e.NdJ("click",function(o){const l=e.CHM(n).$implicit;return e.oxw(2).onClick(o,l.url)}),e._uU(4),e.qZA()()}if(2&i){const n=s.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",t.langColors[n.lang.toLowerCase()]||""),e.xp6(1),e.Oqu(n.lang),e.xp6(1),e.Q6J("href",n.url,e.LSH),e.xp6(1),e.Oqu(n.url)}}function qe(i,s){if(1&i&&(e.TgZ(0,"ul",2),e.YNc(1,Be,5,4,"li",3),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.links)}}function Qe(i,s){1&i&&(e.TgZ(0,"div",7),e._uU(1,"No available links."),e.qZA())}let R=(()=>{class i{constructor(n,t){this.settings=n,this.browser=t,this.links=[],this.linkClick=new e.vpe,this.langColors=Ve.g}ngOnInit(){}onClick(n,t){this.linkClick.emit(),this.browser.isWebExtension&&(n.preventDefault(),this.browser.createTab(t,!this.settings.openLinksInInactiveTabs))}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(C.g),e.Y36(Z.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["episode-link-list"]],inputs:{links:"links"},outputs:{linkClick:"linkClick"},decls:3,vars:2,consts:[["mdcList","",4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcList",""],["mdcListItem","",4,"ngFor","ngForOf"],["mdcListItem",""],[1,"badge",3,"ngClass"],["target","_blank",1,"link",3,"href","click"],[1,"empty-text"]],template:function(n,t){if(1&n&&(e.YNc(0,qe,2,1,"ul",0),e.YNc(1,Qe,2,0,"ng-template",null,1,e.W1O)),2&n){const o=e.MAs(2);e.Q6J("ngIf",null==t.links?null:t.links.length)("ngIfElse",o)}},directives:[d.O5,r.l0,d.sg,r.DF,d.mk],styles:[".badge.blue[_ngcontent-%COMP%]{background:#0061aa}.badge.dark[_ngcontent-%COMP%]{background:#34393f}.badge.pink[_ngcontent-%COMP%]{background:#b83280}.badge.green[_ngcontent-%COMP%]{background:#38a169}.badge.red[_ngcontent-%COMP%]{background:#c53030}.badge.purple[_ngcontent-%COMP%]{background:#6b46c1}.badge.orange[_ngcontent-%COMP%]{background:#c05621}.badge.yellow[_ngcontent-%COMP%]{background:#fec107;color:#1b0e00}[mdcList][_ngcontent-%COMP%]{padding:12px 0}.badge[_ngcontent-%COMP%]{padding:2px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase;background:#6c757d;margin-right:10px;border-radius:2px;min-width:90px;text-align:center}.link[_ngcontent-%COMP%]{font-size:15px;font-weight:500;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}"]}),i})();const Re=["dialog"];let Ye=(()=>{class i{constructor(){this.title="Choose a link",this.links=[],this.linkClick=new e.vpe,this.close=new e.vpe}ngOnInit(){}open(){this.dialog.open()}onClose(){this.close.emit()}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["episode-choose-link-dialog"]],viewQuery:function(n,t){if(1&n&&e.Gf(Re,5),2&n){let o;e.iGM(o=e.CRH())&&(t.dialog=o.first)}},inputs:{title:"title",links:"links"},outputs:{linkClick:"linkClick",close:"close"},decls:12,vars:3,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[3,"links","linkClick"],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""]],template:function(n,t){1&n&&(e.TgZ(0,"aside",0,1),e.NdJ("cancel",function(){return t.onClose()}),e.TgZ(2,"div",2)(3,"header",3)(4,"h2",4),e._uU(5),e.qZA()(),e.TgZ(6,"section",5)(7,"episode-link-list",6),e.NdJ("linkClick",function(){return t.linkClick.emit()}),e.qZA()(),e.TgZ(8,"footer",7)(9,"button",8),e._uU(10,"Close"),e.qZA()()(),e._UZ(11,"div",9),e.qZA()),2&n&&(e.xp6(5),e.AsE(" ",t.title," ",(null==t.links?null:t.links.length)>1?"("+t.links.length+")":""," "),e.xp6(2),e.Q6J("links",t.links))},directives:[r.zv,r.SU,r.e6,r.d8,r.fw,r.OJ,R,r.zL,r.S8,r.LC,r.SG],styles:[""]}),i})();const ze=["dialog"];function He(i,s){1&i&&(e.TgZ(0,"span",23),e._uU(1,"visibility"),e.qZA())}function je(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"a",21),e.NdJ("activate",function(){const a=e.CHM(n).index;return e.oxw(2).activeIndex=a}),e._uU(1),e.YNc(2,He,2,0,"span",22),e.qZA()}if(2&i){const n=s.$implicit,t=s.index,o=e.oxw(2);e.ekj("mdc-ripple-upgraded--background-focused",o.activeIndex===t),e.Q6J("active",o.activeIndex===t),e.xp6(1),e.hij(" ",n.number," "),e.xp6(1),e.Q6J("ngIf",n.isViewed)}}function Ge(i,s){if(1&i){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",11)(2,"div",12)(3,"a",13),e._uU(4," navigate_before "),e.qZA()(),e.TgZ(5,"div",14)(6,"nav",15),e.YNc(7,je,3,5,"a",16),e.qZA()(),e.TgZ(8,"div",17)(9,"a",18),e._uU(10," navigate_next "),e.qZA()()(),e.TgZ(11,"div",19)(12,"episode-link-list",20),e.NdJ("linkClick",function(){e.CHM(n);const o=e.oxw();return o.linkClick.emit(o.episodes[o.activeIndex])}),e.qZA()(),e.BQk()}if(2&i){const n=e.oxw();e.xp6(7),e.Q6J("ngForOf",n.episodes),e.xp6(5),e.Q6J("links",n.episodes[n.activeIndex][n.linksKey])}}function Ke(i,s){1&i&&(e.TgZ(0,"div",24),e._uU(1,"No available links."),e.qZA())}let $e=(()=>{class i{constructor(){this.title="Choose a link",this.episodes=[],this.linksKey="streamLinks",this.linkClick=new e.vpe,this.close=new e.vpe,this.activeIndex=0}ngOnInit(){}open(){this.dialog.open()}onClose(){this.activeIndex=0,this.close.emit()}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["episode-range-choose-link-dialog"]],viewQuery:function(n,t){if(1&n&&e.Gf(ze,5),2&n){let o;e.iGM(o=e.CRH())&&(t.dialog=o.first)}},inputs:{title:"title",episodes:"episodes",linksKey:"linksKey"},outputs:{linkClick:"linkClick",close:"close"},decls:14,vars:4,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"active","mdc-ripple-upgraded--background-focused","activate",4,"ngFor","ngForOf"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],[1,"tab-content"],[3,"links","linkClick"],["mdcTab","","tabindex","0",3,"active","activate"],["class","material-icons-outlined viewed-icon","title","Viewed",4,"ngIf"],["title","Viewed",1,"material-icons-outlined","viewed-icon"],[1,"empty-text"]],template:function(n,t){if(1&n&&(e.TgZ(0,"aside",0,1),e.NdJ("cancel",function(){return t.onClose()}),e.TgZ(2,"div",2)(3,"header",3)(4,"h2",4),e._uU(5),e.qZA()(),e.TgZ(6,"section",5),e.YNc(7,Ge,13,2,"ng-container",6),e.YNc(8,Ke,2,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(10,"footer",8)(11,"button",9),e._uU(12,"Close"),e.qZA()()(),e._UZ(13,"div",10),e.qZA()),2&n){const o=e.MAs(9);e.xp6(5),e.AsE(" ",t.title," ",null!=t.episodes&&t.episodes.length&&(null==t.episodes[t.activeIndex][t.linksKey]?null:t.episodes[t.activeIndex][t.linksKey].length)>1?"("+t.episodes[t.activeIndex][t.linksKey].length+")":""," "),e.xp6(2),e.Q6J("ngIf",null==t.episodes?null:t.episodes.length)("ngIfElse",o)}},directives:[r.zv,r.SU,r.e6,r.d8,r.fw,r.OJ,d.O5,r.Cm,r.Qx,r.Cn,r.on,r.Io,d.sg,r.f3,r.ru,R,r.zL,r.S8,r.LC,r.SG],styles:["[mdcDialogBody][_ngcontent-%COMP%]{position:relative}[mdcTabBarScroller][_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;left:0;background-color:#fff;z-index:1}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}.viewed-icon[_ngcontent-%COMP%]{color:#0275d8;vertical-align:middle;font-size:1.6em;margin-left:8px}"]}),i})(),We=(()=>{class i extends d.uU{constructor(){super("en")}transform(n,t,o,a){switch((0,h.hp)(new Date(n))){case(0,h.Lg)():return"Today";case(0,h.Cv)():return"Yesterday";default:return super.transform(n,t||"EEEE, dd MMMM yyyy",o,a)}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"shortdate",type:i,pure:!0}),i})();const Xe=["episodeStreamLinksDialog"],en=["episodeDownloadLinksDialog"],nn=["episodeRangeStreamLinksDialog"],tn=["episodeRangeDownloadLinksDialog"],Y=function(i){return{$implicit:i}};function on(i,s){if(1&i&&e.GkF(0,19),2&i){const n=s.$implicit;e.oxw(4);const t=e.MAs(7),o=e.MAs(5);e.Q6J("ngTemplateOutlet",n.range?t:o)("ngTemplateOutletContext",e.VKq(2,Y,n))}}function sn(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",15),e._uU(2),e.ALo(3,"shortdate"),e.qZA(),e._UZ(4,"div",16),e.TgZ(5,"section",17),e.YNc(6,on,1,4,"ng-container",18),e.qZA(),e.BQk()),2&i){const n=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,n)),e.xp6(4),e.Q6J("ngForOf",t.episodesByDays[n])}}function an(i,s){if(1&i&&(e.ynx(0),e.YNc(1,sn,7,4,"ng-container",14),e.BQk()),2&i){const n=s.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.episodesByDays[n]?null:t.episodesByDays[n].length)}}function rn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,an,2,1,"ng-container",13),e.BQk()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.days)}}function cn(i,s){if(1&i&&e.GkF(0,19),2&i){const n=s.$implicit;e.oxw(2);const t=e.MAs(7),o=e.MAs(5);e.Q6J("ngTemplateOutlet",n.range?t:o)("ngTemplateOutletContext",e.VKq(2,Y,n))}}function ln(i,s){if(1&i&&(e.TgZ(0,"section",17),e.YNc(1,cn,1,4,"ng-container",18),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.episodes)}}function dn(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"episode-card",20),e.NdJ("streamLinksClick",function(o){return e.CHM(n),e.oxw().openStreamLinksDialog(o)})("downloadLinksClick",function(o){return e.CHM(n),e.oxw().openDownloadLinksDialog(o)}),e.qZA()}2&i&&e.Q6J("episode",s.$implicit)}function pn(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"episode-range-card",21),e.NdJ("streamLinksClick",function(o){return e.CHM(n),e.oxw().openStreamLinksDialog(o)})("downloadLinksClick",function(o){return e.CHM(n),e.oxw().openDownloadLinksDialog(o)}),e.qZA()}2&i&&e.Q6J("episodeRange",s.$implicit)}function gn(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){return e.CHM(n),e.oxw().refresh()}),e.TgZ(1,"i",23),e._uU(2,"refresh"),e.qZA()()}}const O=function(){return[]};let mn=(()=>{class i{constructor(n,t,o,a,l,p,k){this.animeProvider=n,this.favoriteAnimes=t,this.viewedEpisodes=o,this.settings=a,this.browser=l,this.debug=p,this.route=k,this.isLoading=!0,this.searchValue=null,this.episodes=[],this.days=[],this.episodesByDays=[],this.allEpisodes=[],this.selectedEpisode=null,this.selectedEpisodeRange=null,this.componentDestroy=new L.x}ngOnInit(){this.browser.isWebExtension&&this.browser.setBadgeText(""),this.route.queryParams.pipe((0,A.R)(this.componentDestroy)).subscribe(n=>{this.view=n.view||this.settings.defaultView,this.debug.log("Current view:",this.view),this.allEpisodes.length>0?this.filterEpisodes(this.allEpisodes,this.days):this.fetchEpisodes()})}ngOnDestroy(){this.componentDestroy.next(),this.componentDestroy.complete()}fetchEpisodes(n){this.isLoading=!0,this.animeProvider.getLatestEpisodesByDays(n).pipe((0,A.R)(this.componentDestroy)).subscribe(([t,o])=>{this.allEpisodes=t,this.filterEpisodes(t,o),this.days=o},t=>{console.error(t.message)},()=>{this.isLoading=!1})}filterEpisodesByView(n,t){switch(t){case P.G.Favorites:return n.filter(o=>this.favoriteAnimes.isFavorite(o.anime.title));case P.G.FirstEpisodes:return n.filter(o=>1===o.number);default:return n}}filterEpisodes(n,t){var o;this.episodes=this.filterEpisodesByView(n,this.view),(null===(o=this.searchValue)||void 0===o?void 0:o.length)&&(this.episodes=this.episodes.filter(a=>-1!==a.anime.title.toLowerCase().indexOf(this.searchValue.toLowerCase()))),this.settings.mergeCommonEpisodes&&(this.episodes=this.mergeCommonEpisodes(this.episodes)),this.settings.displayEpisodesDayByDay&&t.forEach(a=>{if(a){const l=(0,h.hp)(new Date(a));this.episodesByDays[a]=this.episodes.filter(p=>{if(!p.releaseDate)return!1;const k=(0,h.hp)(new Date(p.releaseDate));return l===k})}})}mergeCommonEpisodes(n){var t;const o=[],a={};let l=n.slice();for(let p of n){if(Object.keys(a).find(g=>(0,b.T0)(g,p.anime.title,this.settings.episodeSimilarityDegree,!0)&&-1!==a[g].indexOf(p.number)))continue;const f=l.filter(g=>(0,b.T0)(g.anime.title,p.anime.title,this.settings.episodeSimilarityDegree,!0)&&(!this.settings.displayEpisodesDayByDay||(0,h.zu)(g.releaseDate,p.releaseDate)));if(a[p.anime.title]=[...a[p.anime.title]||[],...f.map(g=>g.number)],l=l.filter(g=>-1===f.findIndex(x=>x.anime.title===g.anime.title&&x.number===g.number)),f.length>1){const g=new y.W(f.sort((x,bn)=>x.number-bn.number),p.releaseDate);o.push(g),(null===(t=this.selectedEpisodeRange)||void 0===t?void 0:t.first.anime.title)===g.first.anime.title&&(this.selectedEpisodeRange=g)}else o.push(p)}return o}openStreamLinksDialog(n){n instanceof y.W?(this.selectedEpisodeRange=n,this.episodeRangeStreamLinksDialog.open()):(this.selectedEpisode=n,this.episodeStreamLinksDialog.open())}openDownloadLinksDialog(n){n instanceof y.W?(this.selectedEpisodeRange=n,this.episodeRangeDownloadLinksDialog.open()):(this.selectedEpisode=n,this.episodeDownloadLinksDialog.open())}markEpisodeAsViewed(n){n.isViewed=!0,this.viewedEpisodes.add(n)}search(n){this.debug.log("Searching for:",n),this.filterEpisodes(this.allEpisodes,this.days),this.isLoading=!1}refresh(){this.episodes=[],this.episodesByDays=[],this.fetchEpisodes(!0)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(H._),e.Y36(T.S),e.Y36(M.z),e.Y36(C.g),e.Y36(Z.q),e.Y36(D.r),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-main"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Xe,5),e.Gf(en,5),e.Gf(nn,5),e.Gf(tn,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.episodeStreamLinksDialog=o.first),e.iGM(o=e.CRH())&&(t.episodeDownloadLinksDialog=o.first),e.iGM(o=e.CRH())&&(t.episodeRangeStreamLinksDialog=o.first),e.iGM(o=e.CRH())&&(t.episodeRangeDownloadLinksDialog=o.first)}},decls:17,vars:18,consts:[[3,"view","isLoading","searchValue","isLoadingChange","searchValueChange"],[4,"ngIf","ngIfElse"],["showAllTemplate",""],["episodeCard",""],["episodeRangeCard",""],[3,"title","links","linkClick","close"],["episodeStreamLinksDialog",""],["episodeDownloadLinksDialog",""],["linksKey","streamLinks",3,"title","episodes","linkClick","close"],["episodeRangeStreamLinksDialog",""],["linksKey","downloadLinks",3,"title","episodes","linkClick","close"],["episodeRangeDownloadLinksDialog",""],["mdcButton","","raised","","class","refresh-button","title","Refresh",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"day-title"],[1,"day-divider"],[1,"custom-card-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"episode","streamLinksClick","downloadLinksClick"],[3,"episodeRange","streamLinksClick","downloadLinksClick"],["mdcButton","","raised","","title","Refresh",1,"refresh-button",3,"click"],["mdcButtonIcon","",1,"material-icons"]],template:function(n,t){if(1&n&&(e.TgZ(0,"app-layout",0),e.NdJ("isLoadingChange",function(a){return t.isLoading=a})("searchValueChange",function(a){return t.searchValue=a})("searchValueChange",function(a){return t.search(a)}),e.YNc(1,rn,2,1,"ng-container",1),e.YNc(2,ln,2,1,"ng-template",null,2,e.W1O),e.YNc(4,dn,1,1,"ng-template",null,3,e.W1O),e.YNc(6,pn,1,1,"ng-template",null,4,e.W1O),e.TgZ(8,"episode-choose-link-dialog",5,6),e.NdJ("linkClick",function(){return t.markEpisodeAsViewed(t.selectedEpisode)})("close",function(){return t.selectedEpisode=null}),e.qZA(),e.TgZ(10,"episode-choose-link-dialog",5,7),e.NdJ("linkClick",function(){return t.markEpisodeAsViewed(t.selectedEpisode)})("close",function(){return t.selectedEpisode=null}),e.qZA(),e.TgZ(12,"episode-range-choose-link-dialog",8,9),e.NdJ("linkClick",function(a){return t.markEpisodeAsViewed(a)})("close",function(){return t.selectedEpisodeRange=null}),e.qZA(),e.TgZ(14,"episode-range-choose-link-dialog",10,11),e.NdJ("linkClick",function(a){return t.markEpisodeAsViewed(a)})("close",function(){return t.selectedEpisodeRange=null}),e.qZA()(),e.YNc(16,gn,3,0,"button",12)),2&n){const o=e.MAs(3);e.Q6J("view",t.view)("isLoading",t.isLoading)("searchValue",t.searchValue),e.xp6(1),e.Q6J("ngIf",t.settings.displayEpisodesDayByDay)("ngIfElse",o),e.xp6(7),e.Q6J("title","Choose a stream link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.streamLinks)||e.DdM(14,O)),e.xp6(2),e.Q6J("title","Choose a download link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.downloadLinks)||e.DdM(15,O)),e.xp6(2),e.Q6J("title","Choose a stream link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||e.DdM(16,O)),e.xp6(2),e.Q6J("title","Choose a download link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||e.DdM(17,O)),e.xp6(2),e.Q6J("ngIf",!t.isLoading)}},directives:[V,d.O5,d.sg,d.tP,De,Ue,Ye,$e,r.S8],pipes:[We],styles:[".custom-card-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-flow:row wrap;padding-top:24px;padding-left:16px;padding-right:16px}.custom-card-container[_ngcontent-%COMP%]:empty{display:none}.day-title[_ngcontent-%COMP%]{margin:0 0 5px 28px;font-size:18px;font-weight:400}.day-title[_ngcontent-%COMP%]:first-of-type{margin-top:20px}.day-divider[_ngcontent-%COMP%]{margin:0 0 0 28px;width:calc(100% - 56px);border-bottom:1px solid rgba(0,0,0,.12);height:0}.refresh-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;padding:0;border-radius:50%;min-height:45px;min-width:45px;transition:all .3s ease-in-out}.refresh-button[_ngcontent-%COMP%]:hover{transform:rotate(270deg)}"]}),i})();var un=c(1018);function _n(i,s){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const n=s.$implicit;e.Q6J("value",n.number),e.xp6(1),e.hij(" ",n.number," ")}}function fn(i,s){if(1&i){const n=e.EpF();e.ynx(0),e.TgZ(1,"li",14)(2,"span",15)(3,"button",16),e.NdJ("onChange",function(o){const l=e.CHM(n).$implicit;return e.oxw().toggleFavorite(l,o)}),e.qZA()(),e.TgZ(4,"span",17),e._uU(5),e.qZA(),e.TgZ(6,"span",18)(7,"div",19)(8,"select",20),e.YNc(9,_n,2,2,"option",21),e.qZA(),e.TgZ(10,"label",22),e._uU(11,"Last viewed episodes"),e.qZA()()()(),e._UZ(12,"li",23),e.BQk()}if(2&i){const n=s.$implicit;e.xp6(3),e.Q6J("on",n.isFavorite),e.xp6(2),e.hij(" ",n.title," "),e.xp6(3),e.Q6J("ngModel",n.episodes[0].number),e.xp6(1),e.Q6J("ngForOf",n.episodes)}}let hn=(()=>{class i{constructor(n,t,o,a,l){this.viewedEpisodes=n,this.favoriteAnimes=t,this.settings=o,this.debug=a,this.route=l,this.isLoading=!1,this.searchValue=null,this.viewedAnimes=[],this.allViewedAnimes=[],this.tabs={All:"all",Favorites:"favorites"},this.activeTab=this.tabs.All,this.count={all:0,favorites:0},this.infiniteScroll={initial:50,max:50,step:50},this.componentDestroy=new L.x}ngOnInit(){return(0,Q.mG)(this,void 0,void 0,function*(){(yield this.viewedEpisodes.getAsync()).forEach(t=>{const o=this.allViewedAnimes.findIndex(a=>(0,b.T0)(a.title,t.animeTitle,this.settings.episodeSimilarityDegree));o>-1?this.allViewedAnimes[o].episodes.find(a=>a.number===t.number)?this.debug.warn("Duplicate viewed episode found:",t):(this.allViewedAnimes[o].episodes.push(t),this.allViewedAnimes[o].episodes=this.allViewedAnimes[o].episodes.sort((a,l)=>l.number-a.number)):this.allViewedAnimes.push({title:t.animeTitle,episodes:[t],isFavorite:this.favoriteAnimes.isFavorite(t.animeTitle)})}),this.viewedAnimes=this.allViewedAnimes,this.count={all:this.allViewedAnimes.length,favorites:this.allViewedAnimes.filter(t=>t.isFavorite).length},this.route.params.pipe((0,A.R)(this.componentDestroy)).subscribe(t=>{this.searchValue=t.search||"",this.debug.log("Search value:",this.searchValue),this.searchValue.length&&this.search(this.searchValue)})})}ngOnDestroy(){this.componentDestroy.next(),this.componentDestroy.complete()}search(n){this.debug.log("Searching for:",n),this.filterAnimes(),this.isLoading=!1}filterAnimes(){var n;let t=[];t=(null===(n=this.searchValue)||void 0===n?void 0:n.length)?this.allViewedAnimes.filter(a=>(0,b.T0)(a.title,this.searchValue,this.settings.episodeSimilarityDegree)):this.allViewedAnimes;const o=t.filter(a=>a.isFavorite);this.count={all:t.length,favorites:o.length},this.activeTab===this.tabs.Favorites&&(t=o),this.viewedAnimes=t,this.infiniteScroll.max=this.infiniteScroll.initial}switchTab(n){this.activeTab=n,this.filterAnimes()}toggleFavorite(n,t){t?(this.favoriteAnimes.add(n.title),n.isFavorite=!0):(this.favoriteAnimes.remove(n.title),n.isFavorite=!1)}onScroll(){this.infiniteScroll.max+=this.infiniteScroll.step}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(M.z),e.Y36(T.S),e.Y36(C.g),e.Y36(D.r),e.Y36(m.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-viewed"]],decls:19,vars:8,consts:[[3,"isLoading","searchValue","isLoadingChange","searchValueChange"],["mdcDialogBody",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"activate"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],["infiniteScroll","",1,"tab-content",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["mdcListGroup",""],["mdcList","",3,"nonInteractive"],[4,"ngFor","ngForOf"],["mdcListItem",""],["mdcListItemGraphic",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["mdcListItemText",""],["mdcListItemMeta",""],["mdcSelect","","outlined",""],["mdcSelectControl","",3,"ngModel"],["disabled","",3,"value",4,"ngFor","ngForOf"],["mdcFloatingLabel",""],["mdcListDivider",""],["disabled","",3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"app-layout",0),e.NdJ("isLoadingChange",function(a){return t.isLoading=a})("searchValueChange",function(a){return t.searchValue=a})("searchValueChange",function(a){return t.search(a)}),e.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"a",4),e._uU(5," navigate_before "),e.qZA()(),e.TgZ(6,"div",5)(7,"nav",6)(8,"a",7),e.NdJ("activate",function(){return t.switchTab(t.tabs.All)}),e._uU(9),e.qZA(),e.TgZ(10,"a",7),e.NdJ("activate",function(){return t.switchTab(t.tabs.Favorites)}),e._uU(11),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._uU(14," navigate_next "),e.qZA()()(),e.TgZ(15,"div",10),e.NdJ("scrolled",function(){return t.onScroll()}),e.TgZ(16,"div",11)(17,"ul",12),e.YNc(18,fn,13,4,"ng-container",13),e.qZA()()()()()),2&n&&(e.Q6J("isLoading",t.isLoading)("searchValue",t.searchValue),e.xp6(9),e.hij("All (",t.count.all,")"),e.xp6(2),e.hij("Favorites (",t.count.favorites,")"),e.xp6(4),e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50),e.xp6(2),e.Q6J("nonInteractive",!0),e.xp6(1),e.Q6J("ngForOf",t.viewedAnimes.slice(0,t.infiniteScroll.max)))},directives:[V,r.OJ,r.Cm,r.Qx,r.Cn,r.on,r.Io,r.f3,r.ru,un.R,r.mB,r.l0,d.sg,r.DF,r.NZ,I,r.p9,r.gd,r.tM,r.FW,u.EJ,u.JJ,u.On,u.YN,u.Kr,r.gp,r.P],styles:["[mdcDialogBody][_ngcontent-%COMP%]{padding:0}[mdcListItem][_ngcontent-%COMP%]{margin:0 10px}.tab-content[_ngcontent-%COMP%]{margin-top:20px}.red-heart[_ngcontent-%COMP%]{color:#e25555}[mdcSelect][_ngcontent-%COMP%]{min-width:200px}[mdcSelect][_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}[mdcSelect][_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline__idle[_ngcontent-%COMP%]{transition:none}"]}),i})();const Cn=[{path:"",component:mn},{path:"viewed",children:[...[":search",""].map(i=>({path:i,component:hn}))]}];let vn=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild(Cn)],m.Bz]}),i})();var S=c(2271);let z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,S.m,m.Bz]]}),i})(),kn=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,S.m,z,m.Bz]]}),i})(),wn=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,vn,S.m,z,kn]]}),i})()}}]);