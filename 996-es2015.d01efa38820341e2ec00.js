(self.webpackChunkanime_tracker=self.webpackChunkanime_tracker||[]).push([[996],{8996:function(e,t,n){"use strict";n.r(t),n.d(t,{PopupModule:function(){return ot}});var i=n(8583),o=n(5263),s=n(5427),a=n(3470),r=n(7709),c=n(5491),l=n(6782),d=n(4056),g=n(639),p=n(961),u=n(8604),h=n(1942),m=n(452),f=n(4071),v=n(3631),C=n(9744),b=n(2593),w=n(3342),k=n(7393),x=n(1456);class Z{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new _(e,this.dueTime,this.scheduler))}}class _ extends k.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(O,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function O(e){e.debouncedNext()}class A{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new T(e,this.compare,this.keySelector))}}class T extends k.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var M=n(3679);function y(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"i",4),g.NdJ("mousedown",function(e){return e.preventDefault()})("click",function(){return g.CHM(e),g.oxw().clear()}),g._uU(1,"close"),g.qZA()}}let P=(()=>{class e{constructor(){this.placeholder="Search...",this.value=null,this.valueChange=new g.vpe,this.inputChange=new r.xQ,this.tap=new g.vpe}ngOnInit(){this.inputChange.pipe((0,w.b)(()=>this.tap.emit()),function(e,t=x.P){return n=>n.lift(new Z(e,t))}(700),e=>e.lift(new A(void 0,void 0))).subscribe(e=>{this.valueChange.emit(e)})}ngOnDestroy(){this.inputChange.complete()}onInput(){this.inputChange.next(this.value)}clear(){this.value=null,this.inputChange.next(this.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange",tap:"tap"},decls:5,vars:3,consts:[["mdcTextField","","box","true",1,"search-input"],["mdcTextFieldIcon","",1,"material-icons"],["mdcTextFieldInput","","type","text",3,"placeholder","ngModel","ngModelChange","input"],["mdcTextFieldIcon","","class","material-icons close",3,"mousedown","click",4,"ngIf"],["mdcTextFieldIcon","",1,"material-icons","close",3,"mousedown","click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"i",1),g._uU(2,"search"),g.qZA(),g.TgZ(3,"input",2),g.NdJ("ngModelChange",function(e){return t.value=e})("input",function(){return t.onInput()}),g.qZA(),g.YNc(4,y,2,0,"i",3),g.qZA()),2&e&&(g.xp6(3),g.Q6J("placeholder",t.placeholder)("ngModel",t.value),g.xp6(1),g.Q6J("ngIf",null==t.value?null:t.value.length))},directives:[b.aY,b.aF,b.wC,M.Fj,M.JJ,M.On,i.O5],styles:[".search-input[_ngcontent-%COMP%]{position:relative;margin:0 0 0 16px;height:auto;border-radius:4px;background-color:hsla(0,0%,100%,.15)}.search-input[_ngcontent-%COMP%]:before{display:none}.search-input[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{color:#fff;bottom:6px}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]{right:12px;left:auto;font-size:1.1em;padding:3px;text-align:center;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms;border-radius:50%;cursor:pointer;pointer-events:all}.search-input[_ngcontent-%COMP%]   i.material-icons.close[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.08)}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;caret-color:#fff;width:200px;padding:8px 40px 8px 48px;transition:width .3s cubic-bezier(.4,0,.2,1) 0ms;border:0;height:1.1875em;margin:0;display:block;min-width:0;background:none;box-sizing:content-box}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:260px;outline:0}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff;opacity:.42;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0ms}.search-input[_ngcontent-%COMP%]     .mdc-line-ripple{display:none}"]}),e})();function q(e,t){if(1&e&&(g.TgZ(0,"span",3),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.hij(" ",e.badge," ")}}const L=["*"];let D=(()=>{class e{constructor(){this.class="",this.label="",this.title="",this.badge=null,this.click=new g.vpe}ngOnInit(){}onClick(e){this.click.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-badge-button"]],inputs:{class:"class",label:"label",title:"title",badge:"badge"},outputs:{click:"click"},ngContentSelectors:L,decls:4,vars:5,consts:[[1,"badge-button-container",3,"click"],["mdcTopAppBarAction","",3,"label","title","click"],["class","badge",4,"ngIf"],[1,"badge"]],template:function(e,t){1&e&&(g.F$t(),g.TgZ(0,"span",0),g.NdJ("click",function(e){return e.stopPropagation()}),g.TgZ(1,"button",1),g.NdJ("click",function(e){return t.onClick(e)}),g.Hsn(2),g.qZA(),g.YNc(3,q,2,1,"span",2),g.qZA()),2&e&&(g.xp6(1),g.Tol(t.class),g.Q6J("label",t.label)("title",t.title),g.xp6(2),g.Q6J("ngIf",t.badge))},directives:[b.Y4,i.O5],styles:[".badge-button-container[_ngcontent-%COMP%]{display:flex;position:relative}.badge[_ngcontent-%COMP%]{min-width:20px;height:20px;display:flex;padding:0 6px;z-index:1;position:absolute;top:0;right:0;flex-wrap:wrap;font-size:.75rem;box-sizing:border-box;transition:transform 225ms cubic-bezier(.4,0,.2,1) 0ms;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1;align-content:center;border-radius:10px;flex-direction:row;justify-content:center;color:#fff;background-color:#e25555}"]}),e})();var J=n(5360);let S=(()=>{class e extends i.uU{constructor(){super("en")}transform(e,t,n,i){return super.transform(e,t||"dd MMMM yyyy HH:mm",n,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g.Yjl({name:"datetime",type:e,pure:!0}),e})();const I=function(e){return{$implicit:e}};function E(e,t){if(1&e&&(g.TgZ(0,"nav",5),g.TgZ(1,"a",6),g.GkF(2,7),g.TgZ(3,"span",8),g._uU(4),g.TgZ(5,"span",9),g._uU(6),g.ALo(7,"datetime"),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"hr",10),g.qZA()),2&e){const e=t.$implicit,n=g.oxw(2),i=g.MAs(2);g.xp6(1),g.ekj("unread",e.status===n.notificationStatus.Unread),g.xp6(1),g.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",g.VKq(9,I,e)),g.xp6(1),g.uIk("title",e.message),g.xp6(1),g.hij(" ",e.message," "),g.xp6(2),g.Oqu(g.lcZ(7,7,e.date))}}function N(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"div",3),g.YNc(2,E,9,11,"nav",4),g.qZA(),g.BQk()),2&e){const e=g.oxw();g.xp6(2),g.Q6J("ngForOf",e.notifications.get())}}function F(e,t){1&e&&(g.TgZ(0,"i",16),g._uU(1,"check_circle"),g.qZA())}function U(e,t){1&e&&(g.TgZ(0,"i",17),g._uU(1,"info"),g.qZA())}function Q(e,t){1&e&&(g.TgZ(0,"i",18),g._uU(1,"error"),g.qZA())}function V(e,t){1&e&&(g.TgZ(0,"i",17),g._uU(1,"info"),g.qZA())}function B(e,t){if(1&e&&(g.ynx(0,11),g.YNc(1,F,2,0,"i",12),g.YNc(2,U,2,0,"i",13),g.YNc(3,Q,2,0,"i",14),g.YNc(4,V,2,0,"i",15),g.BQk()),2&e){const e=t.$implicit,n=g.oxw();g.Q6J("ngSwitch",e.type),g.xp6(1),g.Q6J("ngSwitchCase",n.notificationTypes.Success),g.xp6(1),g.Q6J("ngSwitchCase",n.notificationTypes.Info),g.xp6(1),g.Q6J("ngSwitchCase",n.notificationTypes.Error)}}function R(e,t){1&e&&(g.TgZ(0,"div",19),g.TgZ(1,"i",20),g._uU(2,"notifications_off"),g.qZA(),g.qZA())}let Y=(()=>{class e{constructor(e){this.notifications=e,this.notificationTypes=J.k,this.notificationStatus=J.E}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(C.T))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-notifications"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["notificationIconTpl",""],["noNotificationsTpl",""],["mdcListGroup",""],["mdcList","",4,"ngFor","ngForOf"],["mdcList",""],["mdcListItem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mdcListItemText",""],["mdcListItemSecondaryText",""],["mdcListDivider",""],[3,"ngSwitch"],["mdcListItemGraphic","","class","material-icons success","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons error","aria-hidden","true",4,"ngSwitchCase"],["mdcListItemGraphic","","class","material-icons info","aria-hidden","true",4,"ngSwitchDefault"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","success"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","info"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons","error"],[1,"no-notifications-container"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"]],template:function(e,t){if(1&e&&(g.YNc(0,N,3,1,"ng-container",0),g.YNc(1,B,5,4,"ng-template",null,1,g.W1O),g.YNc(3,R,3,0,"ng-template",null,2,g.W1O)),2&e){const e=g.MAs(4);g.Q6J("ngIf",t.notifications.get().length>0)("ngIfElse",e)}},directives:[i.O5,b.mB,i.sg,b.l0,b.DF,i.tP,b.p9,b.wP,b.P,i.RF,i.n9,i.ED,b.NZ],pipes:[S],styles:[".error[_ngcontent-%COMP%]{color:#e25555}.info[_ngcontent-%COMP%]{color:#0275d8}.success[_ngcontent-%COMP%]{color:#28a745}.unread[_ngcontent-%COMP%]{background-color:#ecf8fe}.no-notifications-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.no-notifications-container[_ngcontent-%COMP%] > .material-icons[_ngcontent-%COMP%]{font-size:34px;margin:0;cursor:default}"]}),e})();const z=function(){return["/"]},H=function(e){return{view:e}};function j(e,t){if(1&e&&(g.TgZ(0,"a",30),g._uU(1," looks_one "),g.qZA()),2&e){const e=g.oxw();g.Tol(e.view===e.views.FirstEpisodes?"material-icons":"material-icons-outlined"),g.Q6J("routerLink",g.DdM(5,z))("queryParams",g.VKq(6,H,e.view===e.views.FirstEpisodes?e.views.Latest:e.views.FirstEpisodes))("title",e.view===e.views.FirstEpisodes?"Show all":"Show first episodes")}}function G(e,t){if(1&e&&(g.TgZ(0,"a",31),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.Q6J("routerLink",g.DdM(4,z))("queryParams",g.VKq(5,H,e.view===e.views.Favorites?e.views.Latest:e.views.Favorites))("title",e.view===e.views.Favorites?"Show all":"Show favorites"),g.xp6(1),g.hij(" ",e.view===e.views.Favorites?"favorite":"favorite_border"," ")}}const K=function(){return["/viewed"]},$=function(){return["/settings"]},W=["*"];let X=(()=>{class e{constructor(e,t,n,i){this.router=e,this.debug=t,this.settings=n,this.notifications=i,this.openMenu=!1,this.openNotifications=!1,this.wasNotificationsOpened=!1,this.view=null,this.isLoading=!1,this.isLoadingChange=new g.vpe,this.searchValue=null,this.searchValueChange=new g.vpe,this.views=c.G,this.debug.log("Router url:",this.router.url)}ngOnInit(){}toggleMenu(){this.openMenu=!this.openMenu}closeMenu(){this.openMenu=!1}toggleNotifications(){this.openNotifications=!this.openNotifications,this.wasNotificationsOpened=this.openNotifications}onOpenNotificationsChange(e){!e&&this.wasNotificationsOpened&&this.notifications.markAllAsRead()}onSearchTap(){this.isLoading=!0,this.isLoadingChange.emit(this.isLoading)}onSearchValueChange(e){this.searchValueChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(o.F0),g.Y36(v.r),g.Y36(m.g),g.Y36(C.T))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-layout"]],inputs:{view:"view",isLoading:"isLoading",searchValue:"searchValue"},outputs:{isLoadingChange:"isLoadingChange",searchValueChange:"searchValueChange"},ngContentSelectors:W,decls:52,vars:35,consts:[[1,"page"],["viewport",""],["mdcDrawerContainer","temporary",3,"open","openChange"],["mdcDrawer",""],["mdcDrawerToolbarSpacer",""],["mdcDrawerContent","","mdcListGroup",""],["mdcList",""],["mdcListItem","",3,"routerLink","queryParams","selected","click"],["mdcListItemGraphic","","aria-hidden","true",1,"material-icons"],["mdcListDivider",""],["mdcListItem","",3,"routerLink","selected","click"],[1,"content"],["mdcTopAppBar","",3,"viewport","fixedAdjust"],["mdcTopAppBarRow",""],["mdcTopAppBarSection","","alignStart",""],["mdcTopAppBarNavIcon","",1,"material-icons",3,"click"],["mdcTopAppBarTitle","","title","Anime Tracker",3,"routerLink"],["alt","logo","src","assets/icons/128.png"],[3,"value","valueChange","tap"],["mdcTopAppBarSection","","alignEnd",""],["mdcTopAppBarAction","","label","Show first episodes",3,"routerLink","queryParams","title","class",4,"ngIf"],["mdcTopAppBarAction","","class","material-icons","label","Show favorites",3,"routerLink","queryParams","title",4,"ngIf"],["label","Notifications","title","Notifications",1,"material-icons",3,"badge","click"],["mdcTopAppBarAction","","label","Settings","title","Settings",1,"material-icons",3,"routerLink"],["mdcLinearProgress","",3,"indeterminate","closed"],["content",""],["mdcDrawerContainer","temporary",1,"right",3,"open","openChange"],["mdcDrawerHeader",""],["mdcDrawerHeaderContent",""],["mdcDrawerContent",""],["mdcTopAppBarAction","","label","Show first episodes",3,"routerLink","queryParams","title"],["mdcTopAppBarAction","","label","Show favorites",1,"material-icons",3,"routerLink","queryParams","title"]],template:function(e,t){if(1&e&&(g.F$t(),g.TgZ(0,"div",0,1),g.TgZ(2,"aside",2),g.NdJ("openChange",function(e){return t.openMenu=e}),g.TgZ(3,"nav",3),g._UZ(4,"div",4),g.TgZ(5,"div",5),g.TgZ(6,"nav",6),g.TgZ(7,"a",7),g.NdJ("click",function(){return t.closeMenu()}),g.TgZ(8,"i",8),g._uU(9,"star"),g.qZA(),g._uU(10,"Latest "),g.qZA(),g.TgZ(11,"a",7),g.NdJ("click",function(){return t.closeMenu()}),g.TgZ(12,"i",8),g._uU(13,"favorite"),g.qZA(),g._uU(14,"Favorites "),g.qZA(),g.TgZ(15,"a",7),g.NdJ("click",function(){return t.closeMenu()}),g.TgZ(16,"i",8),g._uU(17,"looks_one"),g.qZA(),g._uU(18,"First episodes "),g.qZA(),g.qZA(),g._UZ(19,"hr",9),g.TgZ(20,"nav",6),g.TgZ(21,"a",10),g.NdJ("click",function(){return t.closeMenu()}),g.TgZ(22,"i",8),g._uU(23,"visibility"),g.qZA(),g._uU(24,"Viewed "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(25,"div",11),g.TgZ(26,"header",12),g.TgZ(27,"div",13),g.TgZ(28,"section",14),g.TgZ(29,"button",15),g.NdJ("click",function(){return t.toggleMenu()}),g._uU(30," menu "),g.qZA(),g.TgZ(31,"a",16),g._UZ(32,"img",17),g.qZA(),g.TgZ(33,"app-search-input",18),g.NdJ("valueChange",function(e){return t.searchValue=e})("tap",function(){return t.onSearchTap()})("valueChange",function(e){return t.onSearchValueChange(e)}),g.qZA(),g.qZA(),g.TgZ(34,"section",19),g.YNc(35,j,2,8,"a",20),g.YNc(36,G,2,7,"a",21),g.TgZ(37,"app-badge-button",22),g.NdJ("click",function(){return t.toggleNotifications()}),g._uU(38," notifications "),g.qZA(),g.TgZ(39,"a",23),g._uU(40," settings "),g.qZA(),g.qZA(),g.qZA(),g._UZ(41,"div",24),g.qZA(),g.TgZ(42,"main",null,25),g.Hsn(44),g.qZA(),g.qZA(),g.TgZ(45,"aside",26),g.NdJ("openChange",function(e){return t.openNotifications=e})("openChange",function(e){return t.onOpenNotificationsChange(e)}),g.TgZ(46,"nav",3),g._UZ(47,"div",4),g.TgZ(48,"div",27),g.TgZ(49,"div",28),g._uU(50,"Notifications"),g.qZA(),g.qZA(),g._UZ(51,"app-notifications",29),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.MAs(1),n=g.MAs(43);g.xp6(2),g.Q6J("open",t.openMenu),g.xp6(5),g.Q6J("routerLink",g.DdM(23,z))("queryParams",g.VKq(24,H,t.views.Latest))("selected",t.view===t.views.Latest),g.xp6(4),g.Q6J("routerLink",g.DdM(26,z))("queryParams",g.VKq(27,H,t.views.Favorites))("selected",t.view===t.views.Favorites),g.xp6(4),g.Q6J("routerLink",g.DdM(29,z))("queryParams",g.VKq(30,H,t.views.FirstEpisodes))("selected",t.view===t.views.FirstEpisodes),g.xp6(6),g.Q6J("routerLink",g.DdM(32,K))("selected",t.router.url.startsWith("/viewed")),g.xp6(5),g.Q6J("viewport",e)("fixedAdjust",n),g.xp6(5),g.Q6J("routerLink",g.DdM(33,z)),g.xp6(2),g.Q6J("value",t.searchValue),g.xp6(2),g.Q6J("ngIf",t.settings.openInNewTab),g.xp6(1),g.Q6J("ngIf",t.settings.openInNewTab),g.xp6(1),g.Q6J("badge",t.notifications.unreadCount),g.xp6(2),g.Q6J("routerLink",g.DdM(34,$)),g.xp6(2),g.Q6J("indeterminate",!0)("closed",!t.isLoading),g.xp6(4),g.Q6J("open",t.openNotifications)}},directives:[b.Cq,b.Es,b.Ar,b.n3,b.mB,b.l0,o.yS,b.DF,b.NZ,b.P,b.eD,b.JF,b.B_,b.cH,b.K,P,i.O5,D,b.Y4,b.bR,b.pA,b.v1,Y],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}[mdcTopAppBar][_ngcontent-%COMP%]{position:fixed!important}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]{height:60px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]{display:flex;padding:0 10px}[mdcTopAppBar][_ngcontent-%COMP%]   [mdcTopAppBarRow][_ngcontent-%COMP%]   [mdcTopAppBarTitle][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}[mdcDrawerHeader][_ngcontent-%COMP%], [mdcDrawerToolbarSpacer][_ngcontent-%COMP%]{background-color:#6200ee;background-color:var(--mdc-theme-primary,#6200ee);color:#fff;color:var(--mdc-theme-on-primary,#fff);height:60px}[mdcDrawerContainer].right[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{left:auto;right:0;transform:translateX(calc(100% + 20px))}[mdcDrawerContainer].right.mdc-drawer--open[_ngcontent-%COMP%] > [mdcDrawer][_ngcontent-%COMP%]{transform:none}.content[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;flex-grow:1;height:100%;box-sizing:border-box}[mdcLinearProgress].mdc-linear-progress--closed[_ngcontent-%COMP%]{display:none}[mdcLinearProgress][_ngcontent-%COMP%]   .mdc-linear-progress__bar-inner[_ngcontent-%COMP%]{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}"]}),e})();function ee(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",4),g.TgZ(1,"span",5),g._uU(2),g.qZA(),g.TgZ(3,"a",6),g.NdJ("click",function(t){const n=g.CHM(e).$implicit;return g.oxw(2).onClick(t,n.url)}),g._uU(4),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,n=g.oxw(2);g.xp6(1),g.Q6J("ngClass",n.langColors[e.lang.toLowerCase()]||""),g.xp6(1),g.Oqu(e.lang),g.xp6(1),g.Q6J("href",e.url,g.LSH),g.xp6(1),g.Oqu(e.url)}}function te(e,t){if(1&e&&(g.TgZ(0,"ul",2),g.YNc(1,ee,5,4,"li",3),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.links)}}function ne(e,t){1&e&&(g.TgZ(0,"div",7),g._uU(1,"No available links."),g.qZA())}let ie=(()=>{class e{constructor(e,t){this.settings=e,this.browser=t,this.links=[],this.linkClick=new g.vpe,this.langColors={vostfr:"blue",vostar:"yellow",vosten:"dark",vf:"green"}}ngOnInit(){}onClick(e,t){this.linkClick.emit(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(t,!this.settings.openLinksInInactiveTabs))}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.g),g.Y36(f.q))},e.\u0275cmp=g.Xpm({type:e,selectors:[["episode-link-list"]],inputs:{links:"links"},outputs:{linkClick:"linkClick"},decls:3,vars:2,consts:[["mdcList","",4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcList",""],["mdcListItem","",4,"ngFor","ngForOf"],["mdcListItem",""],[1,"badge",3,"ngClass"],["target","_blank",1,"link",3,"href","click"],[1,"empty-text"]],template:function(e,t){if(1&e&&(g.YNc(0,te,2,1,"ul",0),g.YNc(1,ne,2,0,"ng-template",null,1,g.W1O)),2&e){const e=g.MAs(2);g.Q6J("ngIf",null==t.links?null:t.links.length)("ngIfElse",e)}},directives:[i.O5,b.l0,i.sg,b.DF,i.mk],styles:["[mdcList][_ngcontent-%COMP%]{padding:12px 0}.badge[_ngcontent-%COMP%]{padding:2px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase;background:#6c757d;margin-right:10px;border-radius:2px;min-width:90px;text-align:center}.badge.blue[_ngcontent-%COMP%]{background:#0061aa}.badge.dark[_ngcontent-%COMP%]{background:#34393f}.badge.pink[_ngcontent-%COMP%]{background:#b83280}.badge.green[_ngcontent-%COMP%]{background:#38a169}.badge.red[_ngcontent-%COMP%]{background:#c53030}.badge.purple[_ngcontent-%COMP%]{background:#6b46c1}.badge.orange[_ngcontent-%COMP%]{background:#c05621}.badge.yellow[_ngcontent-%COMP%]{background:#fec107;color:#1b0e00}.link[_ngcontent-%COMP%]{font-size:15px;font-weight:500;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}"]}),e})();const oe=["dialog"];let se=(()=>{class e{constructor(){this.title="Choose a link",this.links=[],this.linkClick=new g.vpe,this.close=new g.vpe}ngOnInit(){}open(){this.dialog.open()}onClose(){this.close.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["episode-choose-link-dialog"]],viewQuery:function(e,t){if(1&e&&g.Gf(oe,5),2&e){let e;g.iGM(e=g.CRH())&&(t.dialog=e.first)}},inputs:{title:"title",links:"links"},outputs:{linkClick:"linkClick",close:"close"},decls:12,vars:3,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[3,"links","linkClick"],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""]],template:function(e,t){1&e&&(g.TgZ(0,"aside",0,1),g.NdJ("cancel",function(){return t.onClose()}),g.TgZ(2,"div",2),g.TgZ(3,"header",3),g.TgZ(4,"h2",4),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"section",5),g.TgZ(7,"episode-link-list",6),g.NdJ("linkClick",function(){return t.linkClick.emit()}),g.qZA(),g.qZA(),g.TgZ(8,"footer",7),g.TgZ(9,"button",8),g._uU(10,"Close"),g.qZA(),g.qZA(),g.qZA(),g._UZ(11,"div",9),g.qZA()),2&e&&(g.xp6(5),g.AsE(" ",t.title," ",(null==t.links?null:t.links.length)>1?"("+t.links.length+")":""," "),g.xp6(2),g.Q6J("links",t.links))},directives:[b.zv,b.SU,b.e6,b.d8,b.fw,b.OJ,ie,b.zL,b.S8,b.LC,b.SG],styles:[""]}),e})();const ae=["dialog"];function re(e,t){1&e&&(g.TgZ(0,"span",23),g._uU(1,"visibility"),g.qZA())}function ce(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"a",21),g.NdJ("activate",function(){const t=g.CHM(e).index;return g.oxw(2).activeIndex=t}),g._uU(1),g.YNc(2,re,2,0,"span",22),g.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=g.oxw(2);g.ekj("mdc-ripple-upgraded--background-focused",i.activeIndex===n),g.Q6J("active",i.activeIndex===n),g.xp6(1),g.hij(" ",e.number," "),g.xp6(1),g.Q6J("ngIf",e.isViewed)}}function le(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"div",11),g.TgZ(2,"div",12),g.TgZ(3,"a",13),g._uU(4," navigate_before "),g.qZA(),g.qZA(),g.TgZ(5,"div",14),g.TgZ(6,"nav",15),g.YNc(7,ce,3,5,"a",16),g.qZA(),g.qZA(),g.TgZ(8,"div",17),g.TgZ(9,"a",18),g._uU(10," navigate_next "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"div",19),g.TgZ(12,"episode-link-list",20),g.NdJ("linkClick",function(){g.CHM(e);const t=g.oxw();return t.linkClick.emit(t.episodes[t.activeIndex])}),g.qZA(),g.qZA(),g.BQk()}if(2&e){const e=g.oxw();g.xp6(7),g.Q6J("ngForOf",e.episodes),g.xp6(5),g.Q6J("links",e.episodes[e.activeIndex][e.linksKey])}}function de(e,t){1&e&&(g.TgZ(0,"div",24),g._uU(1,"No available links."),g.qZA())}let ge=(()=>{class e{constructor(){this.title="Choose a link",this.episodes=[],this.linksKey="streamLinks",this.linkClick=new g.vpe,this.close=new g.vpe,this.activeIndex=0}ngOnInit(){}open(){this.dialog.open()}onClose(){this.activeIndex=0,this.close.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["episode-range-choose-link-dialog"]],viewQuery:function(e,t){if(1&e&&g.Gf(ae,5),2&e){let e;g.iGM(e=g.CRH())&&(t.dialog=e.first)}},inputs:{title:"title",episodes:"episodes",linksKey:"linksKey"},outputs:{linkClick:"linkClick",close:"close"},decls:14,vars:4,consts:[["mdcDialog","","mdcFocusTrap","",3,"cancel"],["dialog","mdcDialog"],["mdcDialogSurface",""],["mdcDialogHeader",""],["mdcDialogHeaderTitle",""],["mdcDialogBody","","scrollable",""],[4,"ngIf","ngIfElse"],["emptyTemplate",""],["mdcDialogFooter",""],["mdcButton","","mdcDialogCancel",""],["mdcDialogBackdrop",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"active","mdc-ripple-upgraded--background-focused","activate",4,"ngFor","ngForOf"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],[1,"tab-content"],[3,"links","linkClick"],["mdcTab","","tabindex","0",3,"active","activate"],["class","material-icons-outlined viewed-icon","title","Viewed",4,"ngIf"],["title","Viewed",1,"material-icons-outlined","viewed-icon"],[1,"empty-text"]],template:function(e,t){if(1&e&&(g.TgZ(0,"aside",0,1),g.NdJ("cancel",function(){return t.onClose()}),g.TgZ(2,"div",2),g.TgZ(3,"header",3),g.TgZ(4,"h2",4),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"section",5),g.YNc(7,le,13,2,"ng-container",6),g.YNc(8,de,2,0,"ng-template",null,7,g.W1O),g.qZA(),g.TgZ(10,"footer",8),g.TgZ(11,"button",9),g._uU(12,"Close"),g.qZA(),g.qZA(),g.qZA(),g._UZ(13,"div",10),g.qZA()),2&e){const e=g.MAs(9);g.xp6(5),g.AsE(" ",t.title," ",null!=t.episodes&&t.episodes.length&&(null==t.episodes[t.activeIndex][t.linksKey]?null:t.episodes[t.activeIndex][t.linksKey].length)>1?"("+t.episodes[t.activeIndex][t.linksKey].length+")":""," "),g.xp6(2),g.Q6J("ngIf",null==t.episodes?null:t.episodes.length)("ngIfElse",e)}},directives:[b.zv,b.SU,b.e6,b.d8,b.fw,b.OJ,i.O5,b.zL,b.S8,b.LC,b.SG,b.Cm,b.Qx,b.Cn,b.on,b.Io,i.sg,b.ru,ie,b.f3],styles:["[mdcDialogBody][_ngcontent-%COMP%]{position:relative}[mdcTabBarScroller][_ngcontent-%COMP%]{position:sticky;top:0;left:0;background-color:#fff;z-index:1}.empty-text[_ngcontent-%COMP%]{display:block;text-align:center;padding-top:20px}.viewed-icon[_ngcontent-%COMP%]{color:#0275d8;vertical-align:middle;font-size:1.6em;margin-left:8px}"]}),e})(),pe=(()=>{class e{constructor(e){this.element=e,this.on=!1,this.titleOn="",this.titleOff="",this.classOn="",this.classOff="",this.onChange=new g.vpe}ngOnInit(){this.update()}ngOnChanges(e){e.on.isFirstChange()||this.update()}update(){var e,t,n,i;this.on?(this.element.nativeElement.innerHTML=this.iconOn,this.element.nativeElement.title=this.titleOn,(null===(e=this.classOff)||void 0===e?void 0:e.length)&&this.removeClass(this.classOff),(null===(t=this.classOn)||void 0===t?void 0:t.length)&&this.addClass(this.classOn)):(this.element.nativeElement.innerHTML=this.iconOff,this.element.nativeElement.title=this.titleOff,(null===(n=this.classOn)||void 0===n?void 0:n.length)&&this.removeClass(this.classOn),(null===(i=this.classOff)||void 0===i?void 0:i.length)&&this.addClass(this.classOff))}addClass(e){this.element.nativeElement.classList.add(e.split(" "))}removeClass(e){this.element.nativeElement.classList.remove(e.split(" "))}onClick(e){this.on=!this.on,this.onChange.emit(this.on)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq))},e.\u0275dir=g.lG2({type:e,selectors:[["","iconToggle",""]],hostBindings:function(e,t){1&e&&g.NdJ("click",function(e){return t.onClick(e)})},inputs:{iconOn:"iconOn",iconOff:"iconOff",on:"on",titleOn:"titleOn",titleOff:"titleOff",classOn:"classOn",classOff:"classOff"},outputs:{onChange:"onChange"},features:[g.TTD]}),e})();var ue=n(9075);let he=(()=>{class e{constructor(e){this.sanitizer=e}transform(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error(`SafePipe unable to bypass security for invalid type: ${t}`)}}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(ue.H7,16))},e.\u0275pipe=g.Yjl({name:"safe",type:e,pure:!0}),e})(),me=(()=>{class e{constructor(){}transform(e,t){switch(t){case"format":return`url("${e}")`;case"encode":return encodeURI(e);case"decode":return decodeURI(e);case"encodeAndFormat":return this.transform(this.transform(e,"encode"),"format");case"decodeAndFormat":return this.transform(this.transform(e,"decode"),"format");default:throw new Error(`UrlPipe unable to transform url for invalid action: ${t}`)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g.Yjl({name:"url",type:e,pure:!0}),e})();var fe=n(4762),ve=n(8324);let Ce=(()=>{class e{constructor(e,t){this.settings=e,this.scraper=t,this.getImageOrFallback=(e,t)=>new Promise(n=>{const i=new Image;i.src=e,i.onload=()=>n(e),i.onerror=()=>n(t)})}transform(e,t,n){return(0,fe.mG)(this,void 0,void 0,function*(){switch(t){case"resolveUrl":switch(n){case"image":if(!this.settings.proxy.shouldFetchImages)return e;const t=this.scraper.resolveUrl(e);return yield this.getImageOrFallback(e,t);default:return this.scraper.resolveUrl(e)}default:throw new Error(`ProxyPipe unable to transform value for invalid action: ${t}`)}})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.g,16),g.Y36(ve.V,16))},e.\u0275pipe=g.Yjl({name:"proxy",type:e,pure:!0}),e})();function be(e,t){1&e&&(g.ynx(0),g.TgZ(1,"i",16),g._uU(2,"movie"),g.qZA(),g.BQk())}function we(e,t){1&e&&(g.TgZ(0,"div",17),g.TgZ(1,"span"),g._uU(2,"New"),g.qZA(),g.qZA())}function ke(e,t){1&e&&(g.TgZ(0,"div",18),g.TgZ(1,"span"),g._uU(2,"End"),g.qZA(),g.qZA())}function xe(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",19,20),g.TgZ(2,"button",21),g.NdJ("click",function(){return g.CHM(e),g.MAs(5).open=!0}),g._uU(3," visibility "),g.qZA(),g.TgZ(4,"div",22,23),g.NdJ("openChange",function(t){return g.CHM(e),g.MAs(5).open=t}),g.TgZ(6,"ul",24),g.TgZ(7,"li",25),g.NdJ("click",function(){return g.CHM(e),g.oxw().markAsUnviewed()}),g._uU(8,"Mark as unviewed"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.MAs(1),t=g.MAs(5);g.oxw();const n=g.MAs(17);g.Udp("display","flex"),g.xp6(2),g.Udp("margin",0),g.xp6(2),g.Q6J("open",t.open)("menuAnchor",e)("viewport",n)}}function Ze(e,t){if(1&e&&(g.TgZ(0,"a",27),g.ALo(1,"safe"),g._uU(2," check_circle_outline "),g.qZA()),2&e){const e=g.oxw(2);g.Q6J("href",g.xi3(1,1,e.viewedEpisodes.getEpisodeUrl(e.episode),"resourceUrl"),g.LSH)}}function _e(e,t){if(1&e&&g.YNc(0,Ze,3,4,"a",26),2&e){const e=g.oxw();g.Q6J("ngIf",e.episode.isRegular)}}let Oe=(()=>{class e{constructor(e,t,n,i){this.settings=e,this.browser=t,this.favoriteAnimes=n,this.viewedEpisodes=i,this.streamLinksClick=new g.vpe,this.downloadLinksClick=new g.vpe}ngOnInit(){this.episode.isViewed=this.viewedEpisodes.isViewed(this.episode),this.episode.isRegular=this.viewedEpisodes.isRegular(this.episode)}onClick(e){if(this.episode.streamLinks.length>1)return e.preventDefault(),this.showStreamLinks(),!1;this.markAsViewed(),this.browser.isWebExtension&&(e.preventDefault(),this.browser.createTab(this.episode.streamLinks[0].url,!this.settings.openLinksInInactiveTabs))}showStreamLinks(){this.streamLinksClick.emit(this.episode)}showDownloadLinks(){this.downloadLinksClick.emit(this.episode)}toggleFavorite(e){e?this.favoriteAnimes.add(this.episode.anime.title):this.favoriteAnimes.remove(this.episode.anime.title)}isFavorite(){return this.favoriteAnimes.isFavorite(this.episode.anime.title)}markAsViewed(){this.episode.isViewed=!0,this.viewedEpisodes.add(this.episode)}markAsUnviewed(){this.episode.isViewed=!1,this.viewedEpisodes.remove(this.episode)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.g),g.Y36(f.q),g.Y36(u.S),g.Y36(h.z))},e.\u0275cmp=g.Xpm({type:e,selectors:[["episode-card"]],inputs:{episode:"episode"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:26,vars:25,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","target","_blank",3,"href","click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],["class","card-badge new",4,"ngIf"],["class","card-badge end",4,"ngIf"],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["mdcMenuAnchor","",3,"display",4,"ngIf","ngIfElse"],["isRegularTemplate",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],[1,"card-badge","end"],["mdcMenuAnchor",""],["anchor","mdcMenuAnchor"],["title","Viewed",1,"material-icons-outlined","mdc-icon-button","wider","blue-eye",3,"click"],["mdcMenu","",3,"open","menuAnchor","viewport","openChange"],["isViewedMenu",""],["mdcList",""],["mdcListItem","",3,"click"],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g.NdJ("click",function(e){return t.onClick(e)}),g.TgZ(2,"div",2),g.ALo(3,"safe"),g.ALo(4,"url"),g.ALo(5,"async"),g.ALo(6,"proxy"),g.TgZ(7,"div",3),g.TgZ(8,"h2",4),g.YNc(9,be,3,0,"ng-container",5),g._uU(10),g.qZA(),g.TgZ(11,"div",6),g.TgZ(12,"span"),g._uU(13),g.qZA(),g.qZA(),g.YNc(14,we,3,0,"div",7),g.YNc(15,ke,3,0,"div",8),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"div",9,10),g.YNc(18,xe,9,7,"div",11),g.YNc(19,_e,1,1,"ng-template",null,12,g.W1O),g.TgZ(21,"button",13),g.NdJ("onChange",function(e){return t.toggleFavorite(e)}),g.qZA(),g.TgZ(22,"button",14),g.NdJ("click",function(){return t.showStreamLinks()}),g._uU(23," play_circle_outline "),g.qZA(),g.TgZ(24,"button",15),g.NdJ("click",function(){return t.showDownloadLinks()}),g._uU(25," save_alt "),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.MAs(20);g.xp6(1),g.Q6J("href",t.episode.streamLinks[0].url,g.LSH),g.xp6(1),g.Udp("background-image",g.xi3(3,13,g.xi3(4,16,g.lcZ(5,19,g.Dn7(6,21,t.episode.anime.cover,"resolveUrl","image")),"encodeAndFormat"),"style")),g.uIk("data-cover",t.episode.anime.cover),g.xp6(6),g.Q6J("title",t.episode.anime.title),g.xp6(1),g.Q6J("ngIf",t.episode.anime.isMovie),g.xp6(1),g.hij(" ",t.episode.anime.title," "),g.xp6(3),g.Oqu(t.episode.number),g.xp6(1),g.Q6J("ngIf",t.episode.anime.isNew),g.xp6(1),g.Q6J("ngIf",t.episode.anime.isFinished),g.xp6(3),g.Q6J("ngIf",t.episode.isViewed)("ngIfElse",e),g.xp6(3),g.Q6J("on",t.isFavorite())}},directives:[b.C0,b.m5,b.PK,b.cV,i.O5,pe,b.tI,b.hS,b.l0,b.DF],pipes:[he,me,i.Ov,Ce],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.4213bbf693efb54bc5bf.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),e})();function Ae(e,t){1&e&&(g.ynx(0),g.TgZ(1,"i",15),g._uU(2,"movie"),g.qZA(),g.BQk())}function Te(e,t){1&e&&(g.ynx(0),g.TgZ(1,"div",16),g.TgZ(2,"span"),g._uU(3,"New"),g.qZA(),g.qZA(),g.BQk())}function Me(e,t){1&e&&(g.TgZ(0,"div",18),g.TgZ(1,"span"),g._uU(2,"End"),g.qZA(),g.qZA())}function ye(e,t){if(1&e&&g.YNc(0,Me,3,0,"div",17),2&e){const e=g.oxw();g.Q6J("ngIf",e.episodeRange.last.anime.isFinished)}}function Pe(e,t){if(1&e&&(g.TgZ(0,"a",19),g.ALo(1,"safe"),g._uU(2," check_circle_outline "),g.qZA()),2&e){const e=g.oxw();g.Q6J("href",g.xi3(1,1,e.viewedEpisodes.getEpisodeUrl(e.episodeRange.first),"resourceUrl"),g.LSH)}}let qe=(()=>{class e{constructor(e,t){this.favoriteAnimes=e,this.viewedEpisodes=t,this.streamLinksClick=new g.vpe,this.downloadLinksClick=new g.vpe}ngOnInit(){this.episodeRange.range=this.episodeRange.range.map(e=>Object.assign(Object.assign({},e),{isViewed:this.viewedEpisodes.isViewed(e)})),this.episodeRange.first.isRegular=this.viewedEpisodes.isRegular(this.episodeRange.first)}onClick(e){return e.preventDefault(),this.showStreamLinks(),!1}showStreamLinks(){this.streamLinksClick.emit(this.episodeRange)}showDownloadLinks(){this.downloadLinksClick.emit(this.episodeRange)}toggleFavorite(e){e?this.favoriteAnimes.add(this.episodeRange.first.anime.title):this.favoriteAnimes.remove(this.episodeRange.first.anime.title)}isFavorite(){return this.favoriteAnimes.isFavorite(this.episodeRange.first.anime.title)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(u.S),g.Y36(h.z))},e.\u0275cmp=g.Xpm({type:e,selectors:[["episode-range-card"]],inputs:{episodeRange:"episodeRange"},outputs:{streamLinksClick:"streamLinksClick",downloadLinksClick:"downloadLinksClick"},decls:23,vars:18,consts:[["mdcCard","",1,"custom-card-photo"],["mdcCardPrimaryAction","","href","javascript:void(0)",3,"click"],["mdcCardMedia","","size","square"],["mdcCardMediaContent",""],[3,"title"],[4,"ngIf"],[1,"card-badge","number"],[4,"ngIf","ngIfElse"],["endBadge",""],[1,"mdc-card__actions","mdc-card__action-icons"],["viewport",""],["target","_blank","class","material-icons mdc-icon-button centered green-check","title","Regular",3,"href",4,"ngIf"],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["title","Stream links",1,"material-icons","mdc-icon-button",3,"click"],["title","Download links",1,"material-icons","mdc-icon-button",3,"click"],["title","Movie",1,"material-icons"],[1,"card-badge","new"],["class","card-badge end",4,"ngIf"],[1,"card-badge","end"],["target","_blank","title","Regular",1,"material-icons","mdc-icon-button","centered","green-check",3,"href"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"a",1),g.NdJ("click",function(e){return t.onClick(e)}),g.TgZ(2,"div",2),g.ALo(3,"safe"),g.ALo(4,"url"),g.TgZ(5,"div",3),g.TgZ(6,"h2",4),g.YNc(7,Ae,3,0,"ng-container",5),g._uU(8),g.qZA(),g.TgZ(9,"div",6),g.TgZ(10,"span"),g._uU(11),g.qZA(),g.qZA(),g.YNc(12,Te,4,0,"ng-container",7),g.YNc(13,ye,1,1,"ng-template",null,8,g.W1O),g.qZA(),g.qZA(),g.qZA(),g.TgZ(15,"div",9,10),g.YNc(17,Pe,3,4,"a",11),g.TgZ(18,"button",12),g.NdJ("onChange",function(e){return t.toggleFavorite(e)}),g.qZA(),g.TgZ(19,"button",13),g.NdJ("click",function(){return t.showStreamLinks()}),g._uU(20," play_circle_outline "),g.qZA(),g.TgZ(21,"button",14),g.NdJ("click",function(){return t.showDownloadLinks()}),g._uU(22," save_alt "),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.MAs(14);g.xp6(2),g.Udp("background-image",g.xi3(3,12,g.xi3(4,15,t.episodeRange.first.anime.cover,"encodeAndFormat"),"style")),g.uIk("data-cover",t.episodeRange.first.anime.cover),g.xp6(4),g.Q6J("title",t.episodeRange.first.anime.title),g.xp6(1),g.Q6J("ngIf",t.episodeRange.first.anime.isMovie),g.xp6(1),g.hij(" ",t.episodeRange.first.anime.title," "),g.xp6(3),g.AsE("",t.episodeRange.first.number," - ",t.episodeRange.last.number,""),g.xp6(1),g.Q6J("ngIf",t.episodeRange.first.anime.isNew)("ngIfElse",e),g.xp6(5),g.Q6J("ngIf",t.episodeRange.first.isRegular),g.xp6(1),g.Q6J("on",t.isFavorite())}},directives:[b.C0,b.m5,b.PK,b.cV,i.O5,pe],pipes:[he,me],styles:['.card-badge[_ngcontent-%COMP%]{position:absolute;top:0}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;display:block;padding:4px 10px;color:#fff;font-weight:500;font-size:13px;text-transform:uppercase}.card-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";width:0;height:0;position:absolute;top:0}.card-badge.number[_ngcontent-%COMP%]{right:0}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#00a651}.card-badge.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-left:8px solid transparent;border-top:24px solid #00a651;right:100%}.card-badge.new[_ngcontent-%COMP%]{left:0}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0061aa}.card-badge.new[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #0061aa;left:100%}.card-badge.end[_ngcontent-%COMP%]{left:0}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#c53030}.card-badge.end[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{border-right:8px solid transparent;border-top:24px solid #c53030;left:100%}[mdcCard][_ngcontent-%COMP%]{margin:0 13px 24px}[mdcCard].custom-card-photo[_ngcontent-%COMP%]{max-width:200px;min-width:160px}[mdcCard].custom-card-photo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background:transparent url(loading.4213bbf693efb54bc5bf.gif) 50% no-repeat}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:8px 12px;margin:0;font-family:Roboto,sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-size:1rem;line-height:1.75rem;font-weight:400;letter-spacing:.009375em;text-decoration:inherit;text-transform:inherit;background-image:linear-gradient(180deg,transparent 0,rgba(0,0,0,.9));color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[mdcCard].custom-card-photo[_ngcontent-%COMP%]   [mdcCardMediaContent][_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > i.material-icons[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]{min-height:42px;padding:6px 8px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{font-size:1.2em;padding:0;width:30px;height:30px}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[mdcCard][_ngcontent-%COMP%]   .mdc-card__actions[_ngcontent-%COMP%]   .mdc-icon-button.wider[_ngcontent-%COMP%]{font-size:1.3em}.red-heart[_ngcontent-%COMP%]{color:#e25555}.blue-eye[_ngcontent-%COMP%]{color:#0275d8}.green-check[_ngcontent-%COMP%]{color:#28a745}']}),e})(),Le=(()=>{class e extends i.uU{constructor(){super("en")}transform(e,t,n,i){switch((0,a.hp)(new Date(e))){case(0,a.Lg)():return"Today";case(0,a.Cv)():return"Yesterday";default:return super.transform(e,t||"EEEE, dd MMMM yyyy",n,i)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g.Yjl({name:"shortdate",type:e,pure:!0}),e})();const De=["episodeStreamLinksDialog"],Je=["episodeDownloadLinksDialog"],Se=["episodeRangeStreamLinksDialog"],Ie=["episodeRangeDownloadLinksDialog"],Ee=function(e){return{$implicit:e}};function Ne(e,t){if(1&e&&g.GkF(0,19),2&e){const e=t.$implicit;g.oxw(4);const n=g.MAs(7),i=g.MAs(5);g.Q6J("ngTemplateOutlet",e.range?n:i)("ngTemplateOutletContext",g.VKq(2,Ee,e))}}function Fe(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"h3",15),g._uU(2),g.ALo(3,"shortdate"),g.qZA(),g._UZ(4,"div",16),g.TgZ(5,"section",17),g.YNc(6,Ne,1,4,"ng-container",18),g.qZA(),g.BQk()),2&e){const e=g.oxw().$implicit,t=g.oxw(2);g.xp6(2),g.Oqu(g.lcZ(3,2,e)),g.xp6(4),g.Q6J("ngForOf",t.episodesByDays[e])}}function Ue(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Fe,7,4,"ng-container",14),g.BQk()),2&e){const e=t.$implicit,n=g.oxw(2);g.xp6(1),g.Q6J("ngIf",null==n.episodesByDays[e]?null:n.episodesByDays[e].length)}}function Qe(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Ue,2,1,"ng-container",13),g.BQk()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.days)}}function Ve(e,t){if(1&e&&g.GkF(0,19),2&e){const e=t.$implicit;g.oxw(2);const n=g.MAs(7),i=g.MAs(5);g.Q6J("ngTemplateOutlet",e.range?n:i)("ngTemplateOutletContext",g.VKq(2,Ee,e))}}function Be(e,t){if(1&e&&(g.TgZ(0,"section",17),g.YNc(1,Ve,1,4,"ng-container",18),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.episodes)}}function Re(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"episode-card",20),g.NdJ("streamLinksClick",function(t){return g.CHM(e),g.oxw().openStreamLinksDialog(t)})("downloadLinksClick",function(t){return g.CHM(e),g.oxw().openDownloadLinksDialog(t)}),g.qZA()}2&e&&g.Q6J("episode",t.$implicit)}function Ye(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"episode-range-card",21),g.NdJ("streamLinksClick",function(t){return g.CHM(e),g.oxw().openStreamLinksDialog(t)})("downloadLinksClick",function(t){return g.CHM(e),g.oxw().openDownloadLinksDialog(t)}),g.qZA()}2&e&&g.Q6J("episodeRange",t.$implicit)}function ze(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",22),g.NdJ("click",function(){return g.CHM(e),g.oxw().refresh()}),g.TgZ(1,"i",23),g._uU(2,"refresh"),g.qZA(),g.qZA()}}const He=function(){return[]};let je=(()=>{class e{constructor(e,t,n,i,o,s,a){this.animeProvider=e,this.favoriteAnimes=t,this.viewedEpisodes=n,this.settings=i,this.browser=o,this.debug=s,this.route=a,this.isLoading=!0,this.searchValue=null,this.episodes=[],this.days=[],this.episodesByDays=[],this.allEpisodes=[],this.selectedEpisode=null,this.selectedEpisodeRange=null,this.componentDestroy=new r.xQ}ngOnInit(){this.browser.isWebExtension&&this.browser.setBadgeText(""),this.route.queryParams.pipe((0,l.R)(this.componentDestroy)).subscribe(e=>{this.view=e.view||this.settings.defaultView,this.debug.log("Current view:",this.view),this.allEpisodes.length>0?this.filterEpisodes(this.allEpisodes,this.days):this.fetchEpisodes()})}ngOnDestroy(){this.componentDestroy.next(),this.componentDestroy.complete()}fetchEpisodes(e){this.isLoading=!0,this.animeProvider.getLatestEpisodesByDays(e).pipe((0,l.R)(this.componentDestroy)).subscribe(([e,t])=>{this.allEpisodes=e,this.filterEpisodes(e,t),this.days=t},e=>{console.error(e.message)},()=>{this.isLoading=!1})}filterEpisodesByView(e,t){switch(t){case c.G.Favorites:return e.filter(e=>this.favoriteAnimes.isFavorite(e.anime.title));case c.G.FirstEpisodes:return e.filter(e=>1===e.number);default:return e}}filterEpisodes(e,t){var n;this.episodes=this.filterEpisodesByView(e,this.view),(null===(n=this.searchValue)||void 0===n?void 0:n.length)&&(this.episodes=this.episodes.filter(e=>-1!==e.anime.title.toLowerCase().indexOf(this.searchValue.toLowerCase()))),this.settings.mergeCommonEpisodes&&(this.episodes=this.mergeCommonEpisodes(this.episodes)),this.settings.displayEpisodesDayByDay&&t.forEach(e=>{if(e){const t=(0,a.hp)(new Date(e));this.episodesByDays[e]=this.episodes.filter(e=>{if(!e.releaseDate)return!1;const n=(0,a.hp)(new Date(e.releaseDate));return t===n})}})}mergeCommonEpisodes(e){var t;const n=[],i={};let o=e.slice();for(let r of e){if(Object.keys(i).find(e=>(0,d.T0)(e,r.anime.title,this.settings.episodeSimilarityDegree,!0)&&-1!==i[e].indexOf(r.number)))continue;const e=o.filter(e=>(0,d.T0)(e.anime.title,r.anime.title,this.settings.episodeSimilarityDegree,!0)&&(!this.settings.displayEpisodesDayByDay||(0,a.zu)(e.releaseDate,r.releaseDate)));if(i[r.anime.title]=[...i[r.anime.title]||[],...e.map(e=>e.number)],o=o.filter(t=>-1===e.findIndex(e=>e.anime.title===t.anime.title&&e.number===t.number)),e.length>1){const i=new s.W(e.sort((e,t)=>e.number-t.number),r.releaseDate);n.push(i),(null===(t=this.selectedEpisodeRange)||void 0===t?void 0:t.first.anime.title)===i.first.anime.title&&(this.selectedEpisodeRange=i)}else n.push(r)}return n}openStreamLinksDialog(e){e instanceof s.W?(this.selectedEpisodeRange=e,this.episodeRangeStreamLinksDialog.open()):(this.selectedEpisode=e,this.episodeStreamLinksDialog.open())}openDownloadLinksDialog(e){e instanceof s.W?(this.selectedEpisodeRange=e,this.episodeRangeDownloadLinksDialog.open()):(this.selectedEpisode=e,this.episodeDownloadLinksDialog.open())}markEpisodeAsViewed(e){e.isViewed=!0,this.viewedEpisodes.add(e)}search(e){this.debug.log("Searching for:",e),this.filterEpisodes(this.allEpisodes,this.days),this.isLoading=!1}refresh(){this.episodes=[],this.episodesByDays=[],this.fetchEpisodes(!0)}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(p._),g.Y36(u.S),g.Y36(h.z),g.Y36(m.g),g.Y36(f.q),g.Y36(v.r),g.Y36(o.gz))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-main"]],viewQuery:function(e,t){if(1&e&&(g.Gf(De,5),g.Gf(Je,5),g.Gf(Se,5),g.Gf(Ie,5)),2&e){let e;g.iGM(e=g.CRH())&&(t.episodeStreamLinksDialog=e.first),g.iGM(e=g.CRH())&&(t.episodeDownloadLinksDialog=e.first),g.iGM(e=g.CRH())&&(t.episodeRangeStreamLinksDialog=e.first),g.iGM(e=g.CRH())&&(t.episodeRangeDownloadLinksDialog=e.first)}},decls:17,vars:18,consts:[[3,"view","isLoading","searchValue","isLoadingChange","searchValueChange"],[4,"ngIf","ngIfElse"],["showAllTemplate",""],["episodeCard",""],["episodeRangeCard",""],[3,"title","links","linkClick","close"],["episodeStreamLinksDialog",""],["episodeDownloadLinksDialog",""],["linksKey","streamLinks",3,"title","episodes","linkClick","close"],["episodeRangeStreamLinksDialog",""],["linksKey","downloadLinks",3,"title","episodes","linkClick","close"],["episodeRangeDownloadLinksDialog",""],["mdcButton","","raised","","class","refresh-button","title","Refresh",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"day-title"],[1,"day-divider"],[1,"custom-card-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"episode","streamLinksClick","downloadLinksClick"],[3,"episodeRange","streamLinksClick","downloadLinksClick"],["mdcButton","","raised","","title","Refresh",1,"refresh-button",3,"click"],["mdcButtonIcon","",1,"material-icons"]],template:function(e,t){if(1&e&&(g.TgZ(0,"app-layout",0),g.NdJ("isLoadingChange",function(e){return t.isLoading=e})("searchValueChange",function(e){return t.searchValue=e})("searchValueChange",function(e){return t.search(e)}),g.YNc(1,Qe,2,1,"ng-container",1),g.YNc(2,Be,2,1,"ng-template",null,2,g.W1O),g.YNc(4,Re,1,1,"ng-template",null,3,g.W1O),g.YNc(6,Ye,1,1,"ng-template",null,4,g.W1O),g.TgZ(8,"episode-choose-link-dialog",5,6),g.NdJ("linkClick",function(){return t.markEpisodeAsViewed(t.selectedEpisode)})("close",function(){return t.selectedEpisode=null}),g.qZA(),g.TgZ(10,"episode-choose-link-dialog",5,7),g.NdJ("linkClick",function(){return t.markEpisodeAsViewed(t.selectedEpisode)})("close",function(){return t.selectedEpisode=null}),g.qZA(),g.TgZ(12,"episode-range-choose-link-dialog",8,9),g.NdJ("linkClick",function(e){return t.markEpisodeAsViewed(e)})("close",function(){return t.selectedEpisodeRange=null}),g.qZA(),g.TgZ(14,"episode-range-choose-link-dialog",10,11),g.NdJ("linkClick",function(e){return t.markEpisodeAsViewed(e)})("close",function(){return t.selectedEpisodeRange=null}),g.qZA(),g.qZA(),g.YNc(16,ze,3,0,"button",12)),2&e){const e=g.MAs(3);g.Q6J("view",t.view)("isLoading",t.isLoading)("searchValue",t.searchValue),g.xp6(1),g.Q6J("ngIf",t.settings.displayEpisodesDayByDay)("ngIfElse",e),g.xp6(7),g.Q6J("title","Choose a stream link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.streamLinks)||g.DdM(14,He)),g.xp6(2),g.Q6J("title","Choose a download link")("links",(null==t.selectedEpisode?null:t.selectedEpisode.downloadLinks)||g.DdM(15,He)),g.xp6(2),g.Q6J("title","Choose a stream link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||g.DdM(16,He)),g.xp6(2),g.Q6J("title","Choose a download link")("episodes",(null==t.selectedEpisodeRange?null:t.selectedEpisodeRange.range)||g.DdM(17,He)),g.xp6(2),g.Q6J("ngIf",!t.isLoading)}},directives:[X,i.O5,se,ge,i.sg,i.tP,Oe,qe,b.S8],pipes:[Le],styles:[".custom-card-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-flow:row wrap;padding-top:24px;padding-left:16px;padding-right:16px}.custom-card-container[_ngcontent-%COMP%]:empty{display:none}.day-title[_ngcontent-%COMP%]{margin:0 0 5px 28px;font-size:18px;font-weight:400}.day-title[_ngcontent-%COMP%]:first-of-type{margin-top:20px}.day-divider[_ngcontent-%COMP%]{margin:0 0 0 28px;width:calc(100% - 56px);border-bottom:1px solid rgba(0,0,0,.12);height:0}.refresh-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;padding:0;border-radius:50%;min-height:45px;min-width:45px;transition:all .3s ease-in-out}.refresh-button[_ngcontent-%COMP%]:hover{transform:rotate(270deg)}"]}),e})();var Ge=n(3604);function Ke(e,t){if(1&e&&(g.TgZ(0,"option",24),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.number),g.xp6(1),g.hij(" ",e.number," ")}}function $e(e,t){if(1&e){const e=g.EpF();g.ynx(0),g.TgZ(1,"li",14),g.TgZ(2,"span",15),g.TgZ(3,"button",16),g.NdJ("onChange",function(t){const n=g.CHM(e).$implicit;return g.oxw().toggleFavorite(n,t)}),g.qZA(),g.qZA(),g.TgZ(4,"span",17),g._uU(5),g.qZA(),g.TgZ(6,"span",18),g.TgZ(7,"div",19),g.TgZ(8,"select",20),g.YNc(9,Ke,2,2,"option",21),g.qZA(),g.TgZ(10,"label",22),g._uU(11,"Last viewed episodes"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(12,"li",23),g.BQk()}if(2&e){const e=t.$implicit;g.xp6(3),g.Q6J("on",e.isFavorite),g.xp6(2),g.hij(" ",e.title," "),g.xp6(3),g.Q6J("ngModel",e.episodes[0].number),g.xp6(1),g.Q6J("ngForOf",e.episodes)}}let We=(()=>{class e{constructor(e,t,n,i,o){this.viewedEpisodes=e,this.favoriteAnimes=t,this.settings=n,this.debug=i,this.route=o,this.isLoading=!1,this.searchValue=null,this.viewedAnimes=[],this.allViewedAnimes=[],this.tabs={All:"all",Favorites:"favorites"},this.activeTab=this.tabs.All,this.count={all:0,favorites:0},this.infiniteScroll={initial:50,max:50,step:50},this.componentDestroy=new r.xQ}ngOnInit(){return(0,fe.mG)(this,void 0,void 0,function*(){(yield this.viewedEpisodes.getAsync()).forEach(e=>{const t=this.allViewedAnimes.findIndex(t=>(0,d.T0)(t.title,e.animeTitle,this.settings.episodeSimilarityDegree));t>-1?this.allViewedAnimes[t].episodes.find(t=>t.number===e.number)?this.debug.warn("Duplicate viewed episode found:",e):(this.allViewedAnimes[t].episodes.push(e),this.allViewedAnimes[t].episodes=this.allViewedAnimes[t].episodes.sort((e,t)=>t.number-e.number)):this.allViewedAnimes.push({title:e.animeTitle,episodes:[e],isFavorite:this.favoriteAnimes.isFavorite(e.animeTitle)})}),this.viewedAnimes=this.allViewedAnimes,this.count={all:this.allViewedAnimes.length,favorites:this.allViewedAnimes.filter(e=>e.isFavorite).length},this.route.params.pipe((0,l.R)(this.componentDestroy)).subscribe(e=>{this.searchValue=e.search||"",this.debug.log("Search value:",this.searchValue),this.searchValue.length&&this.search(this.searchValue)})})}ngOnDestroy(){this.componentDestroy.next(),this.componentDestroy.complete()}search(e){this.debug.log("Searching for:",e),this.filterAnimes(),this.isLoading=!1}filterAnimes(){var e;let t=[];t=(null===(e=this.searchValue)||void 0===e?void 0:e.length)?this.allViewedAnimes.filter(e=>(0,d.T0)(e.title,this.searchValue,this.settings.episodeSimilarityDegree)):this.allViewedAnimes;const n=t.filter(e=>e.isFavorite);switch(this.count={all:t.length,favorites:n.length},this.activeTab){case this.tabs.Favorites:t=n}this.viewedAnimes=t,this.infiniteScroll.max=this.infiniteScroll.initial}switchTab(e){this.activeTab=e,this.filterAnimes()}toggleFavorite(e,t){t?(this.favoriteAnimes.add(e.title),e.isFavorite=!0):(this.favoriteAnimes.remove(e.title),e.isFavorite=!1)}onScroll(){this.infiniteScroll.max+=this.infiniteScroll.step}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(h.z),g.Y36(u.S),g.Y36(m.g),g.Y36(v.r),g.Y36(o.gz))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-viewed"]],decls:19,vars:8,consts:[[3,"isLoading","searchValue","isLoadingChange","searchValueChange"],["mdcDialogBody",""],["mdcTabBarScroller",""],["mdcTabBarScrollerBack",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll back button",1,"material-icons"],["mdcTabBarScrollerFrame",""],["mdcTabBar",""],["mdcTab","","tabindex","0",3,"activate"],["mdcTabBarScrollerForward",""],["mdcTabBarScrollerInner","","href","javascript:void(0)","aria-label","scroll forward button",1,"material-icons"],["infiniteScroll","",1,"tab-content",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["mdcListGroup",""],["mdcList","",3,"nonInteractive"],[4,"ngFor","ngForOf"],["mdcListItem",""],["mdcListItemGraphic",""],["iconToggle","","classOn","red-heart","titleOn","Remove from favorites","titleOff","Add to favorites","iconOn","favorite","iconOff","favorite_border",1,"material-icons","mdc-icon-button",3,"on","onChange"],["mdcListItemText",""],["mdcListItemMeta",""],["mdcSelect","","outlined",""],["mdcSelectControl","",3,"ngModel"],["disabled","",3,"value",4,"ngFor","ngForOf"],["mdcFloatingLabel",""],["mdcListDivider",""],["disabled","",3,"value"]],template:function(e,t){1&e&&(g.TgZ(0,"app-layout",0),g.NdJ("isLoadingChange",function(e){return t.isLoading=e})("searchValueChange",function(e){return t.searchValue=e})("searchValueChange",function(e){return t.search(e)}),g.TgZ(1,"section",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"a",4),g._uU(5," navigate_before "),g.qZA(),g.qZA(),g.TgZ(6,"div",5),g.TgZ(7,"nav",6),g.TgZ(8,"a",7),g.NdJ("activate",function(){return t.switchTab(t.tabs.All)}),g._uU(9),g.qZA(),g.TgZ(10,"a",7),g.NdJ("activate",function(){return t.switchTab(t.tabs.Favorites)}),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"div",8),g.TgZ(13,"a",9),g._uU(14," navigate_next "),g.qZA(),g.qZA(),g.qZA(),g.TgZ(15,"div",10),g.NdJ("scrolled",function(){return t.onScroll()}),g.TgZ(16,"div",11),g.TgZ(17,"ul",12),g.YNc(18,$e,13,4,"ng-container",13),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("isLoading",t.isLoading)("searchValue",t.searchValue),g.xp6(9),g.hij("All (",t.count.all,")"),g.xp6(2),g.hij("Favorites (",t.count.favorites,")"),g.xp6(4),g.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50),g.xp6(2),g.Q6J("nonInteractive",!0),g.xp6(1),g.Q6J("ngForOf",t.viewedAnimes.slice(0,t.infiniteScroll.max)))},directives:[X,b.OJ,b.Cm,b.Qx,b.Cn,b.on,b.Io,b.f3,b.ru,Ge.R,b.mB,b.l0,i.sg,b.DF,b.NZ,pe,b.p9,b.gd,b.tM,b.FW,M.EJ,M.JJ,M.On,b.gp,b.P,M.YN,M.Kr],styles:["[mdcDialogBody][_ngcontent-%COMP%]{padding:0}[mdcListItem][_ngcontent-%COMP%]{margin:0 10px}.tab-content[_ngcontent-%COMP%]{margin-top:20px}.red-heart[_ngcontent-%COMP%]{color:#e25555}[mdcSelect][_ngcontent-%COMP%]{min-width:200px}[mdcSelect][_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-align:center}[mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   .mdc-notched-outline__idle[_ngcontent-%COMP%], [mdcSelect][_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transition:none}"]}),e})();const Xe=[{path:"",component:je},{path:"viewed",children:[...[":search",""].map(e=>({path:e,component:We}))]}];let et=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.Bz.forChild(Xe)],o.Bz]}),e})();var tt=n(2271);let nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,tt.m,o.Bz]]}),e})(),it=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,tt.m,nt,o.Bz]]}),e})(),ot=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,et,tt.m,nt,it]]}),e})()}}]);